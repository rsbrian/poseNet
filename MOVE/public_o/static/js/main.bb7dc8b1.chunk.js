(this["webpackJsonpmove-mirror2"]=this["webpackJsonpmove-mirror2"]||[]).push([[0],{12:function(e,t){var a={KeyboardEventHandler_onKeyEvent:function(e,t,a,s){var n=window.$(t.target),c=window.$("a:visible,:input:visible,div[tabindex]"),i=c.first(),r=c.last();switch(e){case"up":n.is(i)?r.focus():n.prev().focus(),s.resetCounter();break;case"down":n.is(r)?i.focus():n.next().focus(),s.resetCounter();break;case"enter":null!=n.attr("attr")&&a.setState(JSON.parse(n.attr("attr"))),null!=n.attr("selectcallback")&&s[n.attr("selectcallback")](n.attr("selectcallbackparam")),n.attr("targetpage")?a.changePage(parseInt(n.attr("targetpage"))):a.changePage(a.state.page+1);break;case"left":a.state.page>1&&a.changePage(a.state.page-1)}}};t.Util=a},13:function(e,t,a){e.exports=a(24)},18:function(e,t,a){},20:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(11),i=a.n(c),r=(a(18),a(1)),o=a.n(r),l=a(3),u=a(4),m=a(5),d=a(2),p=a(7),h=a(6),v=(a(20),a(12)),g=a.n(v),f=a(8),b=a.n(f),y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"loadJSON",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./course/courses.json",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.text();case 5:s=e.sent,a.data=JSON.parse(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCoachList",value:function(){return a.data.coaches}},{key:"getCourseList",value:function(){var e=Object(l.a)(o.a.mark((function e(t,s){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.data.courses.filter((function(e,n){var c=e.coaches.indexOf(t)>-1&&e.course_categories.indexOf(s)>-1?e:null;if(c){e.muscle="";for(var i=0;i<e.muscles.length;i++)for(var r=0;r<a.data.muscles.length;r++)a.data.muscles[r].id===e.muscles[i]&&(e.muscle+=(e.muscle.length>0?"\u3001":"")+a.data.muscles[r].name)}return c})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCourse",value:function(){var e=Object(l.a)(o.a.mark((function e(t,s,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.data.courses.filter((function(e,a){var c=e.coaches.indexOf(t)>-1&&e.course_categories.indexOf(s)>-1&&e.id===n?e:null;if(c){var i=c.coach_videos.filter((function(e,a){return e.coach_id===t?e:null}));c.video=i[0].video}return c}))[0]);case 1:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"sendScore",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(n.a.createElement);y.data=null;var E=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(d.a)(s)),s.state={handleKeys:["enter","up","down"],coaches:[]},s.props.parent.currentPage=Object(d.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys,coachid:null,cid:null,ccid:null}),s.buttons={},s}return Object(m.a)(a,[{key:"resetCounter",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.loadJSON();case 2:this.setState({coaches:y.getCoachList()}),window.setElementEventLintener("Home"),(t=Object.keys(this.buttons)).length>0&&this.buttons[t[0]].focus();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement(b.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"home_pageTitle"},"\u667a\u6167\u5065\u8eab\u93e1"),n.a.createElement("div",{className:"home_pageTitle2"},"\u548c\u4f60\u4e00\u8d77\u505a\u904b\u52d5"),n.a.createElement("div",{className:"home_selectCoach"},"\u8acb\u9078\u64c7\u6559\u7df4"),n.a.createElement("div",{className:"home_selectCoachAreaSize"},this.state.coaches.map((function(t,a){var s='{"coachid":"'+t.id+'"}',c="url(./course"+t.avatar+")";return n.a.createElement("div",{className:"home_coachArea",tabIndex:a,key:a,attr:s,ref:function(a){e.buttons[t.id]=a},href:"#"},n.a.createElement("div",{className:"home_videoArea",style:{backgroundImage:c,backgroundPosition:"center"}}," "),n.a.createElement("div",{className:"home_coach_title"},t.name))}))),n.a.createElement("div",{className:"home_image1"}),n.a.createElement("div",{className:"home_textArea1"},n.a.createElement("div",{style:{color:"#17FF21"}},"\u9ede\u9078"),"\u96d9\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image2"}),n.a.createElement("div",{className:"home_textArea2"},n.a.createElement("div",{style:{color:"#17FF21"}},"\u524d\u4e00\u9801"),"\u96d9\u624b\u4ea4\u53c9"),n.a.createElement("div",{className:"home_image3"}),n.a.createElement("div",{className:"home_textArea3"},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0a\u9078\u53d6"),"\u5de6\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image4"}),n.a.createElement("div",{className:"home_textArea4"},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0b\u9078\u53d6"),"\u53f3\u624b\u5f4e\u8209")))}}]),a}(n.a.Component),S=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(d.a)(s)),s.app=s.props.parent,s.state={countDown:30,handleKeys:["up","down","enter","left"]},s.buttons={},s.props.parent.currentPage=Object(d.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys}),s}return Object(m.a)(a,[{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=this;window.setElementEventLintener("Catalog"),this.props.parent.state.cid?this.buttons[this.props.parent.state.cid].focus():this.buttons[Object.keys(this.buttons)[0]].focus();var t=window.setInterval((function(){if(null!=e.state){var t=e.state.countDown-1;e.setState({countDown:t}),0===t&&e.app.changePage(1)}}),1e3);this.setState({interval:t})}},{key:"componentWillUnmount",value:function(){this.state.interval&&window.clearInterval(this.state.interval)}},{key:"render",value:function(){var e=this;return n.a.createElement(b.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/bg_2.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"catalog_dotImg"}),n.a.createElement("div",{className:"catalog_bodyImage",style:{backgroundImage:"url(./assets/body.png)",width:261,height:1315}}),n.a.createElement("div",{className:"catalog_shoulder",tabIndex:"1",attr:'{"cid":"19c32de9-5985-4e15-9905-bad3d932ae2d"}',ref:function(t){e.buttons["19c32de9-5985-4e15-9905-bad3d932ae2d"]=t}}),n.a.createElement("div",{className:"catalog_arm",tabIndex:"2",attr:'{"cid":"49a374be-7af0-4c46-bf31-cb905e71c250"}',ref:function(t){e.buttons["49a374be-7af0-4c46-bf31-cb905e71c250"]=t}}),n.a.createElement("div",{className:"catalog_back",tabIndex:"3",attr:'{"cid":"37f4487e-5b40-4c71-bd1b-a0cc6212fde1"}',ref:function(t){e.buttons["37f4487e-5b40-4c71-bd1b-a0cc6212fde1"]=t}}),n.a.createElement("div",{className:"catalog_hip",tabIndex:"4",attr:'{"cid":"e81a2288-6022-413d-ada2-375f17a467cb"}',ref:function(t){e.buttons["e81a2288-6022-413d-ada2-375f17a467cb"]=t}}),n.a.createElement("div",{className:"catalog_leg",tabIndex:"5",attr:'{"cid":"8bb8ca76-fb34-46b8-b781-3fc046d7e360"}',ref:function(t){e.buttons["8bb8ca76-fb34-46b8-b781-3fc046d7e360"]=t}}),n.a.createElement("div",{className:"home_image1",style:{backgroundSize:82,width:82,height:82,top:1770,left:90}}),n.a.createElement("div",{className:"home_textArea1",style:{top:1770,left:180,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u9ede\u9078"),"\u96d9\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image2",style:{backgroundSize:82,width:82,height:82,top:1770,left:330}}),n.a.createElement("div",{className:"home_textArea2",style:{top:1770,left:420,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u524d\u4e00\u9801"),"\u96d9\u624b\u4ea4\u53c9"),n.a.createElement("div",{className:"home_image3",style:{backgroundSize:82,width:82,height:82,top:1770,left:570}}),n.a.createElement("div",{className:"home_textArea3",style:{top:1770,left:660,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0a\u9078\u53d6"),"\u5de6\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image4",style:{backgroundSize:82,width:82,height:82,top:1770,left:810}}),n.a.createElement("div",{className:"home_textArea4",style:{top:1770,left:900,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0b\u9078\u53d6"),"\u53f3\u624b\u5f4e\u8209")))}}]),a}(n.a.Component),w=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(d.a)(s)),s.app=s.props.parent,s.props.parent.currentPage=Object(d.a)(s),s.state={countDown:30,courseList:[],handleKeys:["up","down","enter","left"]},s.props.parent.setState({availableKeys:s.state.handleKeys}),s.buttons={},s.countDown=30,s}return Object(m.a)(a,[{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.setElementEventLintener("ClassSelect"),e.t0=this,e.next=4,y.getCourseList(this.props.parent.state.coachid,this.props.parent.state.cid);case 4:if(e.t1=e.sent,e.t2={courseList:e.t1},e.t0.setState.call(e.t0,e.t2),t=!1,this.props.parent.state.ciid&&this.buttons[this.props.parent.state.ciid]&&(this.buttons[this.props.parent.state.ciid].focus(),t=!0),!1!==t){e.next=17;break}if(!((a=Object.keys(this.buttons)).length>0)){e.next=15;break}this.buttons[a[0]].focus(),e.next=17;break;case 15:return this.app.changePage(2),e.abrupt("return");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.interval&&window.clearInterval(this.state.interval)}},{key:"mycallback",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.app.state.isUseWebSocket){e.next=4;break}this.app.ws.send(JSON.stringify({function:"uploadCourse",name:encodeURI(t)})),e.next=17;break;case 4:return e.prev=4,e.next=7,fetch("http://127.0.0.1:5500/uploadCourse?name="+t,{method:"GET",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}});case 7:return a=e.sent,e.next=10,a.text();case 10:s=e.sent,console.log("uploadCourse:",s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(b.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/bg_2.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"classSelect_pageSize",ref:function(t){e.page=t},style:{maxHeight:490*this.state.courseList.length}},this.state.courseList.map((function(t,a){var s='{"ciid":"'+t.id+'"}';return console.log(t),n.a.createElement("div",{ref:function(a){e.buttons[t.id]=a},href:"#",tabIndex:a,key:a,attr:s,selectcallback:"mycallback",selectcallbackparam:t.title,className:"classSelect_pageButton"},n.a.createElement("div",{className:"classSelect_pageButton_title"},t.title),n.a.createElement("div",{className:"classSelect_pageButton_line"}),n.a.createElement("div",{className:"classSelect_pageButton_imageSpace"},n.a.createElement("img",{src:"./course"+t.image,alt:""})),n.a.createElement("div",{className:"classSelect_pageButton_dot1"}),n.a.createElement("div",{className:"classSelect_pageButton_dot1",style:{top:-70}}),n.a.createElement("div",{className:"classSelect_pageMuscle"},"\u8a13\u7df4\u808c\u8089\u90e8\u4f4d\uff1a"),n.a.createElement("div",{className:"classSelect_pageMuscleData"},t.muscle),n.a.createElement("div",{className:"classSelect_pageDescript"},"\u8a13\u7df4\u6210\u6548\uff1a"),n.a.createElement("div",{className:"classSelect_pageDescriptData"},t.description))}))),n.a.createElement("div",{className:"home_image1",style:{backgroundSize:82,width:82,height:82,top:1770,left:90}}),n.a.createElement("div",{className:"home_textArea1",style:{top:1770,left:180,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u9ede\u9078"),"\u96d9\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image2",style:{backgroundSize:82,width:82,height:82,top:1770,left:330}}),n.a.createElement("div",{className:"home_textArea2",style:{top:1770,left:420,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u524d\u4e00\u9801"),"\u96d9\u624b\u4ea4\u53c9"),n.a.createElement("div",{className:"home_image3",style:{backgroundSize:82,width:82,height:82,top:1770,left:570}}),n.a.createElement("div",{className:"home_textArea3",style:{top:1770,left:660,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0a\u9078\u53d6"),"\u5de6\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image4",style:{backgroundSize:82,width:82,height:82,top:1770,left:810}}),n.a.createElement("div",{className:"home_textArea4",style:{top:1770,left:900,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0b\u9078\u53d6"),"\u53f3\u624b\u5f4e\u8209")))}}]),a}(n.a.Component),k=a(9),_=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(d.a)(s)),s.getExerciseWebSockit=s.getExerciseWebSockit.bind(Object(d.a)(s)),s.app=s.props.parent,s.state={handleKeys:["enter","left"],beforeStartTime:(new Date).getTime(),startTime:null,intervalCount:0,course:null,countDown:3,timer:"00:06",start:!1,counter:0,isShowTip:!1,tip:"\u96d9\u8173\u6253\u958b\u8207\u80a9\u540c\u5bec\uff0c\u96d9\u624b\u6293\u53d6\u555e\u5464\u6162\u6162\u5f4e\u66f2\u624b\u81c2\u5411\u4e0a\u5f4e\u8209\u3002",isHold:!1,holdSec:2,currentHold:0,startHoldTime:0,holdSecPreson:1,isShowNotice:!1,notice:"\u5de6\u80a9\u8180\u79fb\u52d5\u4e86\uff0c\u8acb\u56de\u5230\u9810\u5099\u52d5\u4f5c\u91cd\u65b0\u958b\u59cb!",noticeHoldSec:2,noticeCurrentHold:0,noticeStartHoldTime:0,noticeHoldSecPreson:1,quit_time:null,actionCountDown:6,stopSecPreson:0,stopSec:0,responseBody:null},s.props.parent.currentPage=Object(d.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys}),s.percentage=30,s}return Object(m.a)(a,[{key:"gotoNextPage",value:function(){var e=this.app.state.user;e.timer=this.state.timer,e.end_time=this.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),e.elapsed_time=(Date.parse(e.end_time)-Date.parse(e.start_Time))/1e3,this.app.setState({user:e}),e.count>0?this.app.changePage(this.app.state.page+1):this.app.changePage(3)}},{key:"resetCounter",value:function(){}},{key:"DateTimeFormat",value:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t}},{key:"getExerciseWebSockit",value:function(e){this.setState({responseBody:e})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.setElementEventLintener("ClassBegin"),e.next=3,y.getCourse(this.app.state.coachid,this.app.state.cid,this.app.state.ciid);case 3:t=e.sent,this.setState({course:t,countDown:3,timer:"00:03",start:!1}),this.app.setState({user:{course:t,count:0,countTimes:[]}}),this.video.onplaying=function(e){var t=e.target.videoHeight,a=e.target.videoWidth;e.target.setAttribute("style","left:"+(1080-1100*a/t)/2+"px; ")},a=window.setInterval(Object(l.a)(o.a.mark((function e(){var t,a,n,c,i,r,l,u,m,d,p,h,v,g,f,b,y,E,S,w,k,_,N,x,T,O,j,C,D,P,I,F;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=window.$.find("canvas")).length>0&&t.forEach((function(e){e.remove()})),a=null,n=!1,!s.app.state.isUseWebSocket){e.next=9;break}a=s.state.responseBody,n=null===a,e.next=24;break;case 9:return c=null,e.prev=10,e.next=13,fetch("http://127.0.0.1:5500/getExercise",{method:"GET",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}});case 13:c=e.sent,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:if(n=null===c||!c.ok){e.next=24;break}return e.next=22,c.text();case 22:i=e.sent,a=JSON.parse(i);case 24:r=(new Date).getTime(),console.log("interval responseState",n),n?r-s.state.beforeStartTime>=3e4?(console.log("response not ok.....30\u79d2"),s.app.changePage(1)):(s.setState({stopSecPreson:(r-s.state.beforeStartTime)/1e3/30}),s.setState({stopSec:Math.ceil((r-s.state.beforeStartTime)/1e3)})):(l=s.state.isHold,u=s.state.isShowNotice,m=s.state.startHoldTime,d=s.state.noticeStartHoldTime,p=(new Date).getTime(),h=a,console.log("interval doHold, doNoticeHold, startHoldTime, noticeStartHoldTime, currentHoldTime, value >> ",l,u,m,d,p,h),console.log("interval value.start",h.start),h.start?(s.setState({isShowTip:!1}),null==s.state.startTime&&s.setState({startTime:r}),s.state.intervalCount%10===0&&null!=s.state&&null!=s.state.course&&(g=s.state.countDown,!1===s.state.start?(g-=1,s.setState({stopSecPreson:0,stopSec:0}),0===g&&(s.setState({start:!0}),(f=s.app.state.user).start_Time=s.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),s.app.setState({user:f}),s.transition.setAttribute("style","display:block; "),s.transitionImg.setAttribute("src",""),s.transitionImg.setAttribute("src","./assets/start.gif"),s.transitionImg.setAttribute("style","display:block; "))):(s.transition.setAttribute("style","display:none; "),s.transitionImg.setAttribute("src",""),s.transitionImg.setAttribute("style","display:none; "),g+=1),g=g<0?0:g,b=parseInt(Math.abs(g)/3600),y=parseInt(Math.abs(g)/60),E=Math.abs(g)%60,S=(b>0?(b<10?"0"+b:b)+":":"")+(y<10?"0"+y:y)+":"+(E<10?"0"+E:E),s.setState({timer:S,countDown:g})),s.state.start&&(w=s.app.state.user,s.setState({actionCountDown:6-h.action.times}),h.action.times>w.count&&(w.count=h.action.times,k=Date.parse(h.action.startPoint),_=Date.parse(h.action.startPointLastTime),w.countTimes.push(_-k),s.app.setState({user:w}),6-h.action.times===0&&(console.log("\u5b8c\u6210 \u516d \u6b21..."),s.gotoNextPage())),""!==h.action.alertLastTime&&(N=Date.parse(h.action.alertLastTime),r-N<500&&(x="",h.action.alert.forEach((function(e){x+=(x.length>0?"<br/>":"")+e})),u=!0,s.setState({isShowNotice:!0,notice:x,noticeStartHoldTime:r,noticeCurrentHold:2}))),!0===h.action.stop&&(s.setState({isHold:!1}),l=!1),""!==h.action.startPoint&&(T=Date.parse(h.action.startPoint),r-T<500&&(s.setState({stopSecPreson:0,stopSec:0}),l=!0,u=!1,s.setState({isShowNotice:!1,isHold:!0,startHoldTime:r,currentHold:s.state.holdSec}),p=r)),""!==h.action.startPointLastTime?(O=Date.parse(h.action.startPointLastTime),r-O>=3e4?(console.log("\u8d85\u904e 30\u79d2..."),s.gotoNextPage()):(s.setState({stopSecPreson:(r-O)/1e3/30}),s.setState({stopSec:Math.ceil((r-O)/1e3)}))):r-s.state.startTime>=3e4?(console.log("No action any one .....30\u79d2"),s.app.changePage(1)):(s.setState({stopSecPreson:(r-s.state.startTime)/1e3/30}),s.setState({stopSec:Math.ceil((r-s.state.startTime)/1e3)})),h.action.quit?(j=r,null!=s.state.quit_time?j=s.state.quit_time:s.setState({quit_time:r}),u=!0,"\u4e09\u79d2\u5f8c\u96e2\u958b",s.setState({isShowNotice:!0,notice:"\u4e09\u79d2\u5f8c\u96e2\u958b",noticeStartHoldTime:r,noticeCurrentHold:3}),r-j>=3e3&&s.gotoNextPage()):(s.setState({quit_time:null}),u&&"\u4e09\u79d2\u5f8c\u96e2\u958b"===s.state.notice&&(u=!1,s.setState({isShowNotice:!1})))),l&&(C=1e3*s.state.holdSec,P=(D=m+C-p)/C,s.setState({currentHold:Math.ceil(D/1e3),holdSecPreson:P,isHold:P>0})),u&&(I=1e3*s.state.noticeHoldSec,F=(d+I-r)/I,s.setState({isShowNotice:F>0,isHold:!1})),s.setState({intervalCount:s.state.intervalCount+1})):(v="",h.tip.note.forEach((function(e){v+=(v.length>0?"<br/>":"")+e})),s.setState({isShowTip:v.length>0,tip:v,holdSec:h.tip.duration}),r-s.state.beforeStartTime>=3e4?(console.log("response not ok.....30\u79d2"),s.app.changePage(1)):(s.setState({stopSecPreson:(r-s.state.beforeStartTime)/1e3/30}),s.setState({stopSec:Math.ceil((r-s.state.beforeStartTime)/1e3)}))));case 27:case"end":return e.stop()}}),e,null,[[10,16]])}))),100),this.setState({interval:a}),this.app.setState({doExercise:!0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.setState({doExercise:!1}),window.clearInterval(this.state.interval),!this.app.state.isUseWebSocket){e.next=6;break}this.app.ws.send(JSON.stringify({function:"endExercise"})),e.next=19;break;case 6:return e.prev=6,e.next=9,fetch("http://127.0.0.1:5500/endExercise",{method:"GET",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}});case 9:return t=e.sent,e.next=12,t.text();case 12:a=e.sent,console.log("endExercise:",a),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(b.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/v_bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"classBegin_backgroundImg"}),n.a.createElement("div",{className:"chanetransition",ref:function(t){e.transition=t}}),n.a.createElement("div",{className:"classBegin_ClassName"},null!=this.state&&null!=this.state.course?this.state.course.title:null),n.a.createElement("div",{className:"classBegin_Timer"},null!=this.state&&null!=this.state.timer?this.state.timer:null),n.a.createElement("div",{className:"classBegin_circleProgress",style:{display:this.state.isHold?"block":"none"},ref:function(t){e.circleprogress=t}},n.a.createElement(k.a,{value:parseInt(100*this.state.holdSecPreson),background:!0,styles:Object(k.b)({strokeLinecap:"butt",pathColor:"#17FF21",trailColor:"rgba(214, 214, 214, 0.6)",backgroundColor:"rgba(0, 0, 0, 0.7)"}),strokeWidth:5},n.a.createElement("div",{className:"classBegin_circleProgress_title"},"\u52d5\u4f5c"),n.a.createElement("div",{className:"classBegin_circleProgress_value"},this.state.currentHold),n.a.createElement("div",{className:"classBegin_circleProgress_sec"},"\u79d2"))),n.a.createElement("div",{className:"classBegin_stopCircleProgress"},n.a.createElement(k.a,{value:parseInt(100*this.state.stopSecPreson),styles:Object(k.b)({strokeLinecap:"butt",pathColor:"#17FF21",trailColor:"rgba(214, 214, 214, 0.6)"}),strokeWidth:5},n.a.createElement("div",{className:"classBegin_stopCircleProgress_value"},this.state.stopSec))),n.a.createElement("div",{className:"classBegin_counter",style:{display:this.state.start?"block":"none"}}),n.a.createElement("div",{className:"classBegin_SET_Title",style:{display:this.state.start?"block":"none"}},"\u5269\u9918\u6b21\u6578"),n.a.createElement("div",{className:"classBegin_SET_Value",style:{display:this.state.start?"block":"none"}},this.state.actionCountDown),n.a.createElement("img",{className:"classBegin_StartImg",src:"",style:{display:"none"},ref:function(t){e.transitionImg=t},alt:""}),n.a.createElement("video",{controls:!1,loop:!0,autoPlay:!0,className:"classBegin_video",ref:function(t){e.video=t}},n.a.createElement("source",{src:null!=this.state&&null!=this.state.course?"/course"+this.state.course.video:null})),n.a.createElement("div",{className:"classBegin_HoldImg",style:{display:(this.state.isHold,"none")}},n.a.createElement("div",{className:"classBegin_HoldImg_Title"},"\u52d5\u4f5c\u6642\u9593"),n.a.createElement("div",{className:"classBegin_HoldImg_value_area"},n.a.createElement("div",{className:"classBegin_HoldImg_Value"},this.state.currentHold),n.a.createElement("div",{className:"classBegin_HoldImg_Sec"},"\u79d2")),n.a.createElement("div",{className:"classBegin_HoldImg_progressBar_base"},n.a.createElement("div",{className:"classBegin_HoldImg_progressBar_value",style:{width:597*this.state.holdSecPreson}}))),n.a.createElement("div",{className:"classBegin_noticeboard",style:{display:this.state.isShowNotice?"block":"none"}},n.a.createElement("div",{className:"classBegin_noticeboard_title"},this.state.notice)),n.a.createElement("div",{className:"classBegin_actionTip",style:{display:this.state.isShowTip?"block":"none"}},n.a.createElement("div",{className:"classBegin_actionTip2"},n.a.createElement("div",{className:"classBegin_actionTip_img"}),n.a.createElement("div",{className:"classBegin_actionTip_text"},this.state.tip))),n.a.createElement("div",{className:"classBegin_QuickImage",style:{display:this.state.start?"block":"none"}}),n.a.createElement("div",{className:"classBegin_QuickTextArea",style:{display:this.state.start?"block":"none"}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u96e2\u958b"),"\u96d9\u624b\u4ea4\u53c9(\u6301\u7e8c3\u79d2)")))}}]),a}(n.a.Component),N=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;Object(u.a)(this,a),(s=t.call(this,e)).app=s.props.parent,s.resetCounter=s.resetCounter.bind(Object(d.a)(s));for(var n=s.app.state.user.timer.split(":"),c=0,i=0;i<s.app.state.user.countTimes.length;i++)c+=s.app.state.user.countTimes[i];var r=c/1e3/s.app.state.user.count,o=parseInt(r/60),l=Math.round(r%60*10)/10;return s.state={countDown:30,handleKeys:["up","down","enter"],totalTime:n,avgTime:[o>9?o:"0"+o,l>9?l:"0"+l],countAvgTime:r},s.props.parent.currentPage=Object(d.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys}),s}return Object(m.a)(a,[{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.setElementEventLintener("ClassDone"),this.button2.focus(),this.setState({countDown:30}),t=window.setInterval((function(){if(null!=s.state){var e=s.state.countDown-1;s.setState({countDown:e}),0===e&&s.app.changePage(1)}}),1e3),this.setState({interval:t}),e.next=7,fetch("http://127.0.0.1:4000/activities",{method:"POST",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({activity:{elapsed_time:this.app.state.user.elapsed_time,start_time:this.app.state.user.start_Time,end_time:this.app.state.user.end_time,course:this.app.state.user.course.title,count:this.app.state.user.count,average_time:this.state.countAvgTime}})});case 7:a=e.sent,console.log("activities",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.interval&&window.clearInterval(this.state.interval)}},{key:"mycallback",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.app.state.isUseWebSocket){e.next=4;break}this.app.ws.send(JSON.stringify({function:"uploadCourse",name:encodeURI(t)})),e.next=17;break;case 4:return e.prev=4,e.next=7,fetch("http://127.0.0.1:5500/uploadCourse?name="+t,{method:"GET",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"}});case 7:return a=e.sent,e.next=10,a.text();case 10:s=e.sent,console.log("uploadCourse:",s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(b.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/bg_2.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"classDone_Title"},"\u60a8\u5df2\u5b8c\u6210",this.app.state.user.course.title,"\u8a13\u7df4"),n.a.createElement("div",{className:"classDone_Counter_Area"},n.a.createElement("div",{className:"classDone_Counter_Title"},"\u6b21\u6578"),n.a.createElement("div",{className:"classDone_Counter_value"},this.app.state.user.count)),n.a.createElement("div",{className:"classDone_AvgTime_title"},"\u6bcf\u500b\u52d5\u4f5c\u5e73\u5747\u6642\u9593"),parseInt(this.state.avgTime[0])>0?n.a.createElement("div",{className:"classDone_AvglTime_value"},this.app.state.user.avgTime[0],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"mis"),this.app.state.user.avgTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")):n.a.createElement("div",{className:"classDone_AvglTime_value"},this.state.avgTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")),n.a.createElement("div",{className:"classDone_TotalTime_title"},"\u7e3d\u904b\u52d5\u6642\u9593"),parseInt(this.state.totalTime[0])>0?n.a.createElement("div",{className:"classDone_TotalTime_value"},this.state.totalTime[0],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"mis"),this.state.totalTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")):n.a.createElement("div",{className:"classDone_TotalTime_value"},this.state.totalTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")),n.a.createElement("div",{className:"classDone_qrcode_area"}),n.a.createElement("div",{className:"classDone_qrcode_title"},"MOVE\u5065\u8eab\u93e1\u6eff\u610f\u5ea6\u8abf\u67e5"),n.a.createElement("div",{className:"classDone_qrcode_value"}),n.a.createElement("button",{className:"classDone_okButton",tabIndex:"2",targetpage:"4",selectcallback:"mycallback",selectcallbackparam:this.app.state.user.course.title,ref:function(t){e.button1=t}},"\u518d\u505a\u4e00\u6b21"),n.a.createElement("button",{className:"classDone_endButton",tabIndex:"1",targetpage:"2",ref:function(t){e.button2=t}},"\u7d50\u675f"),n.a.createElement("div",{className:"home_image1",style:{backgroundSize:82,width:82,height:82,top:1770,left:200}}),n.a.createElement("div",{className:"home_textArea1",style:{top:1770,left:290,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u9ede\u9078"),"\u96d9\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image3",style:{backgroundSize:82,width:82,height:82,top:1770,left:440}}),n.a.createElement("div",{className:"home_textArea3",style:{top:1770,left:530,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0a\u9078\u53d6"),"\u5de6\u624b\u5f4e\u8209"),n.a.createElement("div",{className:"home_image4",style:{backgroundSize:82,width:82,height:82,top:1770,left:680}}),n.a.createElement("div",{className:"home_textArea4",style:{top:1770,left:770,fontSize:26,width:110}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u5411\u4e0b\u9078\u53d6"),"\u53f3\u624b\u5f4e\u8209")))}}]),a}(n.a.Component),x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).handleServerItemsLoad=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://127.0.0.1:5500/exercise_status",{method:"GET",mode:"cors",crossDomain:!0,headers:{Accept:"application/json","Content-Type":"application/x-www-form-encoded"}});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.statusText);case 6:return e.next=8,a.text();case 8:s=e.sent,(n=JSON.parse(s))["\u6700\u5f8c\u52d5\u4f5c"].length>0&&n["\u6700\u5f8c\u52d5\u4f5c\u6642\u9593"].length>0&&t.state.lastActionTime!==n["\u6700\u5f8c\u52d5\u4f5c\u6642\u9593"]&&(t.setState({lastActionTime:n["\u6700\u5f8c\u52d5\u4f5c\u6642\u9593"]}),t.updateState(s)),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),s.keyEvent=function(e,t,a){return g.a.Util.KeyboardEventHandler_onKeyEvent(e,t,Object(d.a)(s),a)},s.handleChange=s.changePage.bind(Object(d.a)(s)),s.state={page:1,availableKeys:[],lastActionTime:"",doExercise:!1,isUseWebSocket:!0,websocip:"127.0.0.1:5500"},s.updateState=s.updateState.bind(Object(d.a)(s)),s.useWebSocket=s.useWebSocket.bind(Object(d.a)(s)),s.changePage=s.changePage.bind(Object(d.a)(s)),s.handleServerItemsLoad=s.handleServerItemsLoad.bind(Object(d.a)(s)),s.currentPage=null,s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.state.isUseWebSocket?this.useWebSocket(this):(this.interval&&clearInterval(this.interval),this.interval=setInterval(this.handleServerItemsLoad,100,this))}},{key:"componentDidUpdate",value:function(e,t){this.state.isUseWebSocket?this.useWebSocket(this):(clearInterval(this.interval),this.interval=setInterval(this.handleServerItemsLoad,100,this))}},{key:"componentWillUnmount",value:function(){this.state.isUseWebSocket||clearInterval(this.interval)}},{key:"useWebSocket",value:function(e){var t=this;null==this.ws&&(this.ws=new WebSocket("ws://"+t.state.websocip+"/api"),this.ws.onopen=function(){console.log("onopen")},this.ws.onmessage=function(e){console.log("onmessage: "+e.data);var a=JSON.parse(e.data);if(console.log("function === exercise_status","exercise_status"===a.function),"exercise_status"===a.function){var s=a["\u6700\u5f8c\u52d5\u4f5c"];console.log("\u6700\u5f8c\u52d5\u4f5c",s);var n=window.$(":focus")[0];switch(console.log("currentFoucs",n),s){case"\u5de6\u624b\u5f4e\u8209":console.log("case \u5de6\u624b\u5f4e\u8209"),t.state.availableKeys.includes("up")&&(console.log("case \u5de6\u624b\u5f4e\u8209 in if"),t.keyEvent("up",{target:n},t.currentPage));break;case"\u53f3\u624b\u5f4e\u8209":console.log("case \u53f3\u624b\u5f4e\u8209"),t.state.availableKeys.includes("down")&&(console.log("case \u53f3\u624b\u5f4e\u8209 in if"),t.keyEvent("down",{target:n},t.currentPage));break;case"\u96d9\u624b\u4ea4\u53c9":console.log("case \u96d9\u624b\u4ea4\u53c9"),t.state.availableKeys.includes("left")&&(console.log("case \u96d9\u624b\u4ea4\u53c9 in if"),t.keyEvent("left",{target:n},t.currentPage));break;case"\u96d9\u624b\u5f4e\u8209":console.log("case \u96d9\u624b\u5f4e\u8209"),t.state.availableKeys.includes("enter")&&(console.log("case \u96d9\u624b\u5f4e\u8209 in if"),t.keyEvent("enter",{target:n},t.currentPage))}}else"getExercise"===a.function?(console.log("function === getExercise","getExercise"===a.function),"function"===typeof t.currentPage.getExerciseWebSockit&&t.currentPage.getExerciseWebSockit(a)):console.log("function Error ")},this.ws.onclose=function(){t.ws=null,t.useWebSocket(t)},this.ws.onerror=function(e){console.log("onerror"),console.log(e)})}},{key:"updateState",value:function(e){if(e&&!1===this.state.doExercise){var t=JSON.parse(e)["\u6700\u5f8c\u52d5\u4f5c"],a=window.$(":focus")[0],s=(new Date).getTime();if(null!=t&&s-window.lastTime>1e3)switch(t){case"\u5de6\u624b\u5f4e\u8209":this.state.availableKeys.includes("up")&&(window.lastTime=s,this.keyEvent("up",{target:a},this.currentPage));break;case"\u53f3\u624b\u5f4e\u8209":this.state.availableKeys.includes("down")&&(window.lastTime=s,this.keyEvent("down",{target:a},this.currentPage));break;case"\u96d9\u624b\u4ea4\u53c9":this.state.availableKeys.includes("left")&&(window.lastTime=s,this.keyEvent("left",{target:a},this.currentPage));break;case"\u96d9\u624b\u5f4e\u8209":this.state.availableKeys.includes("enter")&&(window.lastTime=s,this.keyEvent("enter",{target:a},this.currentPage))}}}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=this.state.page;return n.a.createElement("div",{className:"App",style:{maxWidth:1080,maxHeight:1920,minHeight:1920,minWidth:1080}},1===e?n.a.createElement(E,{util:this.keyEvent,parent:this}):2===e?n.a.createElement(S,{util:this.keyEvent,parent:this}):3===e?n.a.createElement(w,{util:this.keyEvent,parent:this}):4===e?n.a.createElement(_,{util:this.keyEvent,parent:this}):n.a.createElement(N,{util:this.keyEvent,parent:this}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.bb7dc8b1.chunk.js.map