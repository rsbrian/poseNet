(this["webpackJsonpmove-mirror2"]=this["webpackJsonpmove-mirror2"]||[]).push([[0],{13:function(e,t,a){e.exports=a(24)},18:function(e,t,a){},19:function(e,t,a){},2:function(e,t){var a=!0,s={sendLogScore:function(e){fetch("http://127.0.0.1:4000/activities",{method:"POST",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({activity:e})})},sendLogNoScore:function(e){console.log(e),fetch("http://127.0.0.1:4000/giveup_activities",{method:"POST",mode:"cors",crossDomain:!0,headers:{Accept:"*/*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({giveup_activity:e})})},DateTimeFormat:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t},Class2Focus:function(e){var t=window.$(e),a=parseInt(t.attr("row_index")),s=parseInt(t.attr("col_index")),n=window.$("div[row_index="+a+"][col_index="+s+"]")[0],i=(parseInt(window.$(n).css("width").replace("px",""))+parseInt(window.$(n).css("margin-right").replace("px","")))*s;window.$(n.parentNode).animate({scrollLeft:i},"normal","linear",(function(){})),e.focus()},KeyboardEventHandler_onKeyEvent:function(e,t,s,n){if(console.log("start Key Event >> ",e,a),null!=t.target){if(a){a=!1;try{var i=window.$(t.target),r=window.$("a:visible,:input:visible,div[tabindex]"),o=r.first(),c=r.last();switch(e){case"z":var l=parseInt(i.attr("row_index")),u=parseInt(i.attr("col_index"))-1,p=parseInt(i.attr("col_max"));if(console.log(e,"row:"+l,"col:"+u,"col_max"+p),u<0){a=!0;break}var d=window.$("div[row_index="+l+"][col_index="+u+"]")[0],m=(parseInt(window.$(d).css("width").replace("px",""))+parseInt(window.$(d).css("margin-right").replace("px","")))*u;window.$(d.parentNode).animate({scrollLeft:m},"normal","linear",(function(){a=!0,console.log("left jquery animate finish")})),d.focus(),n.resetCounter();break;case"c":var h=parseInt(i.attr("row_index")),g=parseInt(i.attr("col_index"))+1,v=parseInt(i.attr("col_max"));if(console.log(e,"row:"+h,"col:"+g,"col_max"+v),g===v){a=!0;break}var f=window.$("div[row_index="+h+"][col_index="+g+"]")[0],w=(parseInt(window.$(f).css("width").replace("px",""))+parseInt(window.$(f).css("margin-right").replace("px","")))*g;window.$(f.parentNode).animate({scrollLeft:w},"normal","linear",(function(){a=!0,console.log("right jquery animate finish")})),f.focus(),n.resetCounter();break;case"enter":null!=i.attr("attr")&&s.setState(JSON.parse(i.attr("attr"))),null!=i.attr("selectcallback")&&n[i.attr("selectcallback")](i.attr("selectcallbackparam")),i.addClass("blink").one("webkitAnimationEnd animationend",(function(){setTimeout((function(){i.removeClass("blink"),a=!0,i.attr("targetpage")?s.changePage(parseInt(i.attr("targetpage"))):s.changePage(s.state.page+1)}),500)}));break;case"s":if("DIV"===i[0].tagName){var y=parseInt(i.attr("row_index"))-1,_=parseInt(i.attr("row_max")),b=parseInt(i.attr("col_index"));console.log(e,"row:"+y,"col:"+b,"row_max"+_);var S=y+1;if(y<0){a=!0;break}for(var k=window.$("div[row_index="+y+"][col_index=0]");0===k.length;)(y-=1)<0&&(y=_-1),k=window.$("div[row_index="+y+"][col_index=0]");if(y>S){a=!0;break}var E=window.$("div[row_index="+y+"][row_header=true]").attr("col_current");b=E||0;var x=window.$("div[row_index="+y+"][col_index="+b+"]")[0],N=(parseInt(window.$(x).css("width").replace("px",""))+parseInt(window.$(x).css("margin-right").replace("px","")))*b;window.$(x.parentNode).animate({scrollLeft:N},"normal","linear",(function(){a=!0,console.log("up jquery animate finish")})),x.focus()}else i.is(o)?c.focus():i.prev().focus(),a=!0;n.resetCounter();break;case"x":if("DIV"===i[0].tagName){var D=parseInt(i.attr("row_index"))+1,T=parseInt(i.attr("row_max")),C=parseInt(i.attr("col_index"));console.log(e,"row:"+D,"col:"+C,"row_max"+T);var I=D-1;if(D===T){a=!0;break}for(var P=window.$("div[row_index="+D+"][col_index=0]");0===P.length;)(D+=1)===T&&(D=0),P=window.$("div[row_index="+D+"][col_index=0]");if(D<I){a=!0;break}var O=window.$("div[row_index="+D+"][row_header=true]").attr("col_current");C=O||0;var j=window.$("div[row_index="+D+"][col_index="+C+"]")[0],M=(parseInt(window.$(j).css("width").replace("px",""))+parseInt(window.$(j).css("margin-right").replace("px","")))*C;window.$(j.parentNode).animate({scrollLeft:M},"normal","linear",(function(){a=!0,console.log("down jquery animate finish")})),j.focus()}else i.is(c)?o.focus():i.next().focus(),a=!0;n.resetCounter();break;case"esc":s.state.page>1&&(a=!0,s.changePage(s.state.page-1));break;default:a=!0}}catch($){a=!0,console.error($)}}}else console.log("cancel...")}};t.Util=s},24:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(12),r=a.n(i),o=(a(18),a(5)),c=a(6),l=a(4),u=a(8),p=a(7),d=(a(19),a(2)),m=a.n(d),h=a(1),g=a.n(h),v=a(3),f=a(9),w=a.n(f),y=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"loadJSON",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./course/courses.json",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.text();case 5:s=e.sent,a.data=JSON.parse(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCoachList",value:function(){return a.data.coaches}},{key:"checkHaveEvent",value:function(e){return null!=a.data.event?a.data.event[e]:null}},{key:"getCourseSet",value:function(e){if(a.data.course_sets){var t=a.data.course_sets.filter((function(t,a){return t.id===e?t:null}));return t.length>0?t[0]:null}return null}},{key:"getCourseList2",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var s,n,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=[],n=function(e){var n=a.data.categories[e],i={id:n.id,name:n.name,en_name:n.en_name};s.push(i),i.courses=a.data.courses.filter((function(e,s){var i=e.coaches.indexOf(t)>-1&&e.course_categories.indexOf(n.id)>-1?e:null;if(i){e.muscle="";for(var r=0;r<e.muscles.length;r++)for(var o=0;o<a.data.muscles.length;o++)a.data.muscles[o].id===e.muscles[r]&&(e.muscle+=(e.muscle.length>0?"\u3001":"")+a.data.muscles[o].name)}return i}))},i=0;i<a.data.categories.length;i++)n(i);return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCourse",value:function(){var e=Object(v.a)(g.a.mark((function e(t,s,n){var i,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.data.coaches.filter((function(e,a){return e.id===t?e:null}))[0],r=a.data.categories.filter((function(e,t){return e.id===s?e:null}))[0],(o=a.data.courses.filter((function(e,a){var i=e.coaches.indexOf(t)>-1&&e.course_categories.indexOf(s)>-1&&e.id===n?e:null;if(i){var r=i.coach_videos.filter((function(e,a){return e.coach_id===t?e:null}));i.video=r[0].video,i.video_skip=r[0].video_start_point?r[0].video_start_point:0,i.second_video=r[0].side_video,i.second_video_skip=r[0].video_start_point?r[0].video_start_point:0}return i}))[0]).coach=i,o.category=r,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}()}]),a}(n.a.createElement);y.data=null;var _=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).app=s.props.parent,s.resetCounter=s.resetCounter.bind(Object(l.a)(s)),s.getGymPhysicalFitnessCenter=s.getGymPhysicalFitnessCenter.bind(Object(l.a)(s)),s.state={countDown:30,handleKeys:["enter","z","c"],coaches:[]},s.props.parent.currentPage=Object(l.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys,coachid:null,cid:null,ccid:null,defaultSets:1,actionSets:1,actionCountDown:12,defaultCountDown:12,courseSetIndex:0,courseSetExist:!1,userSet:[],courseQuit:!1,user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null},log:{start_time:m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),end_time:"",elapsed_time:"",course:"",page:"",user_id:null,age:null,gender:null,height:null,weight:null,accuniq:null}}),s.buttons={},s}return Object(c.a)(a,[{key:"setTimeout",value:function(){var e=this;if(!1===this.props.parent.state.isDeveMode){this.state.interval&&window.clearInterval(this.state.interval);var t=window.setInterval(Object(v.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e.state&&(a=e.state.countDown-1,e.setState({countDown:a}),0===a&&(e.props.parent.setState({user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null}}),window.clearInterval(e.state.interval),e.setState({interval:null})));case 1:case"end":return t.stop()}}),t)}))),1e3);this.setState({interval:t})}}},{key:"getGymPhysicalFitnessCenter",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.startsWith("https://movemirror.herokuapp.com/to")?(a=this,window.$.ajax({type:"get",async:!0,url:t+"/move/mirror",dataType:"jsonp",jsonp:"callback",jsonpCallBack:"callback",success:function(e){for(var s=(t=e.data).substring("https://qr.accuniq.com/accuniq?bcadata=".length),n=[{l:2,f:""},{l:6,f:""},{l:10,f:""},{l:20,f:""},{l:1,f:""},{l:3,f:""},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:20,f:""},{l:3,f:1},{l:12,f:""},{l:16,f:""},{l:2,f:""},{l:3,f:""},{l:13,f:""},{l:3,f:2},{l:16,f:""},{l:3,f:0},{l:17,f:""},{l:3,f:""},{l:4,f:""},{l:4,f:""},{l:1,f:""},{l:4,f:3},{l:5,f:4},{l:5,f:4},{l:5,f:4},{l:5,f:""},{l:5,f:""},{l:4,f:""},{l:5,f:4},{l:5,f:4},{l:4,f:3},{l:4,f:3},{l:4,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:3,f:""},{l:4,f:""},{l:3,f:""},{l:73,f:""}],i=[],r=0,o=0;o<n.length;o++)n[o].l?(i[o]=s.substring(r,r+n[o].l),r+=n[o].l,""!==n[o].f&&(0===n[o].f?i[o]="0."+i[o]:i[o]=i[o].substr(0,n[o].f)+"."+i[o].substr(n[o].f))):i[o]=null;a.props.parent.setState({user:{userId:i[3].replace(/\*/g,""),age:i[5],gender:"1"===i[4]?"Male":"2"===i[4]?"Female":"Other",height:i[6],weight:i[7],accuniq:t}})},error:function(e){console.log("fail",e)}})):(!1===Number.isNaN(parseInt(t))||Number.isNaN(parseInt(t))&&(t.startsWith("P")||t.startsWith("T")))&&this.props.parent.setState({user:{userId:t,age:null,gender:null,height:null,weight:null,accuniq:null}}),this.setTimeout();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.loadJSON();case 2:if(this.setState({coaches:y.getCoachList()}),this.props.parent.setState({haveCourseSet:y.checkHaveEvent(m.a.Util.DateTimeFormat(new Date,"yyyy_MM_dd"))}),window.setElementEventLintener("Home"),!((t=Object.keys(this.buttons)).length>0)){e.next=19;break}if(!this.state.coachid){e.next=18;break}a=0;case 9:if(!(a<t.length)){e.next=16;break}if(t[a]!==this.state.coachid){e.next=13;break}return this.buttons[t[a]].focus(),e.abrupt("break",16);case 13:a++,e.next=9;break;case 16:e.next=19;break;case 18:this.buttons[t[0]].focus();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){!1===this.props.parent.state.isDeveMode&&this.state.interval&&window.clearInterval(this.state.interval)}},{key:"render",value:function(){var e=this;return n.a.createElement(w.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/v_bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"home_selectCoach"},"\u8acb\u9078\u64c7\u6559\u7df4"),n.a.createElement("div",{className:"home_selectCoachAreaSize"},this.state.coaches.map((function(t,a){var s='{"coachid":"'+t.id+'"}',i="./course"+t.avatar;return n.a.createElement("div",{className:"home_coachArea",tabIndex:a,key:a,attr:s,row_index:0,col_index:a,col_max:2,targetpage:null!==e.props.parent.state.haveCourseSet?e.app.state.pageIndex.CourseSet:e.app.state.pageIndex.Class2,ref:function(a){e.buttons[t.id]=a},href:"#"},n.a.createElement("div",{className:"home_videoArea"},n.a.createElement("img",{src:i,alt:"coach",style:{height:"100%",opacity:.3}})))}))),this.props.parent.state.user.userId?n.a.createElement("div",{className:"home_auth"},"\u6b61\u8fce ",this.props.parent.state.user.userId," \u767b\u5165\u7cfb\u7d71"):n.a.createElement("div",{className:"home_auth"},"\u8acb\u5c0d\u8457\u93e1\u982d\u6383\u63cf QRCode \u4f5c\u767b\u5165\u4e4b\u8eab\u4efd\u8a8d\u8b49"),n.a.createElement("video",{className:"home_tour",loop:!0,controls:!1,muted:!0,autoPlay:!0},n.a.createElement("source",{src:"/assets/homedir.mp4"}))))}}]),a}(n.a.Component),b=a(10),S=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(l.a)(s)),s.getExerciseWebSockit=s.getExerciseWebSockit.bind(Object(l.a)(s)),s.app=s.props.parent,s.state={handleKeys:[],beforeStartTime:(new Date).getTime(),startTime:null,intervalCount:0,course:null,countDown:6,timer:"00:06",newtimer:"",start:!1,counter:0,isShowTip:!1,tip:[{name:"\u96d9\u8173\u6253\u958b\u8207\u80a9\u540c\u5bec",check:!1},{name:"\u96d9\u624b\u6293\u53d6\u555e\u5464\u6162\u6162\u5f4e\u66f2\u624b\u81c2\u5411\u4e0a\u5f4e\u8209",check:!0}],isHold:!1,holdSec:2,currentHold:0,startHoldTime:0,holdSecPreson:1,isShowNotice:!1,notice:"\u5de6\u80a9\u8180\u79fb\u52d5\u4e86\uff0c\u8acb\u56de\u5230\u9810\u5099\u52d5\u4f5c\u91cd\u65b0\u958b\u59cb!",noticeHoldSec:2,noticeCurrentHold:0,noticeStartHoldTime:0,noticeHoldSecPreson:1,isRest:!1,defaultResetSec:30,currentReset:0,ResetSecPreson:1,startResetTime:null,quit_time:null,defaultSets:s.app.state.defaultSets,actionSets:1,actionCountDown:s.app.state.actionCountDown,defaultCountDown:s.app.state.defaultCountDown,stopSecPreson:0,stopSec:0,responseBody:null,nextCourseTitle:""},s.props.parent.currentPage=Object(l.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys}),s.percentage=30,s}return Object(c.a)(a,[{key:"gotoFirstPage",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var a,s,n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.beforeExistPage(),console.log("gotoFirstPage..."),a=this.app.state.user,(s=this.props.parent.state.log).end_time=m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),s.elapsed_time=(Date.parse(s.end_time)-Date.parse(s.start_time))/1e3,s.page=t,void 0!==this.app.state.haveCourseSet?(this.app.setState({courseSetExist:!0}),this.app.changePage(this.app.state.pageIndex.CourseSet)):(s.course=a.course.title,setTimeout((function(){n.app.changePage(n.app.state.pageIndex.Home)}),500),m.a.Util.sendLogNoScore(s));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gotoNextPage",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.beforeExistPage(),console.log("gotoNextPage..."),(t=this.app.state.user).timer=this.state.timer,t.end_time=m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),t.elapsed_time=(Date.parse(t.end_time)-Date.parse(t.start_time))/1e3,(a=this.props.parent.state.log).end_time=m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),a.elapsed_time=(Date.parse(a.end_time)-Date.parse(a.start_time))/1e3,a.page="Page 3",this.app.setState({user:t,log:a}),void 0!==this.app.state.haveCourseSet?(this.app.setState({courseSetExist:t.count<this.state.defaultCountDown}),setTimeout((function(){s.app.changePage(s.app.state.pageIndex.CourseSet)}),500)):t.count>0?setTimeout((function(){s.app.changePage(s.app.state.page+1)}),500):(a.course=t.course.title,setTimeout((function(){s.app.changePage(s.app.state.pageIndex.Class2)}),500),m.a.Util.sendLogNoScore(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetCounter",value:function(){}},{key:"getExerciseWebSockit",value:function(e){this.setState({responseBody:e})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a,s,n,i=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.setElementEventLintener("ClassBegin"),t=this,e.next=4,y.getCourse(this.app.state.coachid,this.app.state.cid,this.app.state.ciid);case 4:if(a=e.sent,null==this.app.state.next_cid){e.next=10;break}return e.next=8,y.getCourse(this.app.state.coachid,this.app.state.next_cid,this.app.state.next_ciid);case 8:s=e.sent,this.setState({nextCourseTitle:s.title});case 10:!1===this.props.parent.state.isDeveMode&&this.app.ws.send(JSON.stringify({function:"uploadCourse",name:encodeURI(a.title)})),this.setState({course:a,countDown:3,timer:"00:03",start:!1}),this.app.setState({user:{course:a,count:0,countTimes:[],score:0,coach:a.coach.name,category:a.category.name,userId:this.app.state.user.userId,age:this.app.state.user.age,gender:this.app.state.user.gender,height:this.app.state.user.height,weight:this.app.state.user.weight,accuniq:this.app.state.user.accuniq}}),this.video.onplaying=function(e){(!1===t.state.start||!0===t.state.start&&!0===t.state.isRest)&&e.target.pause();var a=e.target.videoHeight,s=e.target.videoWidth;e.target.setAttribute("style","left:"+(1080-1450*s/a)/2+"px; ")},null!=this.video2&&(this.video.onended=function(e){window.$("#videoplayer")[0].currentTime=t.state.course.video_skip,window.$("#videoplayer2")[0].currentTime=t.state.course.second_video_skip,window.$("#videoplayer")[0].play(),window.$("#videoplayer2")[0].play()},this.video2.onplaying=function(e){(!1===t.state.start||!0===t.state.start&&!0===t.state.isRest)&&e.target.pause();var a=e.target.videoHeight,s=e.target.videoWidth;e.target.setAttribute("style","left:"+(1080-1450*s/a)/2+"px; ")},this.video2.onended=function(e){window.$("#videoplayer")[0].currentTime=t.state.course.video_skip,window.$("#videoplayer2")[0].currentTime=t.state.course.second_video_skip,window.$("#videoplayer")[0].play(),window.$("#videoplayer2")[0].play()}),n=window.setInterval(Object(v.a)(g.a.mark((function e(){var a,s,n,r,o,c,l,u,p,d,h,v,f,w,y,_,b,S,k,E,x,N,D,T,C,I,P,O,j,M,$,H,B,F,K,L,A,q;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=window.$.find("canvas")).length>0&&a.forEach((function(e){e.remove()})),null,!1,s=i.state.responseBody,n=null===s,r=(new Date).getTime(),n?r-i.state.beforeStartTime>=3e4?!1===i.props.parent.state.isDeveMode&&i.gotoFirstPage("Page 3 no response"):(i.setState({stopSecPreson:(r-i.state.beforeStartTime)/1e3/30}),i.setState({stopSec:Math.ceil((r-i.state.beforeStartTime)/1e3)}),!0===i.props.parent.state.isDeveMode&&Math.ceil((r-i.state.beforeStartTime)/1e3)>10&&i.video.paused&&(i.setState({start:!0}),null!=i.video2?(window.$("#videoplayer")[0].currentTime=i.state.course.video_skip,window.$("#videoplayer2")[0].currentTime=i.state.course.second_video_skip,i.video.play(),i.video2.play()):i.video.play())):(o=i.state.isHold,c=i.state.isShowNotice,l=i.state.startHoldTime,u=i.state.noticeStartHoldTime,p=(new Date).getTime(),d=i.state.isRest,(h=s).action.quit?(v=r,null!=i.state.quit_time?v=i.state.quit_time:i.setState({quit_time:r}),c=!0,"\u4e09\u79d2\u5f8c\u96e2\u958b",i.setState({isShowNotice:!0,notice:"\u4e09\u79d2\u5f8c\u96e2\u958b",noticeStartHoldTime:r,noticeCurrentHold:2,noticeHoldSec:2}),r-v>=3e3&&(i.app.setState({courseQuit:!0}),i.gotoNextPage())):(i.setState({quit_time:null}),c&&"\u4e09\u79d2\u5f8c\u96e2\u958b"===i.state.notice&&(c=!1,i.setState({isShowNotice:!1}))),h.start?(i.setState({isShowTip:!1}),null==i.state.startTime&&i.setState({startTime:r}),i.state.intervalCount%10===0&&null!=i.state&&null!=i.state.course&&(w=i.state.countDown,!1===i.state.start?(w-=1,i.setState({stopSecPreson:0,stopSec:0}),0===w&&(i.setState({start:!0}),(y=i.app.state.user).start_time=m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),i.app.setState({user:y}),i.transition.setAttribute("style","display:block; "),i.transitionImg.setAttribute("src",""),i.transitionImg.setAttribute("src","./assets/start.gif"),i.transitionImg.setAttribute("style","display:block; "))):(i.transition.setAttribute("style","display:none; "),i.transitionImg.setAttribute("src",""),i.transitionImg.setAttribute("style","display:none; "),w+=1),w=w<0?0:w,_=parseInt(Math.abs(w)/3600),b=parseInt(Math.abs(w)/60),S=Math.abs(w)%60,k=(_>0?(_<10?"0"+_:_)+":":"")+(b<10?"0"+b:b)+":"+(S<10?"0"+S:S),i.setState({timer:k,countDown:w,newtimer:S})),i.state.start&&(i.video.paused&&!1===t.state.isRest&&(null!=i.video2?(window.$("#videoplayer")[0].currentTime=i.state.course.video_skip,window.$("#videoplayer2")[0].currentTime=i.state.course.second_video_skip,i.video.play(),i.video2.play()):i.video.play()),E=i.app.state.user,x=h.action.times-(i.state.actionSets-1)*i.state.defaultCountDown,i.setState({actionCountDown:i.state.defaultCountDown-(x<0?0:x)}),h.action.times>E.count&&(E.count=h.action.times,N=Date.parse(h.action.startPoint),D=Date.parse(h.action.startPointLastTime),E.countTimes.push(D-N),E.score=h.action.score,i.app.setState({user:E}),i.state.defaultCountDown-x===0&&(console.log("\u5b8c\u6210 "+i.state.defaultCountDown+" \u6b21..., \u7b2c "+i.state.actionSets+"/"+i.state.defaultSets+" \u7d44"),void 0===i.app.state.haveCourseSet||i.app.state.courseSetLength===i.app.state.courseSetIndex&&i.state.actionSets===i.state.defaultSets?i.gotoNextPage():(T=JSON.parse(JSON.stringify(h)),C=Date.parse(T.action.startPointLastTime),C+=1e3*i.state.defaultResetSec,T.action.startPointLastTime=m.a.Util.DateTimeFormat(new Date(C),"yyyy/MM/dd hh:mm:ss"),i.setState({actionSets:i.state.actionSets+1,isRest:!0,startResetTime:p,responseBody:T,isShowNotice:!0,notice:"\u4e0b\u4e00\u500b\u52d5\u4f5c\uff1a"+(i.state.actionSets===i.state.defaultSets?i.state.nextCourseTitle:i.state.course.title),noticeStartHoldTime:r,noticeHoldSec:30}),i.app.setState({actionSets:i.app.state.actionSets+1}),c=!0,d=!0,null!=i.video2?(i.video.pause(),i.video2.pause()):i.video.pause(),!1===i.props.parent.state.isDeveMode&&i.app.ws.send(JSON.stringify({take_a_break:!0}))))),!0===h.action.stop&&(i.setState({isHold:!1}),o=!1),""!==h.action.startPoint&&!1===d&&(I=Date.parse(h.action.startPoint),r-I<500&&(i.setState({stopSecPreson:0,stopSec:0}),o=!0,c=!1,i.setState({isShowNotice:!1,isHold:!0,startHoldTime:r,currentHold:i.state.holdSec}),p=r)),!1===d&&(""!==h.action.startPointLastTime?(P=Date.parse(h.action.startPointLastTime),r-P<500&&(O="",h.action.alert.forEach((function(e){O+=(O.length>0?"<br/>":"")+e})),c=!0,i.setState({isShowNotice:!0,notice:O,noticeStartHoldTime:r,noticeCurrentHold:2,noticeHoldSec:2})),r-P>=3e4&&!1===d?(console.log("\u8d85\u904e 30\u79d2..."),i.gotoNextPage()):(i.setState({stopSecPreson:(r-P)/1e3/30}),i.setState({stopSec:Math.ceil((r-P)/1e3)}))):r-i.state.startTime>=3e4&&!1===d?(console.log("No action any one .....30\u79d2"),i.gotoFirstPage("Page 3 no action any more ")):(i.setState({stopSecPreson:(r-i.state.startTime)/1e3/30}),i.setState({stopSec:Math.ceil((r-i.state.startTime)/1e3)})))),d&&(j=1e3*i.state.defaultResetSec,M=i.state.startResetTime+j,H=($=M-p)/j,i.setState({currentReset:Math.ceil($/1e3),ResetSecPreson:H,isRest:H>0}),H>0===!1&&(!1===i.props.parent.state.isDeveMode&&i.app.ws.send(JSON.stringify({take_a_break:!1})),i.state.defaultSets===i.state.actionSets-1?i.gotoNextPage():null!=i.video2?(window.$("#videoplayer")[0].currentTime=i.state.course.video_skip,window.$("#videoplayer2")[0].currentTime=i.state.course.second_video_skip,i.video.play(),i.video2.play()):i.video.play())),o&&(B=1e3*i.state.holdSec,K=(F=l+B-p)/B,i.setState({currentHold:Math.ceil(F/1e3),holdSecPreson:K,isHold:K>0})),c&&(L=1e3*i.state.noticeHoldSec,A=(u+L-r)/L,i.setState({isShowNotice:A>0,isHold:!1})),i.setState({intervalCount:i.state.intervalCount+1})):(i.setState({isShowTip:h.tip.note.length>0,tip:h.tip.note,holdSec:h.tip.duration}),f=""!==h.action.startPointLastTime?Date.parse(h.action.startPointLastTime):i.state.beforeStartTime,r-f>=3e4&&!1===d?(console.log("response not ok.....30\u79d2"),i.gotoFirstPage("Page 3 not Start ")):(i.setState({stopSecPreson:(r-f)/1e3/30}),i.setState({stopSec:Math.ceil((r-f)/1e3)})))),null!=i.video2&&(5===(q=Math.round((r-i.state.beforeStartTime)/1e3)%10)?(window.$("#videoplayer").hide(),window.$("#videoplayer2").show()):0===q&&(window.$("#videoplayer2").hide(),window.$("#videoplayer").show()));case 9:case"end":return e.stop()}}),e)}))),100),this.setState({interval:n}),this.app.setState({doExercise:!0});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeExistPage",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.app.setState({doExercise:!1}),window.clearInterval(this.state.interval),!1===this.props.parent.state.isDeveMode&&this.app.ws.send(JSON.stringify({function:"endExercise"})),window.$(".testAnimation").css("display","block"),window.$(".testAnimation").addClass("testAnimation_animation");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(w.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/v_bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"classBegin_backgroundImg"}),n.a.createElement("div",{className:"chanetransition",ref:function(t){e.transition=t}}),n.a.createElement("div",{className:"classBegin_ClassName",style:{color:null!=this.state&&null!=this.state.course?"#d4d4d4":"#74E0FC"}},null!=this.state&&null!=this.state.course?this.state.course.title:null),n.a.createElement("div",{className:"classBegin_ClassName",style:{color:(null!=this.state&&this.state.course,"#74E0FC"),top:307,display:this.state.start?"none":"block"}},null!=this.state&&null!=this.state.course?"<\u8acb\u5c31\u9810\u5099\u59ff\u52e2>":null),n.a.createElement("div",{className:"classBegin_Timer"},null!=this.state&&null!=this.state.timer?this.state.start?this.state.timer:"":null),n.a.createElement("div",{className:"classBegin_newTimer"},null!=this.state&&null!=this.state.newtimer?this.state.start?"":this.state.newtimer:null),n.a.createElement("div",{className:"classBegin_circleProgress",style:{display:(this.state.isHold,"none")},ref:function(t){e.circleprogress=t}},n.a.createElement(b.a,{value:parseInt(100*this.state.holdSecPreson),background:!0,styles:Object(b.b)({strokeLinecap:"butt",pathColor:"#17FF21",trailColor:"rgba(214, 214, 214, 0.6)",backgroundColor:"rgba(0, 0, 0, 0.7)"}),strokeWidth:5},n.a.createElement("div",{className:"classBegin_circleProgress_title"},"\u52d5\u4f5c"),n.a.createElement("div",{className:"classBegin_circleProgress_value"},this.state.currentHold),n.a.createElement("div",{className:"classBegin_circleProgress_sec"},"\u79d2"))),n.a.createElement("div",{className:"classBegin_stopCircleProgress",style:{display:"none"}},n.a.createElement(b.a,{value:parseInt(100*this.state.stopSecPreson),styles:Object(b.b)({strokeLinecap:"butt",pathColor:"#17FF21",trailColor:"rgba(214, 214, 214, 0.6)"}),strokeWidth:5},n.a.createElement("div",{className:"classBegin_stopCircleProgress_value"},this.state.stopSec))),n.a.createElement("div",{className:"classBegin_counter",style:{display:this.state.start?"block":"none"}}),n.a.createElement("div",{className:"classBegin_SET_Title",style:{display:this.state.start?"block":"none"}},"\u5269\u9918\u6b21\u6578"),n.a.createElement("div",{className:"classBegin_SET_Value",style:{display:this.state.start?"block":"none"}},this.state.actionCountDown),n.a.createElement("img",{className:"classBegin_StartImg",src:"",style:{display:"none"},ref:function(t){e.transitionImg=t},alt:""}),null!=this.state&&null!=this.state.course&&null==this.state.course.second_video?n.a.createElement("video",{id:"videoplayer",controls:!1,loop:!0,autoPlay:!0,className:"classBegin_video",muted:"muted",ref:function(t){e.video=t}},n.a.createElement("source",{src:null!=this.state&&null!=this.state.course?"/course"+this.state.course.video:null})):n.a.createElement("video",{id:"videoplayer",controls:!1,autoPlay:!0,className:"classBegin_video",muted:"muted",ref:function(t){e.video=t}},n.a.createElement("source",{src:null!=this.state&&null!=this.state.course?"/course"+this.state.course.video:null})),null!=this.state&&null!=this.state.course&&null!=this.state.course.second_video?n.a.createElement("video",{id:"videoplayer2",controls:!1,autoPlay:!0,className:"classBegin_video2",muted:"muted",ref:function(t){e.video2=t}},n.a.createElement("source",{src:null!=this.state&&null!=this.state.course?"/course"+this.state.course.second_video:null})):null,n.a.createElement("div",{className:"classBegin_HoldImg",style:{display:this.state.isRest?"block":"none"}},n.a.createElement("div",{className:"classBegin_HoldImg_Title"},"\u4f11\u606f\u6642\u9593"),n.a.createElement("div",{className:"classBegin_HoldImg_value_area"},n.a.createElement("div",{className:"classBegin_HoldImg_Value"},this.state.currentReset),n.a.createElement("div",{className:"classBegin_HoldImg_Sec"},"\u79d2")),n.a.createElement("div",{className:"classBegin_HoldImg_progressBar_base"},n.a.createElement("div",{className:"classBegin_HoldImg_progressBar_value",style:{width:597*this.state.ResetSecPreson}}))),n.a.createElement("div",{className:"classBegin_noticeboard",style:{display:this.state.isShowNotice?"block":"none"}},n.a.createElement("div",{className:"classBegin_noticeboard_title"},this.state.notice)),n.a.createElement("div",{className:"classBegin_actionTip",style:{display:this.state.isShowTip?"block":"none"}},n.a.createElement("div",{className:"classBegin_actionTip2"},n.a.createElement("div",{className:"classBegin_actionTip_img"}),n.a.createElement("div",{className:"classBegin_actionTip_text"},n.a.createElement("div",null,this.state.tip.length>0?this.state.tip.map((function(e,t){return n.a.createElement("span",{style:{display:"block",paddingLeft:75,color:e.check?"#17FF21":"#D4D4D4",marginBottom:16},key:t},e.check?n.a.createElement("i",{className:"classBegin_checked"}):n.a.createElement("i",{className:"classBegin_unchecked"}),t+1,".",e.name)})):null)))),n.a.createElement("div",{className:"classBegin_QuickImage",style:{display:(this.state.start,"block")}}),n.a.createElement("div",{className:"classBegin_QuickTextArea",style:{display:(this.state.start,"block")}},n.a.createElement("div",{style:{color:"#17FF21"}},"\u96e2\u958b"),"\u5de6\u624b\u8209\u5230\u80f8\u524d\u518d\u5f80\u5de6\u5e73\u884c\u63ee")),n.a.createElement("div",{className:"testAnimation"}))}}]),a}(n.a.Component),k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).resetCounter=s.resetCounter.bind(Object(l.a)(s)),s.app=s.props.parent,s.state={countDown:30,handleKeys:["s","x","enter","z","c","esc"],courseList:[]},s.buttons={},s.props.parent.currentPage=Object(l.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys,log:{start_time:m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),end_time:"",elapsed_time:"",course:"",page:"",user_id:s.app.state.user.userId,age:s.app.state.user.age,gender:s.app.state.user.gender,height:s.app.state.user.height,weight:s.app.state.user.weight,accuniq:s.app.state.user.accuniq}}),s}return Object(c.a)(a,[{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.loadJSON();case 2:return e.next=4,y.getCourseList2(this.props.parent.state.coachid);case 4:t=e.sent,this.setState({courseList:t}),!1===this.props.parent.state.isDeveMode&&(a=window.setInterval(Object(v.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=s.state&&(t=s.state.countDown-1,s.setState({countDown:t}),0===t&&((a=s.props.parent.state.log).end_time=m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),a.elapsed_time=(Date.parse(a.end_time)-Date.parse(a.start_time))/1e3,a.page="Page 2",s.app.changePage(s.app.state.pageIndex.Home),m.a.Util.sendLogNoScore(a)));case 1:case"end":return e.stop()}}),e)}))),1e3),this.setState({interval:a})),setTimeout((function(){window.setElementEventLintener("Class2"),s.props.parent.state.cid&&s.props.parent.state.ciid?m.a.Util.Class2Focus(s.buttons[s.props.parent.state.cid+"_"+s.props.parent.state.ciid]):s.buttons[Object.keys(s.buttons)[0]].focus()}),500);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){!1===this.props.parent.state.isDeveMode&&this.state.interval&&window.clearInterval(this.state.interval)}},{key:"mycallback",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===this.props.parent.state.isDeveMode&&this.app.ws.send(JSON.stringify({function:"uploadCourse",name:encodeURI(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=0;return n.a.createElement(w.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/v_bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"class2_area"},this.state.courseList.map((function(a,s){var i='{"cid":"'+a.id+'"}';return n.a.createElement("div",{className:"class2_catalog_area",attr:i,key:a.id},n.a.createElement("div",{className:"class2_catalog",row_index:s,row_header:"true"},n.a.createElement("div",{className:"class2_catalog_Name1"},a.en_name.substr(0,1).toUpperCase()),n.a.createElement("div",{className:"class2_catalog_Name2"},a.en_name.toLowerCase()),n.a.createElement("div",{className:"class2_catalog_Name3"},a.name)),n.a.createElement("div",{className:"class2_course_area"},a.courses.map((function(i,r){for(var o='{"cid":"'+a.id+'","ciid":"'+i.id+'"}',c="",l=0;l<i.coach_videos.length;l++)if(i.coach_videos[l].coach_id===e.props.parent.state.coachid){c="./course"+i.coach_videos[l].video_preview;break}return n.a.createElement("div",{className:"class2_courseItem",ref:function(t){e.buttons[a.id+"_"+i.id]=t},href:"#",key:i.id,tabIndex:t++,row_index:s,row_max:e.state.courseList.length,col_index:r,col_max:a.courses.length,attr:o},n.a.createElement("img",{className:"class2_courseImage",alt:i.title,src:"./course"+i.image}),n.a.createElement("div",{className:"class2_courseName_wrapper"}),n.a.createElement("div",{className:"class2_courseName_title"},i.title),n.a.createElement("div",{className:"class2_courseWrappImage_area"},n.a.createElement("div",{className:"class2_courseWrappImage_border"}),n.a.createElement("img",{className:"class2_courseWrapperImage",src:c,alt:i.title})))})),a.courses.length>1?n.a.createElement("div",{style:{marginLeft:80}},"&amps;"):null))}))),n.a.createElement("video",{className:"class2_tour",loop:!0,controls:!1,muted:!0,autoPlay:!0},n.a.createElement("source",{src:"/assets/horizontal.mp4"}))))}}]),a}(n.a.Component),E=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e)).app=s.props.parent,!0===s.props.parent.state.isDeveMode&&(s.app.state.user={course:{title:"ddddd"},timer:"01:00",count:12,countAvgScore:99,countTimes:[5e3,4e3,2e3],score:40.1,elapsed_time:30,start_Time:10,end_time:40}),s.resetCounter=s.resetCounter.bind(Object(l.a)(s));for(var n=s.app.state.user.timer.split(":"),i=0,r=0;r<s.app.state.user.countTimes.length;r++)i+=s.app.state.user.countTimes[r];var c=i/1e3/s.app.state.user.count,u=parseInt(c/60),p=Math.round(c%60*10)/10;return s.state={countDown:30,handleKeys:["s","x","enter"],totalTime:n,avgTime:[u>9?u:"0"+u,p>9?p:"0"+p],countAvgTime:c,countAvgScore:s.app.state.user.score,startNumber:s.app.state.user.score<=20?"\u2605":s.app.state.user.score<=40?"\u2605\u2605":s.app.state.user.score<=60?"\u2605\u2605\u2605":s.app.state.user.score<=80?"\u2605\u2605\u2605\u2605":"\u2605\u2605\u2605\u2605\u2605"},s.button2=null,s.props.parent.currentPage=Object(l.a)(s),s.props.parent.setState({availableKeys:s.state.handleKeys}),s}return Object(c.a)(a,[{key:"resetCounter",value:function(){this.setState({countDown:30})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.button2&&this.button2.focus(),this.setState({countDown:30}),!1===this.props.parent.state.isDeveMode&&(t=window.setInterval((function(){if(null!=a.state){var e=a.state.countDown-1;a.setState({countDown:e}),0===e&&a.app.changePage(a.app.state.pageIndex.Home)}}),1e3),this.setState({interval:t}),m.a.Util.sendLogScore({elapsed_time:this.app.state.user.elapsed_time,start_time:this.app.state.user.start_time,end_time:this.app.state.user.end_time,course:this.app.state.user.course.title,count:this.app.state.user.count,average_time:this.state.countAvgTime,correct_rate:this.state.countAvgScore,user_id:this.app.state.user.userId,age:this.app.state.user.age,gender:this.app.state.user.gender,height:this.app.state.user.height,weight:this.app.state.user.weight,accuniq:this.app.state.user.accuniq,coach:this.app.state.user.coach,course_category:this.app.state.user.category}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){!1===this.props.parent.state.isDeveMode&&this.state.interval&&window.clearInterval(this.state.interval)}},{key:"mycallback",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===this.props.parent.state.isDeveMode&&this.app.ws.send(JSON.stringify({function:"uploadCourse",name:encodeURI(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(w.a,{handleKeys:this.state.handleKeys,onKeyEvent:function(t,a,s){return e.props.util(t,a,e,s)}},n.a.createElement("div",{style:{backgroundImage:"url(./assets/v_bg.jpg)",width:1080,height:1920}},n.a.createElement("div",{className:"classDone_Title"},"\u60a8\u5df2\u5b8c\u6210",this.app.state.user.course.title,"\u8a13\u7df4"),n.a.createElement("div",{className:"classDone_newCountArea"},n.a.createElement("div",{className:"classDone_Star"},this.state.startNumber),n.a.createElement("div",{className:"classDone_innerArea"},n.a.createElement("div",{className:"classDone_inner2Area"},n.a.createElement("div",{className:"classDone_newFons"}," \u6b21\u6578"),n.a.createElement("div",{className:"classDone_newNumberFons"},this.app.state.user.count),n.a.createElement("div",{className:"classDone_newFons2"},"/"),n.a.createElement("div",{className:"classDone_newFons"},"\u6b63\u78ba\u7387"),n.a.createElement("div",{className:"classDone_newNumberFons"},this.state.countAvgScore)))),n.a.createElement("div",{className:"classDone_AvgTime_title"},"\u6bcf\u500b\u52d5\u4f5c\u5e73\u5747\u6642\u9593"),parseInt(this.state.avgTime[0])>0?n.a.createElement("div",{className:"classDone_AvglTime_value"},this.app.state.user.avgTime[0],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"mis"),this.app.state.user.avgTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")):n.a.createElement("div",{className:"classDone_AvglTime_value"},this.state.avgTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")),n.a.createElement("div",{className:"classDone_TotalTime_title"},"\u7e3d\u904b\u52d5\u6642\u9593"),parseInt(this.state.totalTime[0])>0?n.a.createElement("div",{className:"classDone_TotalTime_value"},this.state.totalTime[0],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"mis"),this.state.totalTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")):n.a.createElement("div",{className:"classDone_TotalTime_value"},this.state.totalTime[1],n.a.createElement("div",{style:{fontSize:32,display:"inline"}},"sec")),n.a.createElement("div",{className:"classDone_qrcode_area"}),n.a.createElement("div",{className:"classDone_qrcode_title"},"MOVE\u5065\u8eab\u93e1\u6eff\u610f\u5ea6\u8abf\u67e5"),n.a.createElement("div",{className:"classDone_qrcode_value"}),void 0===this.app.state.haveCourseSet?n.a.createElement("button",{className:"classDone_okButton",tabIndex:"2",targetpage:void 0===this.app.state.haveCourseSet?this.app.state.pageIndex.ClassBegin:this.app.state.pageIndex.Home,selectcallback:"mycallback",selectcallbackparam:this.app.state.user.course.title,ref:function(t){e.button1=t}},"\u518d\u505a\u4e00\u6b21"):null,n.a.createElement("button",{className:"classDone_endButton",tabIndex:"1",targetpage:void 0===this.app.state.haveCourseSet?this.app.state.pageIndex.Class2:this.app.state.pageIndex.Home,ref:function(t){e.button2=t}},"\u7d50\u675f"),n.a.createElement("video",{className:"class2_tour",loop:!0,controls:!1,muted:!0,autoPlay:!0},n.a.createElement("source",{src:"/assets/horizontal.mp4"}))))}}]),a}(n.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).app=s.props.parent,s}return Object(c.a)(a,[{key:"resetCounter",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a,s,n,i,r,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.app.state.haveCourseSet){e.next=21;break}return e.next=3,y.getCourseSet(this.app.state.haveCourseSet[0].course_set_id);case 3:if(t=e.sent,this.app.setState({courseSetLength:t.courses.length}),void 0===this.app.state.log&&this.app.setState({log:{start_time:m.a.Util.DateTimeFormat(new Date,"yyyy/MM/dd hh:mm:ss"),end_time:"",elapsed_time:"",course:t.name,page:"",user_id:this.app.state.user.userId,age:this.app.state.user.age,gender:this.app.state.user.gender,height:this.app.state.user.height,weight:this.app.state.user.weight,accuniq:this.app.state.user.accuniq}}),a=this.app.state.courseSetIndex,s=this.app.state.user,n=this.app.state.userSet||[],!(a>=1)){e.next=18;break}if(1!==a||0!==s.count){e.next=16;break}return(i=this.app.state.log).course=t.name,m.a.Util.sendLogNoScore(i),this.app.changePage(this.app.state.pageIndex.Home),e.abrupt("return");case 16:n.push(JSON.parse(JSON.stringify(s))),this.app.setState({userSet:n});case 18:if(!1===this.app.state.courseSetExist&&t.courses.length>a&&!1===this.app.state.courseQuit)this.app.setState({courseSetIndex:a+1,cid:t.courses[a].category_id,ciid:t.courses[a].course_id,next_cid:t.courses.length>a+1?t.courses[a+1].category_id:null,next_ciid:t.courses.length>a+1?t.courses[a+1].course_id:null,defaultSets:t.courses[a].sets,actionCountDown:t.courses[a].reps,defaultCountDown:t.courses[a].reps}),this.app.changePage(this.app.state.pageIndex.ClassBegin);else{for(s.course={title:t.name},s.start_time=n[0].start_time,s.end_time=n[n.length-1].end_time,s.elapsed_time=(Date.parse(s.end_time)-Date.parse(s.start_time))/1e3,s.count=0,s.countTimes=[],s.score=0,r=[0,0],o=0;o<n.length;o++)s.count=s.count+n[o].count,s.score=s.score+n[o].score,s.countTimes=s.countTimes.concat(n[o].countTimes),c=n[o].timer.split(":"),r[0]=r[0]+parseInt(c[0]),r[1]=r[1]+parseInt(c[1]);s.score=Math.round(s.score/n.length*10)/10,r[0]=r[0]+parseInt(r[1]/60),r[1]=Math.round(r[1]%60*10)/10,s.timer=r[0]+":"+r[1],this.app.changePage(this.app.state.pageIndex.ClassDone)}e.next=22;break;case 21:this.app.changePage(this.app.state.pageIndex.Class2);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",null)}}]),a}(n.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).keyEvent=function(e,t,a){return m.a.Util.KeyboardEventHandler_onKeyEvent(e,t,Object(l.a)(s),a)},s.state={page:1,availableKeys:[],lastActionTime:"",isDeveMode:!1,doExercise:!1,websocketip:"127.0.0.1:5500",pageIndex:{Home:1,Class2:2,ClassBegin:3,ClassDone:4,CourseSet:5},user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null}},s.useWebSocket=s.useWebSocket.bind(Object(l.a)(s)),s.changePage=s.changePage.bind(Object(l.a)(s)),s.currentPage=null,s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){!1===this.state.isDeveMode&&this.useWebSocket(this)}},{key:"componentDidUpdate",value:function(e,t){!1===this.state.isDeveMode&&this.useWebSocket(this)}},{key:"componentWillUnmount",value:function(){}},{key:"useWebSocket",value:function(e){var t=this;null==this.ws&&(this.ws=new WebSocket("ws://"+t.state.websocketip+"/api"),this.ws.onopen=function(){console.log("onopen")},this.ws.onmessage=function(a){var s=JSON.parse(a.data);if("exercise_status"===s.function&&!1===e.state.doExercise){var n=s["\u6700\u5f8c\u52d5\u4f5c"],i=window.$(":focus")[0];if(null===i)return;switch(n){case"\u5411\u4e0a\u9078\u53d6":console.log("case \u5411\u4e0a\u9078\u53d6"),t.state.availableKeys.includes("s")&&(console.log("case \u5411\u4e0a\u9078\u53d6 in if"),t.keyEvent("s",{target:i},t.currentPage));break;case"\u5411\u4e0b\u9078\u53d6":console.log("case \u5411\u4e0b\u9078\u53d6"),t.state.availableKeys.includes("x")&&(console.log("case \u5411\u4e0b\u9078\u53d6 in if"),t.keyEvent("x",{target:i},t.currentPage));break;case"\u53d6\u6d88":console.log("case \u53d6\u6d88"),t.state.availableKeys.includes("esc")&&(console.log("case \u53d6\u6d88 in if"),t.keyEvent("esc",{target:i},t.currentPage));break;case"\u5411\u53f3\u9078\u53d6":console.log("case \u5411\u53f3\u9078\u53d6"),t.state.availableKeys.includes("z")&&(console.log("case \u5411\u53f3\u9078\u53d6 in if"),t.keyEvent("z",{target:i},t.currentPage));break;case"\u5411\u5de6\u9078\u53d6":console.log("case \u5411\u5de6\u9078\u53d6"),t.state.availableKeys.includes("c")&&(console.log("case \u5411\u5de6\u9078\u53d6 in if"),t.keyEvent("c",{target:i},t.currentPage));break;case"\u96d9\u624b\u5f4e\u8209":console.log("case \u96d9\u624b\u5f4e\u8209 and \u9ede\u9078"),console.log("case \u9ede\u9078"),t.state.availableKeys.includes("enter")&&(console.log("case \u9ede\u9078 in if"),t.keyEvent("enter",{target:i},t.currentPage));break;case"\u9ede\u9078":console.log("case \u9ede\u9078"),t.state.availableKeys.includes("enter")&&(console.log("case \u9ede\u9078 in if"),t.keyEvent("enter",{target:i},t.currentPage))}}else"getExercise"===s.function?"function"===typeof t.currentPage.getExerciseWebSockit&&t.currentPage.getExerciseWebSockit(s):"qrcode"===s.function&&"function"===typeof t.currentPage.getGymPhysicalFitnessCenter&&t.currentPage.getGymPhysicalFitnessCenter(s.content)},this.ws.onclose=function(){t.ws=null,t.useWebSocket(t)},this.ws.onerror=function(e){console.error(e)})}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=this.state.page;return n.a.createElement("div",{className:"App",style:{maxWidth:1080,maxHeight:1920,minHeight:1920,minWidth:1080}},e===this.state.pageIndex.Home?n.a.createElement(_,{util:this.keyEvent,parent:this}):e===this.state.pageIndex.Class2?n.a.createElement(k,{util:this.keyEvent,parent:this}):e===this.state.pageIndex.ClassBegin?n.a.createElement(S,{util:this.keyEvent,parent:this}):e===this.state.pageIndex.ClassDone?n.a.createElement(E,{util:this.keyEvent,parent:this}):n.a.createElement(x,{util:this.keyEvent,parent:this}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.9ba222f5.chunk.js.map