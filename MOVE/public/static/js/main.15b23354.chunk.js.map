{"version":3,"sources":["services/DataService.js","pages/Home.js","pages/ClassBegin.js","pages/Class2.js","pages/ClassDone.js","App.js","serviceWorker.js","index.js","pages/util.js"],"names":["DataService","fetch","method","headers","Accept","response","text","body","data","JSON","parse","coaches","coachid","cid","courses","filter","item","index","result","indexOf","course_categories","muscle","i","muscles","length","j","id","name","res","console","log","categories","category_item","en_name","push","ciid","videos","coach_videos","video","coach_id","React","createElement","Home","props","resetCounter","bind","state","handleKeys","parent","currentPage","setState","ccid","buttons","loadJSON","this","getCoachList","window","setElementEventLintener","keys","Object","focus","onKeyEvent","key","e","page","util","style","backgroundImage","width","height","className","map","attr","avatar_url","avatar","tabIndex","row_index","col_index","col_max","ref","input","href","src","alt","color","Component","ClassBegin","getExerciseWebSockit","app","Date","getTime","percentage","beforeExistPage","user","tools","Util","DateTimeFormat","end_time","start_Time","course","title","changePage","sendLogNoScore","timer","count","value","self","getCourse","onplaying","event","start","target","pause","videoHeight","videoWidth","setAttribute","interval","setInterval","a","canvaies","$","find","forEach","remove","responseBody","responseState","isUseWebSocket","mode","crossDomain","ok","nowTime","beforeStartTime","isDeveMode","gotoFirstPage","Math","ceil","paused","play","doHold","isHold","doNoticeHold","isShowNotice","startHoldTime","noticeStartHoldTime","currentHoldTime","startTime","intervalCount","newCountDown","countDown","transition","transitionImg","h","parseInt","abs","m","s","action","times","beginTime","startPoint","endTime","startPointLastTime","score","gotoNextPage","alertLastTime","lastTime","alertMessage","alert","val","stop","holdSec","quit","quit_time","notice","_holdSec","step3","step2","noticeHoldSec","tip","note","duration","clearInterval","ws","send","stringify","newtimer","display","circleprogress","holdSecPreson","background","styles","buildStyles","strokeLinecap","pathColor","trailColor","backgroundColor","strokeWidth","currentHold","stopSecPreson","stopSec","actionCountDown","controls","loop","autoPlay","isShowTip","Catalog","tooltip1","tooltip2","setTimeout","getCourseList2","tooltip_interval","is","fadeOut","fadeIn","encodeURI","courseSeqIndex","courseList","row_header","substr","toUpperCase","toLowerCase","courseItem","courseIndex","gifSrc","video_preview","row_max","selectcallback","selectcallbackparam","image","marginLeft","top","backgroundSize","left","fontSize","ClassDone","split","actionCountTime","countTimes","avgtime","min","sec","round","button2","sendLogScore","elapsed_time","countAvgTime","countAvgScore","avgTime","totalTime","targetpage","button1","App","handleServerItemsLoad","_app","Error","statusText","lastActionTime","updateState","keyEvent","KeyboardEventHandler_onKeyEvent","handleChange","availableKeys","doExercise","websocip","useWebSocket","prevProps","prevState","WebSocket","onopen","onmessage","json","currentFoucs","includes","onclose","onerror","currentTime","currentPageIndex","maxWidth","maxHeight","minHeight","minWidth","Class2","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","canDoEvent","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","floor","getMilliseconds","k","test","replace","RegExp","$1","getFullYear","react","jqTarget","jqVisibleInputs","jqFirst","first","jqLast","last","l_row","l_col","l_col_max","l_child","l_toLeft","css","parentNode","animate","scrollLeft","r_row","r_col","r_child","r_toLeft","tagName","u_row","u_row_max","u_col","u_next","u_col_current","u_child","u_space","prev","d_row","d_row_max","d_col","d_next","d_col_current","d_child","d_space","next","exports"],"mappings":"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","file":"static/js/main.15b23354.chunk.js","sourcesContent":["import React from 'react';\n\nclass DataService extends React.createElement {\n\n    static data = null\n\n    static async loadJSON(){\n        var response = await fetch('./course/courses.json', {\n            method: 'GET',\n            headers:{\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        });\n        var body = await response.text();\n        DataService.data = JSON.parse( body );\n    }\n\n    static getCoachList(){\n        return DataService.data.coaches;\n    }\n\n    static async getCourseList(coachid,cid){\n\n        return DataService.data.courses.filter((item, index) =>{\n            let result = item.coaches.indexOf(coachid) > -1 && item.course_categories.indexOf(cid) > -1 ? item : null\n            if (result){\n                item.muscle = ''\n                    for( var i=0;i<item.muscles.length;i++){\n                        for (var j=0;j<DataService.data.muscles.length;j++){\n                            if ( DataService.data.muscles[j].id === item.muscles[i]){\n                                item.muscle += (item.muscle.length > 0 ? '、':'')  + DataService.data.muscles[j].name\n                            }\n                        }\n                    }\n            }\n            return result;\n        })\n\n        /*console.log(coachid, cid)\n        return DataService.data.courses.filter((item, index) =>{\n            let videoResult = item.coach_videos.filter((vitem,vindex)=>{\n                return vitem.coach === coachid ? vitem : null\n            });\n\n            //console.log(\"videoResult\",videoResult)\n            if ( videoResult.length > 0){\n                let result = (item.course_categories.indexOf(cid) > -1 ) ? item : null\n                if (result != null){\n                    item.muscle = ''\n                    for( var i=0;i<item.muscles.length;i++){\n                        for (var j=0;j<DataService.data.muscles.length;j++){\n                            if ( DataService.data.muscles[j].id === item.muscles[i]){\n                                item.muscle += (item.muscle.length > 0 ? '、':'')  + DataService.data.muscles[j].name\n                            }\n                        }\n                    }\n                }\n                return result\n            } else {\n                return null\n            }\n        });*/\n    }\n\n\n    static async getCourseList2(coachid){\n\n        let res = []\n        console.log( \"coachid\", coachid)\n        console.log( \"DataService.data.categories.length\", DataService.data.categories.length )\n        for(let i =0;i<DataService.data.categories.length;i++){\n\n        //}.forEach((category_item, index) =>{\n            let category_item = DataService.data.categories[i];\n            let result = {id:category_item.id, name:category_item.name, en_name:category_item.en_name}\n            res.push(result);\n\n            result.courses = DataService.data.courses.filter((item, index) =>{\n                let result = item.coaches.indexOf(coachid) > -1 && item.course_categories.indexOf(category_item.id) > -1 ? item : null\n                if (result){\n                    item.muscle = ''\n                        for( var i=0;i<item.muscles.length;i++){\n                            for (var j=0;j<DataService.data.muscles.length;j++){\n                                if ( DataService.data.muscles[j].id === item.muscles[i]){\n                                    item.muscle += (item.muscle.length > 0 ? '、':'')  + DataService.data.muscles[j].name\n                                }\n                            }\n                        }\n                }\n                return result;\n            })\n        }\n        console.log( \"getCourseList2\", res )\n        return res;\n    }\n\n    static async getCourse(coachid, cid, ciid){\n        return DataService.data.courses.filter((item, index) =>{\n            let result =  item.coaches.indexOf(coachid) > -1 && item.course_categories.indexOf(cid) > -1 && item.id === ciid ? item : null\n\n            if (result ){\n                let videos = result.coach_videos.filter((video,index)=>{\n                    return video.coach_id === coachid ? video : null\n                });\n\n                result.video = videos[0].video\n\n            }\n\n            return result;\n        })[0]\n\n        /*let result = DataService.data.courses.filter((item, index) =>{\n            return ( item.course_categories.indexOf(cid) > -1 && item.id === ciid) ? item : null\n        });\n\n        if (result.length>0){\n            result[0] = JSON.parse( JSON.stringify(result[0]) )\n            let videoResult = result[0].coach_videos.filter((vitem,vindex)=>{\n                return vitem.coach === coachid ? vitem : null\n            });\n            result[0].video = videoResult[0].video\n        }\n\n        return result[0]*/\n    }\n\n    static async sendScore(){\n\n    }\n}\n\nexport { DataService };","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport {DataService} from '../services/DataService';\n//import process from 'process';\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        this.resetCounter = this.resetCounter.bind(this)\n\n        this.state = { handleKeys : ['enter','z','c'/*'left','right',*/], coaches:[] }\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys, coachid:null, cid:null, ccid:null})\n\n        this.buttons={}\n    }\n\n    resetCounter(){\n        //this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        await DataService.loadJSON()\n        this.setState({coaches: DataService.getCoachList()})\n        //console.log( DataService.getCoachList() )\n        window.setElementEventLintener(\"Home\")\n        //this.button.focus();\n        var keys = Object.keys(this.buttons);\n            if (keys.length > 0)\n                this.buttons[keys[0]].focus();\n    }\n\n    componentWillUnmount(){\n    }\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n                    {/*\n                    <div className=\"home_pageTitle\">\n                        智慧健身鏡\n                    </div>\n                    <div className=\"home_pageTitle2\">\n                        和你一起做運動\n                    </div>\n                    */}\n                    <div className=\"home_selectCoach\">\n                        請選擇教練\n                    </div>\n\n                    <div className=\"home_selectCoachAreaSize\" >\n                        {\n                            this.state.coaches.map((item,index) => {\n                                var attr = '{\"coachid\":\"'+item.id+'\"}'\n                                //let avatar_url = \"url(./course\"+item.avatar+\")\"\n                                let avatar_url = \"./course\"+item.avatar\n                                return <div className=\"home_coachArea\"\n                                            tabIndex={index}\n                                            key={index}\n                                            attr={attr}\n                                            row_index={0}\n                                            col_index={index}\n                                            col_max={2}\n                                            ref={(input) => { this.buttons[item.id] = input }} href=\"#\"\n                                        >\n\n                                            <div className=\"home_videoArea\" >\n                                                <img src={avatar_url} alt=\"coach\" style={{height:1000}} ></img>\n                                            </div>\n                                            {/*\n                                            <div className=\"home_videoArea\" style={{backgroundImage: avatar_url,\n                                                backgroundPosition:\"center\",\n                                                //backgroundRepeat:\"noRepeat\",\n                                                backgroundRepeat:\"no-repeat\",\n                                                backgroundSize:\"auto 1000px\"}} > </div> */}\n                                            {/*<video className=\"home_videoArea\" autoPlay={true} loop={true}>\n                                                <source src={\"./course\"+item.avatar_video} type=\"video/mp4\" />\n                                            </video>\n                                            <div className=\"home_coach_title\">{item.name}</div>\n                                            */}\n                                    </div>\n                            })\n                        }\n                    </div>\n\n\n\n                    <div className=\"home_image1\"></div>\n                    <div className=\"home_textArea1\"><div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉</div>\n\n                    <div className=\"home_image2\"></div>\n                    <div className=\"home_textArea2\"><div style={{color:\"#17FF21\"}}>前一頁</div>雙手交叉</div>\n\n                    <div className=\"home_image3\"></div>\n                    <div className=\"home_textArea3\"><div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉</div>\n\n                    <div className=\"home_image4\"></div>\n                    <div className=\"home_textArea4\"><div style={{color:\"#17FF21\"}}>向下選取</div>右手彎舉</div>\n\n                    <div className=\"home_image5\"></div>\n                    <div className=\"home_textArea5\"><div style={{color:\"#17FF21\"}}>向左選取</div>單手左滑</div>\n\n                    <div className=\"home_image6\"></div>\n                    <div className=\"home_textArea6\"><div style={{color:\"#17FF21\"}}>向右選取</div>單手右滑</div>\n                </div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default Home;\n\n/*\n<button className=\"home_pageButton\" tabIndex={1}\n                        ref={(input) => { this.button = input; }}\n                    >開始運動</button>\n\n<div className=\"home_pageTitle2\" style={{top: 1500,width:500,left:291}}>\n                    點選：雙手彎舉<br/>\n                    前一頁：左手側平舉<br/>\n                    向上選取：左手彎舉<br/>\n                    向下選取：右手彎舉\n                    </div>\n*/","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\n//import {Fire,Heart,Heart2} from '../icon/index'\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\n//import 'react-circular-progressbar/dist/styles.css';\nimport tools from './util.js'\n\nimport {DataService} from '../services/DataService';\n\nclass ClassBegin extends React.Component {\n    constructor(props) {\n        super(props);\n        this.resetCounter = this.resetCounter.bind(this)\n        this.getExerciseWebSockit = this.getExerciseWebSockit.bind(this)\n\n        this.app = this.props.parent;\n        //console.log( this.app.state.isUseWebSocket )\n        this.state = { 'handleKeys' : ['enter','left'],\n                        'beforeStartTime' : new Date().getTime(),\n                        'startTime': null,\n                        'intervalCount' : 0,\n                        'course':null,\"countDown\":6,\"timer\":\"00:06\",\"newtimer\":\"\",\"start\":false,\"counter\":0,\n                        \"isShowTip\":false,'tip':'雙腳打開與肩同寬，雙手抓取啞呤慢慢彎曲手臂向上彎舉。',\n                        \"isHold\":false,\"holdSec\":2,\"currentHold\":0,\"startHoldTime\":0,\"holdSecPreson\":1,\n                        \"isShowNotice\":false, 'notice':'左肩膀移動了，請回到預備動作重新開始!',\n                        \"noticeHoldSec\":2,\"noticeCurrentHold\":0,\"noticeStartHoldTime\":0,\"noticeHoldSecPreson\":1,\n                        \"quit_time\" : null,\n                        \"actionCountDown\": 6,\n                        \"stopSecPreson\" : 0 ,\"stopSec\":0,\n                        \"responseBody\": null}\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys})\n\n        this.percentage = 30\n    }\n\n    async gotoFirstPage(page){\n        this.beforeExistPage();\n\n        let user = this.app.state.user;\n        let log = this.props.parent.state.log;\n        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n        log['page'] = page;\n        log['course'] = user.course.title\n\n        this.app.changePage( 1 )\n        tools.Util.sendLogNoScore(log);\n    }\n\n    async gotoNextPage(){\n        this.beforeExistPage();\n\n        let user = this.app.state.user;\n        user['timer'] = this.state.timer;\n        //user['count'] = 6;\n        user['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\") //this.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n        user['elapsed_time'] = ( Date.parse(user.end_time) - Date.parse(user.start_Time) ) / 1000\n        user['correct_rate'] = 99\n        this.app.setState({\"user\":user})\n\n        if (user.count > 0)\n            this.app.changePage( this.app.state.page+1 )\n        else {\n            let log = this.props.parent.state.log;\n            log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n            log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n            log['page'] = 'Page 3';\n            log['course'] = user.course.title\n\n            //this.app.changePage( 3 )\n            this.app.changePage( 2 )\n            tools.Util.sendLogNoScore(log);\n        }\n    }\n\n    resetCounter(){\n    }\n\n    /*DateTimeFormat(date,fmt) { //author: meizz\n        var o = {\n            \"M+\": date.getMonth() + 1, //月份\n            \"d+\": date.getDate(), //日\n            \"h+\": date.getHours(), //小时\n            \"m+\": date.getMinutes(), //分\n            \"s+\": date.getSeconds(), //秒\n            \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\n            \"S\": date.getMilliseconds() //毫秒\n        };\n        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n        for (var k in o)\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n        return fmt;\n    }*/\n\n    getExerciseWebSockit(value){\n        this.setState({\"responseBody\":value})\n    }\n\n    async componentDidMount() {\n        window.setElementEventLintener(\"ClassBegin\")\n        let self = this;\n        var course = await DataService.getCourse(this.app.state.coachid,this.app.state.cid,this.app.state.ciid);\n        this.setState({\"course\": course ,\n                       \"countDown\":3,\"timer\":\"00:03\",\"start\":false})\n\n        this.app.setState({\"user\":{\n            \"course\" : course,\n            'count' : 0,\n            'countTimes' : [],\n            'score' : 0\n        }})\n\n\n        this.video.onplaying = function(event) {\n            if (self.state.start === false )\n                event.target.pause();\n            let videoHeight = event.target.videoHeight;\n            let videoWidth = event.target.videoWidth;\n            event.target.setAttribute(\"style\",'left:'+  (( 1080 - (1450*videoWidth/videoHeight) ) / 2) +'px; ')\n        };\n\n        var interval = window.setInterval(async()=>{\n            let canvaies = window.$.find('canvas');\n            if (canvaies.length>0){\n                canvaies.forEach(function(value){\n                        value.remove();\n                });\n            }\n\n            let responseBody = null\n            let responseState = false;\n            if (this.app.state.isUseWebSocket){\n                responseBody = this.state.responseBody\n                responseState = responseBody === null;\n            } else {\n                let response = null;\n                try{\n                    response = await fetch('http://127.0.0.1:5500/getExercise', {\n                        method: 'GET',\n                        mode: 'cors',\n                        //credentials: 'include',\n                        crossDomain:true,\n                        headers:{\n                            Accept: '*/*',\n                            'Content-Type': 'application/json;charset=UTF-8'\n                        },\n                    });\n                }catch(error){\n                    //console.log(error)\n                }\n                responseState = response === null || !response.ok;\n                if  (!responseState){\n                    var body = await response.text();\n                    responseBody = JSON.parse( body );\n                }\n\n            }\n\n            let nowTime = new Date().getTime()\n\n            //if (false){\n            //if (response === null ||  !response.ok) {\n            //console.log(\"interval responseState\",responseState)\n            if (responseState){\n                /*let doHold = this.state.isHold;\n                let doNoticeHold = this.state.isShowNotice;\n                let startHoldTime = this.state.startHoldTime;\n                let noticeStartHoldTime = this.state.noticeStartHoldTime;\n                let currentHoldTime = new Date().getTime();\n\n                //console.log( (nowTime - this.state.beforeStartTime) )\n                if (((nowTime - this.state.beforeStartTime) >= 5 * 1000) && ((nowTime - this.state.beforeStartTime) < 5.5 * 1000)) {\n                    doHold = true;\n                    this.setState({\"isShowNotice\": false,\n                            \"isHold\":true,\"startHoldTime\":nowTime,\"currentHold\":2})\n                }\n\n                if (((nowTime - this.state.beforeStartTime) >= 6 * 1000) && ((nowTime - this.state.beforeStartTime) < 6.5 * 1000)) {\n                    doNoticeHold = true;\n                    this.setState({\"isShowNotice\": true, //\"notice\": this.state.n,\n                    \"noticeStartHoldTime\":nowTime,\"noticeCurrentHold\":2})\n                }\n\n                if (doHold){\n                    let _holdSec = 2*1000\n                    let step1 = startHoldTime + _holdSec;\n                    let step2 = step1 - currentHoldTime;\n                    let step3 = step2 / _holdSec\n                    this.setState({\"currentHold\" : Math.ceil( step2/ 1000), \"holdSecPreson\": step3,\"isHold\":step3 > 0})\n                }\n\n                if (doNoticeHold){\n                    let _holdSec = this.state.noticeHoldSec*1000\n                    let step1 = noticeStartHoldTime + _holdSec;\n                    let step2 = step1 - nowTime;\n                    let step3 = step2 / _holdSec\n                    this.setState({\"isShowNotice\":step3 > 0})\n                }*/\n\n                if ((nowTime - this.state.beforeStartTime) >= 30 * 1000) {\n                    //console.log( \"response not ok.....30秒\")\n                    if (this.props.parent.state.isDeveMode === false){\n                        this.gotoFirstPage('Page 3 no response');\n                    }\n                } else {\n                    this.setState({\"stopSecPreson\": (nowTime - this.state.beforeStartTime)/1000/30 })\n                    this.setState({\"stopSec\": Math.ceil( (nowTime - this.state.beforeStartTime)/ 1000) })\n\n                    //console.log( tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\") )\n                    if (Math.ceil( (nowTime - this.state.beforeStartTime)/ 1000) > 10 && this.video.paused){\n                        //window.$('#videoplayer').trigger('play');//.get(0).play()\n                        this.setState({start:true})\n                        this.video.play();\n                    }\n                }\n\n            } else {\n                let doHold = this.state.isHold;\n                let doNoticeHold = this.state.isShowNotice;\n\n                let startHoldTime = this.state.startHoldTime;\n                let noticeStartHoldTime = this.state.noticeStartHoldTime;\n                let currentHoldTime = new Date().getTime();\n\n\n                var value = responseBody\n\n                //console.log(\"interval doHold, doNoticeHold, startHoldTime, noticeStartHoldTime, currentHoldTime, value >> \",doHold, doNoticeHold, startHoldTime, noticeStartHoldTime, currentHoldTime, value)\n\n                //console.log(\"interval value.start\",value.start);\n                if ( !value.start ){ // 姿勢設定\n                    let tip = '';\n                    value.tip.note.forEach(function(val){\n                        tip += (tip.length > 0 ? '<br/>' : '') + val\n                    });\n\n                    this.setState({\"isShowTip\": (tip.length > 0),\n                                \"tip\" : tip,\n                                \"holdSec\": value.tip.duration})\n\n                    if ((nowTime - this.state.beforeStartTime) >= 30 * 1000) {\n                        console.log( \"response not ok.....30秒\")\n                        /*let user = this.app.state.user;\n                        let log = this.props.parent.state.log;\n                        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n                        log['page'] = 'Page 3 not Start ';\n                        log['course'] = user.course.title\n\n                        this.app.changePage( 1 )\n                        tools.Util.sendLogNoScore(log);*/\n                        this.gotoFirstPage('Page 3 not Start ')\n\n                    } else {\n                        this.setState({\"stopSecPreson\": (nowTime - this.state.beforeStartTime)/1000/30 })\n                        this.setState({\"stopSec\": Math.ceil( (nowTime - this.state.beforeStartTime)/ 1000) })\n                    }\n\n                } else { //開始倒數\n                    this.setState({\"isShowTip\": false})\n                    if (this.state.startTime == null)\n                        this.setState({\"startTime\":nowTime})\n\n                    if (this.state.intervalCount % 10 === 0){\n                        if ( this.state != null && this.state.course != null ){\n                            var newCountDown = this.state.countDown\n\n                            if (this.state.start === false){\n                                newCountDown = newCountDown-1\n                                this.setState({\"stopSecPreson\":0, \"stopSec\": 0});\n\n                                if (newCountDown === 0){\n                                    this.setState({ \"start\":true})\n\n                                    let user = this.app.state.user;\n                                    user['start_Time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")//this.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                                    this.app.setState({\"user\":user})\n                                    this.transition.setAttribute(\"style\",'display:block; ')\n                                    this.transitionImg.setAttribute(\"src\",'')\n                                    this.transitionImg.setAttribute(\"src\",\"./assets/start.gif\")\n                                    this.transitionImg.setAttribute(\"style\",'display:block; ')\n                                }\n                            }else{\n                                this.transition.setAttribute(\"style\",'display:none; ')\n                                this.transitionImg.setAttribute(\"src\",'')\n                                this.transitionImg.setAttribute(\"style\",'display:none; ')\n                                newCountDown = newCountDown+1\n                            }\n                            newCountDown = newCountDown < 0 ? 0  : newCountDown\n\n                            var h = parseInt( Math.abs(newCountDown) / 3600 )\n                            var m = parseInt( Math.abs(newCountDown) / 60 )\n                            var s = Math.abs(newCountDown) % 60\n                            var timer = (h > 0 ? (h<10 ? \"0\"+h : h )+\":\"  :'')+(m<10 ? \"0\"+m : m ) +\":\"+( s< 10 ?\"0\"+s : s)\n                            this.setState({ \"timer\": timer, \"countDown\": newCountDown, \"newtimer\":s})\n\n                            /*if (doHold){\n                                this.setState({\"currentHold\":this.state.currentHold-1})\n                            }*/\n                        }\n                    }\n\n                    if (this.state.start){\n                        console.log(\"this.video.paused\",this.video.paused )\n                        if (this.video.paused){\n                            this.video.play();\n                        }\n\n                        let user = this.app.state.user;\n\n                        this.setState({\"actionCountDown\" : 6 - value.action.times})\n\n                        if (value.action.times > user['count']){\n                            user['count'] = value.action.times;\n                            let beginTime = Date.parse(value.action.startPoint)\n                            let endTime = Date.parse(value.action.startPointLastTime)\n                            user['countTimes'].push(endTime - beginTime)\n                            user['score'] = value.action.score\n\n                            this.app.setState({\"user\":user})\n\n                            if ( 6 - value.action.times === 0){\n                                console.log(\"完成 六 次...\")\n                                this.gotoNextPage();\n                            }\n                        }\n\n                        if (value.action.alertLastTime !== \"\" ){\n                            let lastTime = Date.parse(value.action.alertLastTime)\n                            if ((nowTime - lastTime) < 0.5 * 1000) {\n                                let alertMessage = '';\n                                value.action.alert.forEach(function(val){\n                                    alertMessage += ( alertMessage.length>0 ? '<br/>' : '') +val;\n                                });\n\n                                doNoticeHold = true;\n                                this.setState({\"isShowNotice\": true, \"notice\": alertMessage,\n                                \"noticeStartHoldTime\":nowTime,\"noticeCurrentHold\":2})\n                            }\n                        }\n\n                        if (value.action.stop === true){\n                            this.setState({\"isHold\":false})\n                            doHold = false;\n                        }\n\n                        if (value.action.startPoint !== \"\" ){\n                            let lastTime = Date.parse(value.action.startPoint)\n                            if ((nowTime - lastTime) < 0.5 * 1000) {\n                                this.setState({\"stopSecPreson\":0, \"stopSec\": 0});\n\n                                doHold = true;\n                                doNoticeHold = false;\n                                this.setState({\"isShowNotice\": false,\n                                        \"isHold\":true,\"startHoldTime\":nowTime,\"currentHold\":this.state.holdSec})\n                                currentHoldTime = nowTime;\n                            }\n                        }\n\n                        if (value.action.startPointLastTime !== \"\" ){\n                            let lastTime = Date.parse(value.action.startPointLastTime)\n                            /*if ((nowTime - lastTime) >= 30 * 1000) {\n                                console.log(\"超過 30秒...\")\n                                this.gotoNextPage();\n                            }*/\n                            if ((nowTime - lastTime) >= 30 * 1000) {\n                                console.log(\"超過 30秒...\")\n                                this.gotoNextPage();\n                            } else {\n                                this.setState({\"stopSecPreson\": (nowTime - lastTime)/1000/30 })\n                                this.setState({\"stopSec\": Math.ceil( (nowTime - lastTime)/ 1000) })\n                            }\n                        } else {\n                            if ((nowTime - this.state.startTime) >= 30 * 1000) {\n                                console.log( \"No action any one .....30秒\")\n                                /*let user = this.app.state.user;\n                                let log = this.props.parent.state.log;\n                                log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                                log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n                                log['page'] = 'Page 3 no action any one ';\n                                log['course'] = user.course.title\n\n                                this.app.changePage( 1 )\n                                tools.Util.sendLogNoScore(log);*/\n                                this.gotoFirstPage('Page 3 no action any one ')\n                            } else {\n                                this.setState({\"stopSecPreson\": (nowTime - this.state.startTime)/1000/30 })\n                                this.setState({\"stopSec\": Math.ceil( (nowTime - this.state.startTime)/ 1000) })\n                            }\n                        }\n\n                        if (value.action.quit){\n                            let lastTime = nowTime\n                            if (this.state.quit_time != null){\n                                lastTime = this.state.quit_time\n                            } else {\n                                this.setState({\"quit_time\" : nowTime})\n                            }\n\n                            doNoticeHold = true;\n                            let alertMessage = \"三秒後離開\"\n                            this.setState({\"isShowNotice\": true, \"notice\": alertMessage,\n                                \"noticeStartHoldTime\":nowTime,\"noticeCurrentHold\":2})\n\n                            if ((nowTime - lastTime) >= 2 * 1000) {\n                                this.gotoNextPage();\n                            }\n                            //this.gotoNextPage();\n                        } else {\n                            this.setState({\"quit_time\" : null})\n                            if (doNoticeHold){\n                                if (this.state.notice === \"三秒後離開\"){\n                                    doNoticeHold = false;\n                                    this.setState({\"isShowNotice\": false});\n                                }\n                            }\n                        }\n                    }\n\n                    if (doHold){\n                        let _holdSec = this.state.holdSec*1000\n                        let step1 = startHoldTime + _holdSec;\n                        let step2 = step1 - currentHoldTime;\n                        let step3 = step2 / _holdSec\n                        this.setState({\"currentHold\" : Math.ceil( step2/ 1000),\n                                    \"holdSecPreson\": step3,\"isHold\":step3 > 0})\n                    }\n\n                    if (doNoticeHold){\n                        let _holdSec = this.state.noticeHoldSec*1000\n                        let step1 = noticeStartHoldTime + _holdSec;\n                        let step2 = step1 - nowTime;\n                        let step3 = step2 / _holdSec\n                        this.setState({\"isShowNotice\":step3 > 0, \"isHold\":false})\n                    }\n\n                    this.setState({'intervalCount':this.state.intervalCount+1})\n                }\n            }\n        }, 100)\n        this.setState({\"interval\":interval})\n\n        this.app.setState({\"doExercise\":true})\n    }\n\n    //async componentWillUnmount(){\n    async beforeExistPage(){\n        this.app.setState({\"doExercise\":false})\n\n        window.clearInterval( this.state.interval )\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.app.state.isUseWebSocket){\n                this.app.ws.send( JSON.stringify({\"function\":\"endExercise\"} ))\n            } else {\n                try{\n                    var response = await fetch('http://127.0.0.1:5500/endExercise', {\n                        method: 'GET',\n                        mode: 'cors',\n                        //credentials: 'include',\n                        crossDomain:true,\n                        headers:{\n                            Accept: '*/*',\n                            'Content-Type': 'application/json;charset=UTF-8'\n                        },\n                    });\n                    var body = await response.text();\n                        console.log( \"endExercise:\", body );\n                }catch(error){\n                    console.log(error)\n                }\n            }\n        }\n    }\n\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n                    <div className=\"classBegin_backgroundImg\" ></div>\n\n                    <div className=\"chanetransition\"\n                        ref={(input) => { this.transition = input; }} ></div>\n                    <div className=\"classBegin_ClassName\" style={{color: this.state != null && this.state.course != null ? this.state.start ? \"#d4d4d4\" : \"#74E0FC\" : \"#74E0FC\"}}>\n                    { this.state != null && this.state.course != null ? this.state.start ? this.state.course.title : \"<請就預備姿勢>\" : null}\n                    </div>\n                    <div className=\"classBegin_Timer\">\n                        { this.state != null && this.state.timer != null ? this.state.start ? this.state.timer : \"\" : null}\n                    </div>\n                    <div className=\"classBegin_newTimer\">{ this.state != null && this.state.newtimer != null ? !this.state.start ? this.state.newtimer : \"\" : null}</div>\n\n                    <div className=\"classBegin_circleProgress\"\n                        style={{display: this.state.isHold ? 'block' : 'none' }}\n                    ref={(input) => { this.circleprogress = input; }}\n                    >\n                        <CircularProgressbarWithChildren\n                            value={ parseInt(this.state.holdSecPreson * 100 )}\n                            background\n                            styles={buildStyles({\n                                strokeLinecap: \"butt\",\n                                pathColor: '#17FF21',\n                                trailColor: 'rgba(214, 214, 214, 0.6)',\n                                backgroundColor: 'rgba(0, 0, 0, 0.7)',\n                            })}\n                            strokeWidth={5}\n                            >\n                            <div className=\"classBegin_circleProgress_title\">動作</div>\n                            <div className=\"classBegin_circleProgress_value\">{this.state.currentHold}</div>\n                            <div className=\"classBegin_circleProgress_sec\">秒</div>\n                        </CircularProgressbarWithChildren>\n                    </div>\n\n                    <div className=\"classBegin_stopCircleProgress\">\n                    <CircularProgressbarWithChildren\n                            value={ parseInt(this.state.stopSecPreson * 100 ) }\n\n                            styles={buildStyles({\n                                strokeLinecap: \"butt\",\n                                pathColor: '#17FF21',\n                                trailColor: 'rgba(214, 214, 214, 0.6)',\n                            })}\n                            strokeWidth={5}\n                            >\n\n                            <div className=\"classBegin_stopCircleProgress_value\">{this.state.stopSec}</div>\n\n                        </CircularProgressbarWithChildren>\n                    </div>\n\n                    <div className=\"classBegin_counter\" style={{display: this.state.start ? 'block' : 'none' }}></div>\n                    <div className=\"classBegin_SET_Title\" style={{display: this.state.start ? 'block' : 'none' }}>剩餘次數</div>\n                    <div className=\"classBegin_SET_Value\" style={{display: this.state.start ? 'block' : 'none' }}>{this.state.actionCountDown}</div>\n\n                    <img className=\"classBegin_StartImg\" src=\"\"\n                        style={{display:'none'}}\n                        ref={(input) => { this.transitionImg = input; }} alt=\"\"></img>\n\n                    <video id=\"videoplayer\" controls={false} loop={true} autoPlay={true} className=\"classBegin_video\" ref={(video) => { this.video = video; }}>\n                        <source src={this.state != null && this.state.course != null ? '/course'+this.state.course.video : null} />\n                    </video>\n\n                    <div className=\"classBegin_HoldImg\" style={{display: this.state.isHold ? 'none'/*'block'*/ : 'none' }}>\n                        <div className=\"classBegin_HoldImg_Title\">動作時間</div>\n                        <div className=\"classBegin_HoldImg_value_area\" >\n                        <div className=\"classBegin_HoldImg_Value\">{this.state.currentHold}</div><div className=\"classBegin_HoldImg_Sec\">秒</div>\n                        </div>\n                        <div className=\"classBegin_HoldImg_progressBar_base\" >\n                            <div className=\"classBegin_HoldImg_progressBar_value\" style={{width: 597 * this.state.holdSecPreson }}></div>\n                        </div>\n                    </div>\n\n                    <div className=\"classBegin_noticeboard\" style={{display: this.state.isShowNotice ? 'block' : 'none' }}>\n                        <div className=\"classBegin_noticeboard_title\">{this.state.notice}</div>\n                    </div>\n\n                    <div className=\"classBegin_actionTip\" style={{display: this.state.isShowTip ? 'block' : 'none' }}>\n                        <div className=\"classBegin_actionTip2\" >\n                            <div className=\"classBegin_actionTip_img\"></div>\n                            <div className=\"classBegin_actionTip_text\">{this.state.tip}</div>\n                        </div>\n                    </div>\n\n                    <div className=\"classBegin_QuickImage\" style={{display: this.state.start ? 'block' : 'none' }}></div>\n                    <div className=\"classBegin_QuickTextArea\" style={{display: this.state.start ? 'block' : 'none' }}><div style={{color:\"#17FF21\"}}>離開</div>雙手交叉(持續3秒)</div>\n\n                </div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default ClassBegin;\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport tools from './util';\n\nimport {DataService} from '../services/DataService';\n\nclass Catalog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.resetCounter = this.resetCounter.bind(this)\n\n        this.app = this.props.parent;\n        this.state = { \"countDown\": 30, handleKeys : [/*'up','down'*/'s','x','enter','z','c'/*'left','right'*/,'esc'], \"courseList\":[] }\n        this.buttons = {}\n        this.tooltip1 = null;\n        this.tooltip2 = null;\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\n            \"availableKeys\" : this.state.handleKeys,\n            \"log\":{\n                'start_Time':tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\"),\n                'end_time':'',\n                'elapsed_time':'',\n                'course':'',\n                'page':''\n            }\n        })\n    }\n\n    resetCounter(){\n        this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        setTimeout( ()=>{\n            window.setElementEventLintener(\"Class2\")\n\n            //if (this.props.parent.state.cid && this.props.parent.state.ciid)\n            //    this.buttons[this.props.parent.state.cid+\"_\"+this.props.parent.state.ciid].focus()\n            //else\n            this.buttons[Object.keys(this.buttons)[0]].focus();\n\n            //window.$(this.footer).animate({scrollLeft: 1630},1500)\n            //window.$(this.footer).animate({scrollLeft: 0},1500)\n        }, 500)\n\n        console.log( \"Class2 coachid\",this.props.parent.state.coachid)\n        this.setState({\"courseList\": await DataService.getCourseList2(this.props.parent.state.coachid) })\n\n        if (this.props.parent.state.isDeveMode === false){\n            var interval = window.setInterval(async ()=>{\n                if ( this.state != null ){\n                    var newCountDown = this.state.countDown -1\n                    this.setState({ \"countDown\": newCountDown})\n                    if ( newCountDown === 0){\n                        let log = this.props.parent.state.log;\n                        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n                        log['page'] = 'Page 2';\n                        this.app.changePage( 1 )\n                        tools.Util.sendLogNoScore(log);\n                    }\n                }\n            }, 1000)\n\n            this.setState({\"interval\":interval})\n        }\n\n\n        var tooltip_interval = window.setInterval(async ()=>{\n            if ( window.$(this.tooltip1).is(':visible') ){\n                window.$(this.tooltip1).fadeOut('slow')\n                window.$(this.tooltip2).fadeIn('slow')\n            } else {\n                window.$(this.tooltip2).fadeOut('slow')\n                window.$(this.tooltip1).fadeIn('slow')\n            }\n        }, 4000)\n\n        this.setState({\"tooltip_interval\":tooltip_interval})\n    }\n\n    componentWillUnmount(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n        }\n\n        if (this.state.tooltip_interval)\n                window.clearInterval( this.state.tooltip_interval )\n    }\n\n    async mycallback(title){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.app.state.isUseWebSocket){\n                this.app.ws.send( JSON.stringify({\"function\":\"uploadCourse\", \"name\":encodeURI(title)} ))\n            } else {\n                try{\n                    var response = await fetch('http://127.0.0.1:5500/uploadCourse?name='+title, {\n                        method: 'GET',\n                        mode: 'cors',\n                        //credentials: 'include',\n                        crossDomain:true,\n                        headers:{\n                            Accept: '*/*',\n                            'Content-Type': 'application/json;charset=UTF-8'\n                        },\n                    });\n                    var body = await response.text();\n                    console.log( \"uploadCourse:\", body );\n                }catch(error){\n                    console.log(error)\n                }\n            }\n        }\n    }\n\n    render(){\n        let courseSeqIndex = 0;\n        return <KeyboardEventHandler\n                    handleKeys={this.state.handleKeys}\n                    onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                    <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n\n                        <div className=\"class2_area\" >\n                        {\n                            this.state.courseList.map((item,index) => {\n                                var attr = '{\"cid\":\"'+item.id+'\"}'\n                                return <div className=\"class2_catalog_area\" attr={attr} key={item.id}>\n                                            <div className=\"class2_catalog\" row_index = {index} row_header=\"true\" >\n                                                <div className=\"class2_catalog_Name1\" >{item.en_name.substr(0,1).toUpperCase()}</div>\n                                                <div className=\"class2_catalog_Name2\">{item.en_name.toLowerCase()}</div>\n                                                <div className=\"class2_catalog_Name3\">{item.name}</div>\n                                            </div>\n                                            <div className=\"class2_course_area\">\n                                            {\n                                                item.courses.map((courseItem, courseIndex)=>{\n                                                    var attr = '{\"cid\":\"'+item.id+'\",\"ciid\":\"'+courseItem.id+'\"}'\n                                                    let gifSrc = \"\"\n                                                    for(let i=0;i<courseItem.coach_videos.length;i++){\n                                                        if ( courseItem.coach_videos[i].coach_id === this.props.parent.state.coachid){\n                                                            gifSrc = \"./course\"+courseItem.coach_videos[i].video_preview\n                                                            break;\n                                                        }\n                                                    }\n\n                                                    return <div className=\"class2_courseItem\"\n                                                            ref={(input) => { this.buttons[item.id+\"_\"+courseItem.id] = input }} href=\"#\"\n                                                            key={courseItem.id}\n                                                            tabIndex={courseSeqIndex++}\n                                                            row_index = {index}\n                                                            row_max = {this.state.courseList.length}\n                                                            col_index = {courseIndex}\n                                                            col_max = {item.courses.length}\n                                                            attr={attr}\n                                                            selectcallback=\"mycallback\"\n                                                            selectcallbackparam={courseItem.title}\n                                                        >\n                                                        <img className=\"class2_courseImage\" alt={courseItem.title} src={process.env.PUBLIC_URL + './course' + courseItem.image} ></img>\n\n                                                        <div className=\"class2_courseName_wrapper\" ></div>\n                                                        <div className=\"class2_courseName_title\" >{courseItem.title}</div>\n\n                                                        <div className=\"class2_courseWrappImage_area\">\n                                                            <div className=\"class2_courseWrappImage_border\" ></div>\n                                                            <img className=\"class2_courseWrapperImage\" src={gifSrc} alt={courseItem.title}/>\n                                                        </div>\n                                                    </div>\n                                                })\n                                            }\n                                            {\n                                                item.courses.length > 1 ?\n                                                <div style={{marginLeft:80}}>&amps;</div>\n                                                : null\n                                            }\n\n                                            </div>\n                                        </div>\n                            })\n                        }\n                        </div>\n\n                        {/*\n                        <div className=\"home_image1\" style={{backgroundSize:82,width:82,height:82,top:1770,left:200}}></div>\n                    <div className=\"home_textArea1\" style={{top:1770,left:290,fontSize:26,width:110}}>\n                            <div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉\n                    </div>\n\n                    <div className=\"home_image3\" style={{backgroundSize:82,width:82,height:82,top:1770,left:440}}></div>\n                    <div className=\"home_textArea3\" style={{top:1770,left:530,fontSize:26,width:110}}>\n                        <div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉\n                    </div>\n\n\n                    <div className=\"home_image4\" style={{backgroundSize:82,width:82,height:82,top:1770,left:680}}></div>\n                    <div className=\"home_textArea4\" style={{top:1770,left:770,fontSize:26,width:110}}>\n                        <div style={{color:\"#17FF21\"}}>向下選取</div>右手彎舉\n                    </div>\n                        */}\n\n                        <div className=\"page_tip_area2\" style={{display:\"block\"}}\n                            ref={(input) => { this.tooltip1 = input }}\n                        >\n                            <div className=\"home_image1\" style={{top:0,backgroundSize:82,width:82,height:82,left:200}}></div>\n                            <div className=\"home_textArea1\" style={{top:10,fontSize:26,width:110,left:290}}><div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉</div>\n\n                            <div className=\"home_image2\" style={{top:0,backgroundSize:82,width:82,height:82,left:440}}></div>\n                            <div className=\"home_textArea2\" style={{top:10,fontSize:26,width:110,left:530}}><div style={{color:\"#17FF21\"}}>前一頁</div>雙手交叉</div>\n\n                            <div className=\"home_image3\" style={{top:0,backgroundSize:82,width:82,height:82,left:680}}></div>\n                            <div className=\"home_textArea3\" style={{top:10,fontSize:26,width:110,left:770}}><div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉</div>\n                        </div>\n\n                        <div className=\"page_tip_area2\" style={{display:\"none\"}}\n                            ref={(input) => { this.tooltip2 = input }}\n                        >\n                            <div className=\"home_image4\" style={{top:0,backgroundSize:82,width:82,height:82,left:200}}></div>\n                            <div className=\"home_textArea4\" style={{top:10,fontSize:26,width:110,left:290}}><div style={{color:\"#17FF21\"}}>向下選取</div>右手彎舉</div>\n\n                            <div className=\"home_image5\" style={{top:0,backgroundSize:82,width:82,height:82,left:440}}></div>\n                            <div className=\"home_textArea5\" style={{top:10,fontSize:26,width:110,left:530}}><div style={{color:\"#17FF21\"}}>向左選取</div>單手左滑</div>\n\n                            <div className=\"home_image6\" style={{top:0,backgroundSize:82,width:82,height:82,left:680}}></div>\n                            <div className=\"home_textArea6\" style={{top:10,fontSize:26,width:110,left:770}}><div style={{color:\"#17FF21\"}}>向右選取</div>單手右滑</div>\n                        </div>\n\n                        {/*<div className=\"page_tip_area\"\n                            ref={(input) => { this.footer = input }}>\n                            <div className=\"page_tip_container\">\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image1\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image2\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>前一頁</div>雙手交叉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image3\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image4\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>向下選取</div>右手彎舉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image5\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>向左選取</div>單手左滑</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image6\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>向右選取</div>單手右滑</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image1\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image2\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>前一頁</div>雙手交叉</div>\n                                </div>\n\n                                <div className=\"page_tip_area_group\">\n                                    <div className=\"page_tip_image3\" ></div>\n                                    <div className=\"page_tip_text\" ><div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉</div>\n                                </div>\n\n\n                            </div>\n                        </div>*/}\n\n\n                    </div>\n                </KeyboardEventHandler>\n    }\n}\n\nexport default Catalog;\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\n//import {/*Fire,Heart,*/Timer} from '../icon/index'\nimport tools from './util.js'\n\nclass ClassDone extends React.Component {\n    constructor(props) {\n        super(props);\n        this.app = this.props.parent;\n        if (this.props.parent.state.isDeveMode === true){\n            this.app.state['user'] ={\n                \"course\":{\"title\":\"ddddd\"} ,\n                //\"course\" : this.app.state.user.course,\n                \"timer\":\"01:00\",\n                \"count\":4,\n                \"countAvgScore\":99,\n                \"countTimes\":[5000,4000,2000],\n                \"score\":[88,77,99],\n                \"elapsed_time\":30,\n                \"start_Time\":10,\n                \"end_time\":40\n            }\n        }\n\n        this.resetCounter = this.resetCounter.bind(this)\n\n        let times = this.app.state.user.timer.split(\":\")\n        //let avgtime = ( parseInt(times[0]) * 60 + parseInt(times[1]) ) / this.app.state.user.count\n        let actionCountTime = 0\n        let actionScore = 0\n        for (var i=0;i<this.app.state.user.countTimes.length;i++)\n            actionCountTime += this.app.state.user.countTimes[i]\n        //for (var j=0;j<this.app.state.user.score.length;j++){\n        //    actionScore += this.app.state.user.score[j]\n        //    console.log( \"actionScore\",actionScore )\n        //}\n\n\n\n        let avgtime = actionCountTime / 1000 / this.app.state.user.count\n        //let avgScore = Math.round(actionScore / this.app.state.user.count)\n        //console.log(\"avgScore\", avgScore)\n\n        let min = parseInt( avgtime / 60 )\n        let sec = Math.round( (avgtime % 60) * 10) / 10\n        this.state = { \"countDown\":30,\n                        handleKeys : [/*'up','down'*/'s','x','enter'],\n                        \"totalTime\": times,\n                        \"avgTime\": [min > 9 ? min  : '0'+min, sec > 9 ? sec : '0'+sec],\n                        \"countAvgTime\": avgtime, //actionCountTime\n                        \"countAvgScore\" : this.app.state.user.score\n                         }\n        this.button2 = null;\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys})\n    }\n\n    resetCounter(){\n        this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        //window.setElementEventLintener(\"ClassDone\")\n        if(this.button2)\n            this.button2.focus();\n        this.setState({ \"countDown\": 30})\n\n        if (this.props.parent.state.isDeveMode === false){\n            var interval = window.setInterval(()=>{\n                if ( this.state != null ){\n\n                    var newCountDown = this.state.countDown -1\n                    this.setState({ \"countDown\": newCountDown})\n                    if ( newCountDown === 0){\n                        /*let user = this.app.state.user;\n                        let log = this.props.parent.state.log;\n                        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_Time) ) / 1000\n                        log['page'] = 'Page 4 no action';\n                        log['course'] = user.course.title\n\n                        this.app.changePage( 1 )\n                        tools.Util.sendLogNoScore(log);*/\n\n                        this.app.changePage( 1 )\n                    }\n                }\n            }, 1000)\n\n            this.setState({\"interval\":interval})\n\n            tools.Util.sendLogScore(\n            {\n                \"elapsed_time\": this.app.state.user.elapsed_time,\n                \"start_time\": this.app.state.user.start_Time,\n                \"end_time\": this.app.state.user.end_time,\n                \"course\": this.app.state.user.course.title,\n                \"count\": this.app.state.user.count,\n                \"average_time\": this.state.countAvgTime,\n                \"correct_rate\": this.state.countAvgScore\n            })\n        }\n        //if (!response.ok) throw new Error(response.statusText)\n    }\n\n    componentWillUnmount(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n        }\n    }\n\n    async mycallback(title){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.app.state.isUseWebSocket){\n                this.app.ws.send( JSON.stringify({\"function\":\"uploadCourse\", \"name\":encodeURI(title)} ))\n            } else {\n                try{\n                    var response = await fetch('http://127.0.0.1:5500/uploadCourse?name='+title, {\n                        method: 'GET',\n                        mode: 'cors',\n                        //credentials: 'include',\n                        crossDomain:true,\n                        headers:{\n                            Accept: '*/*',\n                            'Content-Type': 'application/json;charset=UTF-8'\n                        },\n                    });\n                    var body = await response.text();\n                    console.log( \"uploadCourse:\",body );\n                }catch(error){\n                    console.log(error)\n                }\n            }\n        }\n    }\n\n    /*\n                    <div className=\"classDone_Counter_Area\">\n                        <div className=\"classDone_Counter_Title\">次數</div>\n                        <div className=\"classDone_Counter_value\">{this.app.state.user.count}</div>\n                    </div>\n    */\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n\n                    <div className=\"classDone_Title\">\n                        您已完成{this.app.state.user.course.title}訓練\n                    </div>\n\n                    <div className=\"classDone_newCountArea\">\n                        <div className=\"classDone_Star\">★★★</div>\n                        <div className=\"classDone_innerArea\">\n                            <div className=\"classDone_inner2Area\">\n                                <div className=\"classDone_newFons\"> 次數</div>\n                                <div className=\"classDone_newNumberFons\">{this.app.state.user.count}</div>\n                                <div className=\"classDone_newFons2\">/</div>\n                                <div className=\"classDone_newFons\">正確率</div>\n                                <div className=\"classDone_newNumberFons\">{this.state.countAvgScore}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"classDone_AvgTime_title\">\n                        每個動作平均時間\n                    </div>\n                    {\n                        parseInt(this.state.avgTime[0]) > 0\n                        ?\n                        (\n                            <div className=\"classDone_AvglTime_value\">\n                                {this.app.state.user.avgTime[0]}<div style={{fontSize:32,display:'inline'}}>mis</div>\n                                {this.app.state.user.avgTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                        :\n                        (\n                            <div className=\"classDone_AvglTime_value\">\n                                {this.state.avgTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                    }\n\n                    <div className=\"classDone_TotalTime_title\">\n                        總運動時間\n                    </div>\n\n                    {\n                        parseInt(this.state.totalTime[0]) > 0\n                        ?\n                        (\n                            <div className=\"classDone_TotalTime_value\">\n                                {this.state.totalTime[0]}<div style={{fontSize:32,display:'inline'}}>mis</div>\n                                {this.state.totalTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                        :\n                        (\n                            <div className=\"classDone_TotalTime_value\">\n                                {this.state.totalTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                    }\n\n                    <div className=\"classDone_qrcode_area\" ></div>\n                    <div className=\"classDone_qrcode_title\">MOVE健身鏡滿意度調查</div>\n                    <div className=\"classDone_qrcode_value\"></div>\n\n                    <button className=\"classDone_okButton\"\n                        tabIndex=\"2\"\n                        targetpage=\"3\"\n                        selectcallback=\"mycallback\"\n                        selectcallbackparam={this.app.state.user.course.title}\n                        ref={(input) => { this.button1 = input; }}\n                    >再做一次</button>\n\n                    <button className=\"classDone_endButton\"\n                        tabIndex=\"1\"\n                        targetpage=\"2\"\n                        ref={(input) => { this.button2 = input; }}\n                    >結束</button>\n\n\n                    <div className=\"home_image1\" style={{backgroundSize:82,width:82,height:82,top:1770,left:200}}></div>\n                    <div className=\"home_textArea1\" style={{top:1770,left:290,fontSize:26,width:110}}>\n                            <div style={{color:\"#17FF21\"}}>點選</div>雙手彎舉\n                    </div>\n\n                    <div className=\"home_image3\" style={{backgroundSize:82,width:82,height:82,top:1770,left:440}}></div>\n                    <div className=\"home_textArea3\" style={{top:1770,left:530,fontSize:26,width:110}}>\n                        <div style={{color:\"#17FF21\"}}>向上選取</div>左手彎舉\n                    </div>\n\n\n                    <div className=\"home_image4\" style={{backgroundSize:82,width:82,height:82,top:1770,left:680}}></div>\n                    <div className=\"home_textArea4\" style={{top:1770,left:770,fontSize:26,width:110}}>\n                        <div style={{color:\"#17FF21\"}}>向下選取</div>右手彎舉\n                    </div>\n                </div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default ClassDone;\n","import React from 'react';\nimport './App.css';\n\n//import {DataService} from './services/DataService';\nimport tools from './pages/util.js'\n\nimport Home from './pages/Home.js'\n//import Catalog from './pages/Catalog.js'\n//import Level from './pages/Level';\n//import ClassSelect from './pages/ClassSelect';\n//import ClassIntro from './pages/ClassIntro';\nimport ClassBegin from './pages/ClassBegin';\nimport Class2 from './pages/Class2';\nimport ClassDone from './pages/ClassDone';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.changePage.bind(this);\n    this.state = {page: 1,availableKeys:[],\"lastActionTime\":\"\", isDeveMode:false,\n                  doExercise:false, isUseWebSocket: true, websocip:'127.0.0.1:5500'} ;\n\n    this.updateState = this.updateState.bind(this);\n    this.useWebSocket = this.useWebSocket.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.handleServerItemsLoad = this.handleServerItemsLoad.bind(this);\n    this.currentPage = null;\n  }\n\n  componentDidMount() {\n    if ( this.state.isDeveMode === false){\n      if (this.state.isUseWebSocket){\n        this.useWebSocket(this)\n      } else {\n        if (this.interval)\n          clearInterval(this.interval);\n        this.interval = setInterval(this.handleServerItemsLoad, 100,this);\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if ( this.state.isDeveMode === false){\n      if (this.state.isUseWebSocket){\n        this.useWebSocket(this)\n      } else {\n        clearInterval(this.interval);\n        this.interval = setInterval(this.handleServerItemsLoad, 100,this);\n      }\n    }\n  }\n  componentWillUnmount() {\n    if ( this.state.isDeveMode === false){\n      if (this.state.isUseWebSocket){\n      } else {\n        clearInterval(this.interval);\n      }\n    }\n  }\n\n  handleServerItemsLoad = async (_app) =>{\n    try{\n      var response = await fetch('http://127.0.0.1:5500/exercise_status', {\n        method: 'GET',\n        mode: 'cors',\n        //credentials: 'include',\n        crossDomain:true,\n        headers:{\n          Accept: 'application/json',\n          'Content-Type': 'application/x-www-form-encoded'\n        }\n      });\n      if (!response.ok) throw new Error(response.statusText)\n      var body = await response.text();\n      var value = JSON.parse( body );\n      if ( value[\"最後動作\"].length > 0 && value[\"最後動作時間\"].length> 0) {\n        if (_app.state.lastActionTime !== value[\"最後動作時間\"]){\n          _app.setState({\"lastActionTime\":value[\"最後動作時間\"]})\n          _app.updateState(body)\n        }\n      }\n    }catch(err){}\n  }\n\n  keyEvent = ((key, e, page) => tools.Util.KeyboardEventHandler_onKeyEvent(key, e,this,page))\n\n  useWebSocket(app){\n    let _app = this\n\n    if (this.ws == null){\n      this.ws = new WebSocket(\"ws://\"+_app.state.websocip+\"/api\");\n\n      this.ws.onopen = function() {\n        console.log(\"onopen\")\n      };\n\n      this.ws.onmessage = function(e) {\n        console.log(\"onmessage: \" + e.data)\n\n        //_app.useWebSocket(e.data);\n        let json = JSON.parse(e.data)\n        console.log( 'function === exercise_status', json['function'] === 'exercise_status' )\n        if (json['function'] === 'exercise_status') {\n          var key = json['最後動作']\n          console.log('最後動作', key)\n          var currentFoucs = window.$(':focus')[0]\n          console.log('currentFoucs', currentFoucs)\n          switch(key){\n            case \"左手彎舉\":\n              console.log('case 左手彎舉')\n              if (_app.state.availableKeys.includes('s')){ //up\n                console.log('case 左手彎舉 in if')\n                //window.lastTime = currentTime\n                _app.keyEvent('s', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n            case \"右手彎舉\":\n              console.log('case 右手彎舉')\n              if (_app.state.availableKeys.includes('x')){ //down\n                console.log('case 右手彎舉 in if')\n                //window.lastTime = currentTime\n                _app.keyEvent('x', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n            case \"雙手交叉\":\n              console.log('case 雙手交叉')\n              if (_app.state.availableKeys.includes('esc')){\n                console.log('case 雙手交叉 in if')\n                //window.lastTime = currentTime\n                _app.keyEvent('esc', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            case \"向左選取\":\n              console.log('case 向左選取')\n              if (_app.state.availableKeys.includes('z')){ // 'left'\n                console.log('case 向左選取 in if')\n                _app.keyEvent('z', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n            case \"向右選取\":\n              console.log('case 向右選取')\n              if (_app.state.availableKeys.includes('c')){ // right\n                console.log('case 向右選取 in if')\n                _app.keyEvent('c', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n            case \"雙手彎舉\":\n              console.log('case 雙手彎舉')\n              if (_app.state.availableKeys.includes('enter')){\n                console.log('case 雙手彎舉 in if')\n                //window.lastTime = currentTime\n                _app.keyEvent('enter', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            default:\n              break;\n          }\n        } else if (json['function'] === 'getExercise') {\n          console.log( 'function === getExercise', json['function'] === 'getExercise' )\n          if (typeof _app.currentPage.getExerciseWebSockit === \"function\" ){\n            _app.currentPage.getExerciseWebSockit(json)\n          }\n        } else {\n          console.log( 'function Error ' )\n        }\n      };\n\n      this.ws.onclose = function() {\n        //console.log(\"websocket close\")\n        _app.ws = null\n        _app.useWebSocket(_app)\n      };\n\n      this.ws.onerror = function(e) {\n        console.log(\"onerror\")\n        console.log(e)\n      };\n    }\n\n  }\n\n  updateState(e){\n    if (e){\n\n      if (this.state.doExercise === false){\n        var json = JSON.parse(e)\n        var key = json['最後動作']\n        var currentFoucs = window.$(':focus')[0]\n        var currentTime = new Date().getTime()\n        if (key != null && currentTime - window.lastTime > 1000){\n          switch(key){\n            case \"左手彎舉\":\n              if (this.state.availableKeys.includes('s')){ // up\n                window.lastTime = currentTime\n                this.keyEvent('s', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n            case \"右手彎舉\":\n              if (this.state.availableKeys.includes('x')){ // down\n                window.lastTime = currentTime\n                this.keyEvent('x', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n            case \"雙手交叉\":\n              if (this.state.availableKeys.includes('esc')){\n                window.lastTime = currentTime\n                this.keyEvent('esc', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n\n            case \"向左選取\":\n              if (this.state.availableKeys.includes('z')){ // 'left'\n                window.lastTime = currentTime\n                this.keyEvent('z', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n\n            case \"向右選取\":\n              if (this.state.availableKeys.includes('c')){ // right\n                window.lastTime = currentTime\n                this.keyEvent('c', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n            case \"雙手彎舉\":\n              if (this.state.availableKeys.includes('enter')){\n                window.lastTime = currentTime\n                this.keyEvent('enter', {\"target\":currentFoucs},this.currentPage)\n              }\n              break;\n\n            default:\n              break;\n          }\n        }\n      }\n    }\n  }\n  /*\nexport const SENSOR_MOVE = {\n  [ '左手側平舉' ] : KEYSIM.LEFT,\n  [ '右手側平舉' ] : KEYSIM.RIGHT,\n  [ '雙手側平舉' ] : KEYSIM.UP,\n  [ '雙手彎舉' ] : KEYSIM.SPACE,\n  [ '左手彎舉' ] : KEYSIM.P,\n  [ '右手彎舉' ] : PAGE.MODE,\n};\n\n  */\n\n//cid: 1, ciid: 1\n  changePage(page){\n    this.setState( {page: page})\n\n  }\n\n  render() {\n    const currentPageIndex = this.state.page;\n\n    return (\n      <div className=\"App\" style={{maxWidth:1080, maxHeight:1920, minHeight:1920,minWidth:1080}} >\n        { currentPageIndex === 1\n            ? <Home util={this.keyEvent} parent={this} ></Home>\n            : currentPageIndex === 2\n            ? <Class2 util={this.keyEvent} parent={this} ></Class2>\n            //? <Catalog util={this.keyEvent} parent={this} ></Catalog>\n            //: currentPageIndex === 3\n            //? <Level util={keyEvent} parent={this}></Level>\n            //: currentPageIndex === 4\n            //? <ClassSelect util={this.keyEvent} parent={this} ></ClassSelect>\n            : currentPageIndex === 3//4\n            //? <ClassIntro util={keyEvent} parent={this}></ClassIntro>\n            //: currentPageIndex === 4\n            ? <ClassBegin util={this.keyEvent} parent={this} ></ClassBegin>\n            : <ClassDone util={this.keyEvent} parent={this} ></ClassDone> }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var canDoEvent = true;\nvar util = {\n\n    sendLogScore(log){\n        fetch('http://127.0.0.1:4000/activities', {\n            method: 'POST',\n            mode: 'cors',\n            //credentials: 'include',\n            crossDomain:true,\n            headers:{\n                Accept: '*/*',\n                'Content-Type': 'application/json;charset=UTF-8'\n            },\n            body : JSON.stringify(\n                {\n                    \"activity\": log\n                }\n            )\n        });\n    },\n    sendLogNoScore(log){\n        fetch('http://127.0.0.1:4000/giveup_activities', {\n            method: 'POST',\n            mode: 'cors',\n            //credentials: 'include',\n            crossDomain:true,\n            headers:{\n                Accept: '* / *',\n                'Content-Type': 'application/json;charset=UTF-8'\n            },\n            body : JSON.stringify(\n                {\n                    \"giveup_activity\": log\n                }\n            )\n        });\n        //console.log( \"activities\",response )\n    },\n\n    DateTimeFormat(date,fmt) { //author: meizz\n        var o = {\n            \"M+\": date.getMonth() + 1, //月份\n            \"d+\": date.getDate(), //日\n            \"h+\": date.getHours(), //小时\n            \"m+\": date.getMinutes(), //分\n            \"s+\": date.getSeconds(), //秒\n            \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\n            \"S\": date.getMilliseconds() //毫秒\n        };\n        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n        for (var k in o)\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n        return fmt;\n    },\n\n    KeyboardEventHandler_onKeyEvent: function(key, e, react, page){\n        console.log(\"start Key Event >> \",key, canDoEvent)\n\n        if (canDoEvent){\n            canDoEvent = false;\n            var jqTarget = window.$( e.target )\n            var jqVisibleInputs = window.$('a:visible,:input:visible,div[tabindex]');\n            var jqFirst = jqVisibleInputs.first();\n            var jqLast = jqVisibleInputs.last();\n\n            switch(key){\n                //case 'left':\n                /*case 'z':\n                    let l_row = parseInt(jqTarget.attr('row_index'))\n                    let l_col = parseInt(jqTarget.attr('col_index'))-1\n                    let l_col_max = parseInt(jqTarget.attr('col_max'))\n\n                    if (l_col  < 0 ) l_col = l_col_max-1\n                    let l_child = window.$('div[row_index='+l_row+'][col_index='+l_col+']')[0]\n                    let l_space = (\n                        parseInt(window.$(l_child).css('width').replace('px','')) +\n                        parseInt(window.$(l_child).css('margin-right').replace('px',''))\n                    ) ;\n                    let l_p_width = l_space * window.$(l_child.parentNode).find('div[col_index]').length +\n                            (window.$(l_child.parentNode).find('div[col_index]').length > 1 ? 55.14+80 : 0 )\n\n                    let l_scrollLeft = Math.round(l_child.parentNode.scrollLeft)\n\n                    let l_toLeft = (l_scrollLeft - l_space < 0) ? l_p_width - l_space - (55.14+80) : l_scrollLeft - l_space;\n\n                    window.$(l_child.parentNode).animate({scrollLeft: l_toLeft},\"normal\",\"linear\",()=>{\n                        canDoEvent = true;\n                    });\n\n                    l_child.focus();\n\n                    /*setTimeout(()=>{\n                        if (l_child.parentNode.scrollLeft !== l_toLeft ){\n                            l_child.parentNode.scrollLeft = l_toLeft\n                        }\n                    },100)* /\n\n                    /*if (jqTarget.is(jqFirst))\n                        jqLast.focus()\n                    else\n                        jqTarget.prev().focus();* /\n                    page.resetCounter();\n                    break;*/\n                case 'z':\n                    let l_row = parseInt(jqTarget.attr('row_index'))\n                    let l_col = parseInt(jqTarget.attr('col_index'))-1\n                    let l_col_max = parseInt(jqTarget.attr('col_max'))\n\n                    if (l_col  < 0 ) l_col = l_col_max-1\n                    let l_child = window.$('div[row_index='+l_row+'][col_index='+l_col+']')[0]\n\n                    console.log(\"to >>\",l_col)\n                    //ccl_col++;\n                    let l_space = (\n                        parseInt(window.$(l_child).css('width').replace('px','')) +\n                        parseInt(window.$(l_child).css('margin-right').replace('px',''))\n                    ) ;\n\n                    let l_toLeft = l_space * l_col\n\n                    window.$(l_child.parentNode).animate({scrollLeft: l_toLeft},\"normal\",\"linear\",()=>{\n                        canDoEvent = true;\n                        console.log(\"left jquery animate finish\")\n                    });\n\n                    l_child.focus();\n                    page.resetCounter();\n                    break;\n                //case 'right':\n                case 'c':\n                    let r_row = parseInt(jqTarget.attr('row_index'))\n                    let r_col = parseInt(jqTarget.attr('col_index'))+1\n                    let r_col_max = parseInt(jqTarget.attr('col_max'))\n\n                    if (r_col === r_col_max) r_col = 0\n                    let r_child = window.$('div[row_index='+r_row+'][col_index='+r_col+']')[0]\n                    let r_space = (\n                        parseInt(window.$(r_child).css('width').replace('px','')) +\n                        parseInt(window.$(r_child).css('margin-right').replace('px',''))\n                    )\n\n                    let r_toLeft = r_space*r_col\n\n                    window.$(r_child.parentNode).animate({scrollLeft: r_toLeft},\"normal\",\"linear\",()=>{\n                        canDoEvent = true;\n                        console.log(\"right jquery animate finish\")\n                    });\n\n                    r_child.focus();\n                    page.resetCounter();\n                    break;\n                /*case 'c_':\n                    let r_row = parseInt(jqTarget.attr('row_index'))\n                    let r_col = parseInt(jqTarget.attr('col_index'))+1\n                    let r_col_max = parseInt(jqTarget.attr('col_max'))\n\n                    if (r_col === r_col_max) r_col = 0\n                    let r_child = window.$('div[row_index='+r_row+'][col_index='+r_col+']')[0]\n                    let r_space = (\n                        parseInt(window.$(r_child).css('width').replace('px','')) +\n                        parseInt(window.$(r_child).css('margin-right').replace('px',''))\n                    ) ;\n                    let r_p_width = r_space * window.$(r_child.parentNode).find('div[col_index]').length //+\n\n                    let r_scrollLeft = Math.round(r_child.parentNode.scrollLeft)\n\n                    let r_toLeft = (r_scrollLeft + r_space >= r_p_width) ? 0 : r_scrollLeft + r_space;\n\n                    window.$(r_child.parentNode).animate({scrollLeft: r_toLeft},\"normal\",\"linear\",()=>{\n                        canDoEvent = true;\n                    });\n                    r_child.focus();\n\n                / * setTimeout(()=>{\n                        if (r_child.parentNode.scrollLeft !== r_toLeft ){\n                            r_child.parentNode.scrollLeft = r_toLeft\n                        }\n                    },100)*/\n                    /*if (jqTarget.is(jqLast))\n                        jqFirst.focus()\n                    else\n                        jqTarget.next().focus();* /\n                    page.resetCounter();\n                    break;*/\n                case 'enter':\n                    if (jqTarget.attr('attr') != null){\n                        react.setState( JSON.parse(jqTarget.attr('attr')) )\n                    }\n                    if (jqTarget.attr('selectcallback') != null){\n                        page[jqTarget.attr('selectcallback')]( jqTarget.attr('selectcallbackparam'))\n                    }\n                    canDoEvent = true;\n                    if (jqTarget.attr('targetpage')){\n                        react.changePage( parseInt(jqTarget.attr('targetpage')))\n                    } else {\n                        react.changePage( react.state.page+1 )\n                    }\n                    break;\n                //case 'up':\n                case 's':\n                    //debugger\n                    if (jqTarget[0].tagName === \"DIV\"){\n                        let u_row = parseInt(jqTarget.attr('row_index')) - 1\n                        let u_row_max = parseInt(jqTarget.attr('row_max'))\n                        let u_col = parseInt(jqTarget.attr('col_index'))\n\n                        if ( u_row  < 0)\n                            u_row = u_row_max-1\n                        let u_next = window.$('div[row_index='+u_row+'][col_index=0]');\n\n                        while( u_next.length === 0){\n                            u_row = u_row - 1\n                            if ( u_row  < 0) u_row = u_row_max-1\n                            u_next = window.$('div[row_index='+u_row+'][col_index=0]');\n                        }\n\n                        let u_col_current = window.$('div[row_index='+(u_row)+'][row_header=true]').attr('col_current')\n                        u_col = ( u_col_current ) ? u_col_current  : 0\n\n                        //if (u_next.length > 0){\n                        /*let u_col_max = window.$(u_next[0]).attr('col_max')\n                        if (u_col > u_col_max-1)\n                            u_col = u_col_max-1*/\n                        //}\n\n                        let u_child = window.$('div[row_index='+u_row+'][col_index='+u_col+']')[0]\n                        /*u_child.parentNode.scrollLeft = (\n                            parseInt(window.$(u_child).css('width').replace('px','')) +\n                            parseInt(window.$(u_child).css('margin-right').replace('px',''))\n                        ) * u_col*/\n                        let u_space = (\n                            parseInt(window.$(u_child).css('width').replace('px','')) +\n                            parseInt(window.$(u_child).css('margin-right').replace('px',''))\n                        ) * u_col;\n\n                        //u_child.parentNode.scrollLeft = u_space\n                        window.$(u_child.parentNode).animate({scrollLeft: u_space},\"normal\",\"linear\",()=>{\n                            canDoEvent = true;\n                            console.log(\"up jquery animate finish\")\n                        });\n\n                        u_child.focus();\n                    } else {\n                        if (jqTarget.is(jqFirst))\n                            jqLast.focus()\n                        else\n                            jqTarget.prev().focus();\n                        canDoEvent = true;\n                    }\n\n                    page.resetCounter();\n                    break;\n                //case 'down':\n                case 'x':\n                    //debugger\n                    if (jqTarget[0].tagName === \"DIV\"){\n                        let d_row = parseInt(jqTarget.attr('row_index')) +1\n                        let d_row_max = parseInt(jqTarget.attr('row_max'))\n                        let d_col = parseInt(jqTarget.attr('col_index'))\n\n                        if ( d_row === d_row_max)\n                            d_row = 0;\n                        let d_next = window.$('div[row_index='+d_row+'][col_index=0]');\n                        while( d_next.length === 0){\n                            d_row = d_row+1\n                            if ( d_row === d_row_max)  d_row = 0;\n                            d_next = window.$('div[row_index='+d_row+'][col_index=0]');\n                        }\n\n                        let d_col_current = window.$('div[row_index='+(d_row)+'][row_header=true]').attr('col_current')\n                        d_col = ( d_col_current ) ? d_col_current  : 0\n\n                        //if (d_next.length > 0){\n                    /* let d_col_max = window.$(d_next[0]).attr('col_max')\n                        if (d_col > d_col_max-1)\n                            d_col = d_col_max-1*/\n                        //}\n\n                        let d_child = window.$('div[row_index='+d_row+'][col_index='+d_col+']')[0]\n                        /*d_child.parentNode.scrollLeft = (\n                            parseInt(window.$(d_child).css('width').replace('px','')) +\n                            parseInt(window.$(d_child).css('margin-right').replace('px',''))\n                        ) * d_col */\n\n                        let d_space = (\n                            parseInt(window.$(d_child).css('width').replace('px','')) +\n                            parseInt(window.$(d_child).css('margin-right').replace('px',''))\n                        ) * d_col;\n                        //let d_p_width = d_space * window.$(d_child.parentNode).find('div[col_index]').length\n\n                        //let d_scrollLeft = d_child.parentNode.scrollLeft\n                        //let r_toLeft = (r_scrollLeft + r_space >= r_p_width) ? 0 : r_scrollLeft + r_space;\n\n                        window.$(d_child.parentNode).animate({scrollLeft: d_space},\"normal\",\"linear\",()=>{\n                            canDoEvent = true;\n                            console.log(\"down jquery animate finish\")\n                        });\n                        //d_child.parentNode.scrollLeft = d_space\n\n                        d_child.focus();\n                    } else {\n                        if (jqTarget.is(jqLast))\n                            jqFirst.focus()\n                        else\n                            jqTarget.next().focus();\n                        canDoEvent = true;\n                    }\n                    page.resetCounter();\n                    break;\n                case 'esc':\n                    if (react.state.page > 1){\n                        canDoEvent = true;\n                        react.changePage( react.state.page-1)\n                    }\n                    break;\n                default:\n                    canDoEvent = true;\n                    break;\n            }\n        }\n\n        console.log(\"end Key Event >> \",key, canDoEvent)\n   }\n}\n\nexports.Util = util;"],"sourceRoot":""}