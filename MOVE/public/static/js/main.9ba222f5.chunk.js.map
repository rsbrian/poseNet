{"version":3,"sources":["pages/util.js","services/DataService.js","pages/Home.js","pages/ClassBegin.js","pages/Class2.js","pages/ClassDone.js","pages/CourseSet.js","App.js","serviceWorker.js","index.js"],"names":["canDoEvent","util","sendLogScore","log","fetch","method","mode","crossDomain","headers","Accept","body","JSON","stringify","sendLogNoScore","console","DateTimeFormat","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","k","test","replace","RegExp","$1","getFullYear","substr","length","Class2Focus","target","jqTarget","window","$","row","parseInt","attr","col","child","toLeft","css","parentNode","animate","scrollLeft","focus","KeyboardEventHandler_onKeyEvent","key","e","react","page","jqVisibleInputs","jqFirst","first","jqLast","last","l_row","l_col","l_col_max","l_child","l_toLeft","resetCounter","r_row","r_col","r_col_max","r_child","r_toLeft","setState","parse","addClass","one","setTimeout","removeClass","changePage","state","tagName","u_row","u_row_max","u_col","old_row","u_next","u_col_current","u_child","u_space","is","prev","d_row","d_row_max","d_col","d_next","d_col_current","d_child","d_space","next","error","exports","Util","DataService","response","text","data","coaches","event","course_set_id","course_sets","result","filter","item","index","id","coachid","res","i","category_item","categories","name","en_name","push","courses","indexOf","course_categories","muscle","muscles","j","cid","ciid","coach","category","course","videos","coach_videos","video","coach_id","video_skip","video_start_point","second_video","side_video","second_video_skip","React","createElement","Home","props","app","parent","bind","getGymPhysicalFitnessCenter","handleKeys","currentPage","ccid","defaultSets","actionSets","actionCountDown","defaultCountDown","courseSetIndex","courseSetExist","userSet","courseQuit","user","userId","age","gender","height","weight","accuniq","tools","Date","buttons","this","isDeveMode","interval","clearInterval","setInterval","a","newCountDown","countDown","qrcodeContent","startsWith","ajax","type","async","url","dataType","jsonp","jsonpCallBack","success","json","bcadata","substring","indbody","l","f","err","Number","isNaN","loadJSON","getCoachList","haveCourseSet","checkHaveEvent","setElementEventLintener","keys","Object","onKeyEvent","style","backgroundImage","width","className","map","avatar_url","avatar","tabIndex","row_index","col_index","col_max","targetpage","pageIndex","CourseSet","Class2","ref","input","href","src","alt","opacity","loop","controls","muted","autoPlay","Component","ClassBegin","getExerciseWebSockit","getTime","percentage","beforeExistPage","end_time","start_time","undefined","title","timer","count","value","self","getCourse","next_cid","next_ciid","next_course","nextCourseTitle","ws","send","encodeURI","onplaying","start","isRest","pause","videoHeight","videoWidth","setAttribute","video2","onended","currentTime","play","event2","videoHeight2","videoWidth2","canvaies","find","forEach","remove","responseBody","responseState","nowTime","beforeStartTime","gotoFirstPage","ceil","paused","doHold","isHold","doNoticeHold","isShowNotice","startHoldTime","noticeStartHoldTime","currentHoldTime","doRest","action","quit","lastTime","quit_time","gotoNextPage","notice","startTime","intervalCount","transition","transitionImg","h","abs","m","s","actionTimes","times","beginTime","startPoint","endTime","startPointLastTime","score","courseSetLength","value2","restTime","defaultResetSec","stop","holdSec","alertMessage","alert","val","noticeHoldSec","_holdSec","step1","startResetTime","step3","step2","tip","note","duration","sec","round","hide","show","color","top","display","newtimer","circleprogress","holdSecPreson","background","styles","buildStyles","strokeLinecap","pathColor","trailColor","backgroundColor","strokeWidth","currentHold","stopSecPreson","stopSec","currentReset","ResetSecPreson","isShowTip","tip_value","paddingLeft","check","marginBottom","Catalog","getCourseList2","courseList","courseSeqIndex","row_header","toUpperCase","toLowerCase","courseItem","courseIndex","gifSrc","video_preview","row_max","image","marginLeft","ClassDone","split","actionCountTime","countTimes","avgtime","min","button2","elapsed_time","countAvgTime","countAvgScore","startNumber","avgTime","fontSize","totalTime","selectcallback","selectcallbackparam","button1","getCourseSet","courseSet","category_id","course_id","sets","reps","_time","concat","_timeTemp","App","keyEvent","availableKeys","process","doExercise","websocketip","useWebSocket","prevProps","prevState","_app","WebSocket","onopen","onmessage","currentFoucs","includes","onclose","onerror","currentPageIndex","maxWidth","maxHeight","minHeight","minWidth","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.9ba222f5.chunk.js","sourcesContent":["var canDoEvent = true;\nvar util = {\n\n    sendLogScore(log){\n        //console.log( log )\n        fetch('http://127.0.0.1:4000/activities', {\n            method: 'POST',\n            mode: 'cors',\n            //credentials: 'include',\n            crossDomain:true,\n            headers:{\n                Accept: '*/*',\n                'Content-Type': 'application/json;charset=UTF-8'\n            },\n            body : JSON.stringify(\n                {\n                    \"activity\": log\n                }\n            )\n        });\n    },\n    sendLogNoScore(log){\n        console.log( log )\n        fetch('http://127.0.0.1:4000/giveup_activities', {\n            method: 'POST',\n            mode: 'cors',\n            //credentials: 'include',\n            crossDomain:true,\n            headers:{\n                Accept: '*/*',\n                'Content-Type': 'application/json;charset=UTF-8'\n            },\n            body : JSON.stringify(\n                {\n                    \"giveup_activity\": log\n                }\n            )\n        });\n    },\n\n    DateTimeFormat(date,fmt) { //author: meizz\n        var o = {\n            \"M+\": date.getMonth() + 1, //月份\n            \"d+\": date.getDate(), //日\n            \"h+\": date.getHours(), //小时\n            \"m+\": date.getMinutes(), //分\n            \"s+\": date.getSeconds(), //秒\n            \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\n            \"S\": date.getMilliseconds() //毫秒\n        };\n        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n        for (var k in o)\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n        return fmt;\n    },\n\n    Class2Focus:function(target){\n        var jqTarget = window.$( target )\n\n        let row = parseInt(jqTarget.attr('row_index'))\n        let col = parseInt(jqTarget.attr('col_index'))\n\n        let child = window.$('div[row_index='+row+'][col_index='+col+']')[0]\n        let space = (\n            parseInt(window.$(child).css('width').replace('px','')) +\n            parseInt(window.$(child).css('margin-right').replace('px',''))\n        )\n\n        let toLeft = space*col\n\n        window.$(child.parentNode).animate({scrollLeft: toLeft},\"normal\",\"linear\",()=>{});\n\n        target.focus();\n    },\n\n    KeyboardEventHandler_onKeyEvent: function(key, e, react, page){\n        console.log(\"start Key Event >> \",key, canDoEvent)\n        if(e.target == null) { console.log(\"cancel...\"); return;}\n        if (canDoEvent){\n            canDoEvent = false;\n            try{\n                var jqTarget = window.$( e.target )\n                var jqVisibleInputs = window.$('a:visible,:input:visible,div[tabindex]');\n                var jqFirst = jqVisibleInputs.first();\n                var jqLast = jqVisibleInputs.last();\n\n                switch(key){\n                    case 'z':\n                        let l_row = parseInt(jqTarget.attr('row_index'))\n                        let l_col = parseInt(jqTarget.attr('col_index'))-1\n                        let l_col_max = parseInt(jqTarget.attr('col_max'))\n                        console.log(key,\"row:\"+l_row,\"col:\"+l_col,\"col_max\"+l_col_max);\n\n                        if (l_col  < 0 ) {\n                            canDoEvent = true;\n                            break;\n                        }\n                            //l_col = l_col_max-1\n\n                        let l_child = window.$('div[row_index='+l_row+'][col_index='+l_col+']')[0]\n\n                        let l_space = (\n                            parseInt(window.$(l_child).css('width').replace('px','')) +\n                            parseInt(window.$(l_child).css('margin-right').replace('px',''))\n                        ) ;\n\n                        let l_toLeft = l_space * l_col\n\n                        window.$(l_child.parentNode).animate({scrollLeft: l_toLeft},\"normal\",\"linear\",()=>{\n                            canDoEvent = true;\n                            console.log(\"left jquery animate finish\")\n                        });\n\n                        l_child.focus();\n                        page.resetCounter();\n                        break;\n                    case 'c':\n                        let r_row = parseInt(jqTarget.attr('row_index'))\n                        let r_col = parseInt(jqTarget.attr('col_index'))+1\n                        let r_col_max = parseInt(jqTarget.attr('col_max'))\n                        console.log(key,\"row:\"+r_row,\"col:\"+r_col,\"col_max\"+r_col_max);\n\n                        if (r_col === r_col_max) {\n                            canDoEvent = true;\n                            break;\n                        }//r_col = 0\n\n                        let r_child = window.$('div[row_index='+r_row+'][col_index='+r_col+']')[0]\n                        let r_space = (\n                            parseInt(window.$(r_child).css('width').replace('px','')) +\n                            parseInt(window.$(r_child).css('margin-right').replace('px',''))\n                        )\n\n                        let r_toLeft = r_space*r_col\n\n                        window.$(r_child.parentNode).animate({scrollLeft: r_toLeft},\"normal\",\"linear\",()=>{\n                            canDoEvent = true;\n                            console.log(\"right jquery animate finish\")\n                        });\n\n                        r_child.focus();\n                        page.resetCounter();\n                        break;\n\n                    case 'enter':\n                        if (jqTarget.attr('attr') != null){\n                            react.setState( JSON.parse(jqTarget.attr('attr')) )\n                        }\n                        if (jqTarget.attr('selectcallback') != null){\n                            page[jqTarget.attr('selectcallback')]( jqTarget.attr('selectcallbackparam'))\n                        }\n\n                        jqTarget.addClass(\"blink\").one('webkitAnimationEnd animationend', function () {\n                            setTimeout(function () {\n                                jqTarget.removeClass(\"blink\");\n\n                                canDoEvent = true;\n                                if (jqTarget.attr('targetpage')){\n                                    react.changePage( parseInt(jqTarget.attr('targetpage')))\n                                } else {\n                                    react.changePage( react.state.page+1 )\n                                }\n\n                            }, 500);\n\n                        });\n\n                        break;\n                    case 's':\n                        if (jqTarget[0].tagName === \"DIV\"){\n                            let u_row = parseInt(jqTarget.attr('row_index')) - 1\n                            let u_row_max = parseInt(jqTarget.attr('row_max'))\n                            let u_col = parseInt(jqTarget.attr('col_index'))\n                            console.log(key,\"row:\"+u_row,\"col:\"+u_col,\"row_max\"+u_row_max);\n\n                            let old_row = u_row+1;\n                            if ( u_row  < 0) {\n                                canDoEvent = true;\n                                break;\n                            }\n                                //u_row = u_row_max-1\n                            let u_next = window.$('div[row_index='+u_row+'][col_index=0]');\n\n                            while( u_next.length === 0){\n                                u_row = u_row - 1\n                                if ( u_row  < 0)\n                                    u_row = u_row_max-1\n                                u_next = window.$('div[row_index='+u_row+'][col_index=0]');\n                            }\n\n                            if ( u_row > old_row){\n                                canDoEvent = true;\n                                break;\n                            }\n\n                            let u_col_current = window.$('div[row_index='+(u_row)+'][row_header=true]').attr('col_current')\n                            u_col = ( u_col_current ) ? u_col_current  : 0\n\n                            let u_child = window.$('div[row_index='+u_row+'][col_index='+u_col+']')[0]\n\n                            let u_space = (\n                                parseInt(window.$(u_child).css('width').replace('px','')) +\n                                parseInt(window.$(u_child).css('margin-right').replace('px',''))\n                            ) * u_col;\n\n                            window.$(u_child.parentNode).animate({scrollLeft: u_space},\"normal\",\"linear\",()=>{\n                                canDoEvent = true;\n                                console.log(\"up jquery animate finish\")\n                            });\n\n                            u_child.focus();\n                        } else {\n                            if (jqTarget.is(jqFirst))\n                                jqLast.focus()\n                            else\n                                jqTarget.prev().focus();\n                            canDoEvent = true;\n                        }\n\n                        page.resetCounter();\n                        break;\n                    case 'x':\n                        if (jqTarget[0].tagName === \"DIV\"){\n                            let d_row = parseInt(jqTarget.attr('row_index')) +1\n                            let d_row_max = parseInt(jqTarget.attr('row_max'))\n                            let d_col = parseInt(jqTarget.attr('col_index'))\n                            console.log(key,\"row:\"+d_row,\"col:\"+d_col,\"row_max\"+d_row_max);\n\n                            let old_row = d_row-1;\n\n                            if ( d_row === d_row_max) {\n                                canDoEvent = true;\n                                break;\n                            }\n                                //d_row = 0;\n                            let d_next = window.$('div[row_index='+d_row+'][col_index=0]');\n                            while( d_next.length === 0){\n                                d_row = d_row+1\n                                if ( d_row === d_row_max)  d_row = 0;\n                                d_next = window.$('div[row_index='+d_row+'][col_index=0]');\n                            }\n\n                            if ( d_row < old_row){\n                                canDoEvent = true;\n                                break;\n                            }\n\n                            let d_col_current = window.$('div[row_index='+(d_row)+'][row_header=true]').attr('col_current')\n                            d_col = ( d_col_current ) ? d_col_current  : 0\n\n                            let d_child = window.$('div[row_index='+d_row+'][col_index='+d_col+']')[0]\n\n                            let d_space = (\n                                parseInt(window.$(d_child).css('width').replace('px','')) +\n                                parseInt(window.$(d_child).css('margin-right').replace('px',''))\n                            ) * d_col;\n\n                            window.$(d_child.parentNode).animate({scrollLeft: d_space},\"normal\",\"linear\",()=>{\n                                canDoEvent = true;\n                                console.log(\"down jquery animate finish\")\n                            });\n\n                            d_child.focus();\n                        } else {\n                            if (jqTarget.is(jqLast))\n                                jqFirst.focus()\n                            else\n                                jqTarget.next().focus();\n                            canDoEvent = true;\n                        }\n                        page.resetCounter();\n                        break;\n                    case 'esc':\n                        if (react.state.page > 1){\n                            canDoEvent = true;\n                            react.changePage( react.state.page-1)\n                        }\n                        break;\n                    default:\n                        canDoEvent = true;\n                        break;\n                }\n            }catch(error){\n                canDoEvent = true;\n                console.error(error);\n            }\n        }\n   }\n}\n\nexports.Util = util;","import React from 'react';\n\nclass DataService extends React.createElement {\n\n    static data = null\n\n    static async loadJSON(){\n        var response = await fetch('./course/courses.json', {\n            method: 'GET',\n            headers:{\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        });\n        var body = await response.text();\n        DataService.data = JSON.parse( body );\n    }\n\n    static getCoachList(){\n        return DataService.data.coaches;\n    }\n\n    static checkHaveEvent(date){\n        return DataService.data.event != null ? DataService.data.event[date] : null;\n    }\n\n    static getCourseSet(course_set_id){\n\n        if (DataService.data.course_sets){\n            let result = DataService.data.course_sets.filter((item,index)=>{\n                return (item.id === course_set_id) ? item : null\n            })\n\n            return result.length > 0 ? result[0] : null;\n        } else\n            return null;\n    }\n\n    static async getCourseList2(coachid){\n\n        let res = []\n        for(let i =0;i<DataService.data.categories.length;i++){\n\n            let category_item = DataService.data.categories[i];\n            let result = {id:category_item.id, name:category_item.name, en_name:category_item.en_name}\n            res.push(result);\n\n            result.courses = DataService.data.courses.filter((item, index) =>{\n                let result = item.coaches.indexOf(coachid) > -1 && item.course_categories.indexOf(category_item.id) > -1 ? item : null\n                if (result){\n                    item.muscle = ''\n                        for( var i=0;i<item.muscles.length;i++){\n                            for (var j=0;j<DataService.data.muscles.length;j++){\n                                if ( DataService.data.muscles[j].id === item.muscles[i]){\n                                    item.muscle += (item.muscle.length > 0 ? '、':'')  + DataService.data.muscles[j].name\n                                }\n                            }\n                        }\n                }\n                return result;\n            })\n        }\n        return res;\n    }\n\n    static async getCourse(coachid, cid, ciid){\n        let coach = DataService.data.coaches.filter((item, index) =>{\n            return item.id === coachid ? item : null\n        })[0];\n        let category = DataService.data.categories.filter((item, index) =>{\n            return item.id === cid ? item : null\n        })[0];\n\n        let course = DataService.data.courses.filter((item, index) =>{\n            let result =  item.coaches.indexOf(coachid) > -1 && item.course_categories.indexOf(cid) > -1 && item.id === ciid ? item : null\n\n            if (result ){\n                let videos = result.coach_videos.filter((video,index)=>{\n                    return video.coach_id === coachid ? video : null\n                });\n\n                result.video = videos[0].video\n                result.video_skip = videos[0].video_start_point ? videos[0].video_start_point : 0\n\n                result.second_video = videos[0].side_video\n                result.second_video_skip = videos[0].video_start_point ? videos[0].video_start_point : 0\n\n            }\n\n            return result;\n        })[0]\n\n        course.coach = coach\n        course.category = category\n\n        return course;\n    }\n}\n\nexport { DataService };","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport {DataService} from '../services/DataService';\nimport tools from './util';\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        this.app = this.props.parent;\n        this.resetCounter = this.resetCounter.bind(this)\n        this.getGymPhysicalFitnessCenter = this.getGymPhysicalFitnessCenter.bind(this)\n\n        this.state = { \"countDown\": 30,handleKeys : ['enter','z','c'], coaches:[] }\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys, coachid:null, cid:null, ccid:null,\n                                    defaultSets:1,\n                                    actionSets:1,\n                                    actionCountDown:12,\n                                    defaultCountDown:12,\n                                    courseSetIndex:0, courseSetExist:false,userSet:[],courseQuit:false,\n                                    user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null},\n                                    \"log\":{\n                                        'start_time':tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\"),\n                                        'end_time':'',\n                                        'elapsed_time':'',\n                                        'course':'',\n                                        'page':'',\n                                        \"user_id\": null,\n                                        \"age\": null,\n                                        \"gender\": null,\n                                        \"height\": null,\n                                        \"weight\": null,\n                                        \"accuniq\": null,\n                                    }\n    })\n\n        this.buttons={}\n    }\n\n    setTimeout(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n\n            var interval = window.setInterval(async ()=>{\n                if ( this.state != null ){\n                    var newCountDown = this.state.countDown -1\n                    this.setState({ \"countDown\": newCountDown})\n                    if ( newCountDown === 0){\n                        this.props.parent.setState({user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null}})\n                        window.clearInterval( this.state.interval )\n                        this.setState({\"interval\":null})\n                    }\n                }\n            }, 1000)\n\n            this.setState({\"interval\":interval})\n        }\n    }\n\n    async getGymPhysicalFitnessCenter(qrcodeContent){\n        //console.log( qrcodeContent )\n\n        if (qrcodeContent.startsWith(\"https://movemirror.herokuapp.com/to\") ){\n            let app = this;\n            window.$.ajax({type:'get',\n                async:true, url:qrcodeContent+\"/move/mirror\",\n                dataType:'jsonp',\n                jsonp:'callback',\n                jsonpCallBack:'callback',\n                success:function(json){\n                    qrcodeContent = json.data\n                    let bcadata = qrcodeContent.substring(\"https://qr.accuniq.com/accuniq?bcadata=\".length)\n                    //console.log( bcadata )\n                    var indbody = [\n                        // 0-9\n                        {l:2,f:''},{l:6,f:''},{l:10,f:''},{l:20,f:''},{l:1,f:''},\n                        {l:3,f:''},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        // 10-19\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n\n                        // 20-29\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        // 30-39\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        // 40-49\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        {l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},{l:4,f:3},\n                        // 50-59\n                        {l:4,f:3},{l:4,f:3},{l:20,f:''},{l:3,f:1},{l:12,f:''},\n                        {l:16,f:''},{l:2,f:''},{l:3,f:''},{l:13,f:''},{l:3,f:2},\n                        // 60-69\n                        {l:16,f:''},{l:3,f:0},{l:17,f:''},{l:3,f:''},{l:4,f:''},\n                        {l:4,f:''},{l:1,f:''},{l:4,f:3},{l:5,f:4},{l:5,f:4},\n                        // 70-79\n                        {l:5,f:4},{l:5,f:''},{l:5,f:''},{l:4,f:''},{l:5,f:4},\n                        {l:5,f:4},{l:4,f:3},{l:4,f:3},{l:4,f:''},{l:3,f:''},\n                        // 80-89\n                        {l:3,f:''},{l:3,f:''},{l:3,f:''},{l:3,f:''},{l:3,f:''},\n                        {l:3,f:''},{l:3,f:''},{l:3,f:''},{l:3,f:''},{l:3,f:''},\n                        // 90-99\n                        {l:3,f:''},{l:3,f:''},{l:3,f:''},{l:3,f:''},{l:4,f:''},\n                        {l:3,f:''},{l:73,f:''}\n                    ]\n                    var result = [];\n\n                    var index =0;\n                    for(var i=0;i<indbody.length;i++){\n                        if(indbody[i].l){\n                            result[i] = bcadata.substring(index,index+indbody[i].l)\n                            index += indbody[i].l;\n                            if(indbody[i].f !== ''){\n                                if (indbody[i].f === 0){\n                                    result[i] = \"0.\"+result[i]\n                                }else{\n                                    result[i] = result[i].substr(0,indbody[i].f)+\".\"+result[i].substr(indbody[i].f)\n                                }\n                            }\n                        } else {\n                            result[i] = null\n                        }\n                    }\n                    //console.log( result )\n                    app.props.parent.setState({user:{userId:result[3].replace(/\\*/g,\"\"),age:result[5],\n                        gender:(result[4] === \"1\" ? \"Male\" : result[4] === \"2\" ? \"Female\" : \"Other\"),height:result[6],weight:result[7],accuniq:qrcodeContent}})\n                },\n                error:function(err){\n                    console.log('fail',err);\n                }\n            });\n        } else if(Number.isNaN( parseInt(qrcodeContent) ) === false ) {\n            this.props.parent.setState({user:{userId:qrcodeContent,age:null,gender:null,height:null,weight:null,accuniq:null}})\n        } else if( Number.isNaN( parseInt(qrcodeContent) ) && (qrcodeContent.startsWith(\"P\") || qrcodeContent.startsWith(\"T\") ) ){\n            this.props.parent.setState({user:{userId:qrcodeContent,age:null,gender:null,height:null,weight:null,accuniq:null}})\n        }\n        this.setTimeout();\n    }\n\n    resetCounter(){\n        this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        await DataService.loadJSON()\n        this.setState({coaches: DataService.getCoachList()})\n        this.props.parent.setState({haveCourseSet: DataService.checkHaveEvent(tools.Util.DateTimeFormat(new Date(),\"yyyy_MM_dd\")) })\n\n        window.setElementEventLintener(\"Home\")\n\n        var keys = Object.keys(this.buttons);\n        if (keys.length > 0){\n            if (this.state.coachid){\n                for(let i=0;i<keys.length;i++){\n                    if( keys[i] === this.state.coachid){\n                        this.buttons[keys[i]].focus();\n                        break;\n                    }\n                }\n            } else\n                this.buttons[keys[0]].focus();\n        }\n    }\n\n    componentWillUnmount(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n        }\n    }\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n                    <div className=\"home_selectCoach\">\n                        請選擇教練\n                    </div>\n\n                    <div className=\"home_selectCoachAreaSize\" >\n                        {\n                            this.state.coaches.map((item,index) => {\n                                var attr = '{\"coachid\":\"'+item.id+'\"}'\n                                let avatar_url = \"./course\"+item.avatar\n                                return <div className=\"home_coachArea\"\n                                            tabIndex={index}\n                                            key={index}\n                                            attr={attr}\n                                            row_index={0}\n                                            col_index={index}\n                                            col_max={2}\n                                            targetpage={this.props.parent.state.haveCourseSet !== null\n                                                ? this.app.state.pageIndex.CourseSet\n                                                : this.app.state.pageIndex.Class2 }\n                                            ref={(input) => { this.buttons[item.id] = input }} href=\"#\"\n                                        >\n\n                                            <div className=\"home_videoArea\" >\n                                                <img src={avatar_url} alt=\"coach\" style={{height:\"100%\",opacity:0.3}} ></img>\n                                            </div>\n\n                                    </div>\n                            })\n                        }\n                    </div>\n                    {\n                        this.props.parent.state.user.userId ?\n                        <div className=\"home_auth\">\n                            歡迎 {this.props.parent.state.user.userId} 登入系統\n                        </div>\n                        :\n                        <div className=\"home_auth\">\n                            請對著鏡頭掃描 QRCode 作登入之身份認證\n                        </div>\n                    }\n\n\n                    <video className=\"home_tour\" loop={true} controls={false} muted={true} autoPlay={true}>\n                        <source src=\"/assets/homedir.mp4\"></source>\n                    </video>\n                </div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default Home;\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport tools from './util.js'\n\nimport {DataService} from '../services/DataService';\n\nclass ClassBegin extends React.Component {\n    constructor(props) {\n        //console.log(\"constructor\")\n        super(props);\n        this.resetCounter = this.resetCounter.bind(this)\n        this.getExerciseWebSockit = this.getExerciseWebSockit.bind(this)\n\n        this.app = this.props.parent;\n        this.state = { 'handleKeys' : [/*'enter','left'*/],\n                        'beforeStartTime' : new Date().getTime(),\n                        'startTime': null,\n                        'intervalCount' : 0,\n                        'course':null,\"countDown\":6,\"timer\":\"00:06\",\"newtimer\":\"\",\"start\":false,\"counter\":0,\n                        \"isShowTip\":false,'tip':[{\n                                                    \"name\": \"雙腳打開與肩同寬\",\n                                                    \"check\": false\n                                                },\n                                                {\n                                                    \"name\": \"雙手抓取啞呤慢慢彎曲手臂向上彎舉\",\n                                                    \"check\": true\n                                                }],\n                        \"isHold\":false,\"holdSec\":2,\"currentHold\":0,\"startHoldTime\":0,\"holdSecPreson\":1,\n                        \"isShowNotice\":false, 'notice':'左肩膀移動了，請回到預備動作重新開始!',\n                        \"noticeHoldSec\":2,\"noticeCurrentHold\":0,\"noticeStartHoldTime\":0,\"noticeHoldSecPreson\":1,\n                        \"isRest\": false, \"defaultResetSec\": 30,\"currentReset\":0, \"ResetSecPreson\":1, \"startResetTime\":null,\n                        \"quit_time\" : null,\n                        \"defaultSets\":this.app.state.defaultSets,\n                        \"actionSets\":1,\n                        \"actionCountDown\": this.app.state.actionCountDown,//12,\n                        \"defaultCountDown\": this.app.state.defaultCountDown,//12,\n                        \"stopSecPreson\" : 0 ,\"stopSec\":0,\n                        \"responseBody\": null,\n                        \"nextCourseTitle\": \"\"}\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys})\n\n        this.percentage = 30\n    }\n\n    async gotoFirstPage(page){\n        this.beforeExistPage();\n        console.log( \"gotoFirstPage...\");\n        let user = this.app.state.user;\n        let log = this.props.parent.state.log;\n        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_time) ) / 1000\n        log['page'] = page;\n\n        if (this.app.state.haveCourseSet !== undefined){\n            this.app.setState({courseSetExist:true})\n            this.app.changePage( this.app.state.pageIndex.CourseSet )\n        } else {\n            log['course'] = user.course.title\n            setTimeout( ()=>{\n                this.app.changePage( this.app.state.pageIndex.Home )\n            },500)\n            tools.Util.sendLogNoScore(log);\n        }\n    }\n\n    async gotoNextPage(){\n        this.beforeExistPage();\n        console.log( \"gotoNextPage...\");\n        let user = this.app.state.user;\n        user['timer'] = this.state.timer;\n        user['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n        user['elapsed_time'] = ( Date.parse(user.end_time) - Date.parse(user.start_time) ) / 1000\n        //user['correct_rate'] = 99\n        //console.log( \"user...\",user);\n        let log = this.props.parent.state.log;\n        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_time) ) / 1000\n        log['page'] = 'Page 3';\n\n        this.app.setState({\"user\":user,\"log\":log})\n\n        //console.log( this.app.state.haveCourseSet, this.app.state.haveCourseSet!= null)\n        if (this.app.state.haveCourseSet !== undefined){\n            //console.log( user.count, this.state.defaultCountDown)\n            this.app.setState({courseSetExist: user.count < this.state.defaultCountDown })\n            setTimeout( ()=>{\n                this.app.changePage( this.app.state.pageIndex.CourseSet )\n            },500)\n        } else {\n            //console.log(\"user.count\",user.count);\n            //console.log(this.app)\n            if (user.count > 0)\n                setTimeout( ()=>{\n                    this.app.changePage( this.app.state.page+1 )\n                },500)\n            else {\n                log['course'] = user.course.title\n\n                setTimeout( ()=>{\n                    this.app.changePage( this.app.state.pageIndex.Class2 )\n                },500)\n                tools.Util.sendLogNoScore(log);\n            }\n        }\n    }\n\n    resetCounter(){\n    }\n\n    getExerciseWebSockit(value){\n        this.setState({\"responseBody\":value})\n    }\n\n    async componentDidMount() {\n        //console.log( \"ClassBegin ...componentDidMount...\")\n        window.setElementEventLintener(\"ClassBegin\")\n        let self = this;\n        var course = await DataService.getCourse(this.app.state.coachid,this.app.state.cid,this.app.state.ciid);\n\n        if ( this.app.state.next_cid != null){\n            let next_course = await DataService.getCourse(this.app.state.coachid,this.app.state.next_cid,this.app.state.next_ciid);\n            this.setState({nextCourseTitle:next_course.title});\n        }\n\n        if (this.props.parent.state.isDeveMode === false){\n            this.app.ws.send( JSON.stringify({\"function\":\"uploadCourse\", \"name\":encodeURI(course.title)} ))\n        }\n        this.setState({\"course\": course ,\n                       \"countDown\":3,\"timer\":\"00:03\",\"start\":false})\n\n        this.app.setState({\"user\":{\n            \"course\" : course,\n            'count' : 0,\n            'countTimes' : [],\n            'score' : 0,\n\n            'coach': course.coach.name,\n            'category': course.category.name,\n            'userId' : this.app.state.user.userId,\n            \"age\": this.app.state.user.age,\n            \"gender\": this.app.state.user.gender,\n            \"height\": this.app.state.user.height,\n            \"weight\": this.app.state.user.weight,\n            \"accuniq\": this.app.state.user.accuniq,\n        }})\n\n\n        this.video.onplaying = function(event) {\n            if (self.state.start === false || (self.state.start === true && self.state.isRest === true) )\n                event.target.pause();\n            let videoHeight = event.target.videoHeight;\n            let videoWidth = event.target.videoWidth;\n            event.target.setAttribute(\"style\",'left:'+  (( 1080 - (1450*videoWidth/videoHeight) ) / 2) +'px; ')\n        };\n\n        if (this.video2 != null){\n            this.video.onended = function(event) {\n                window.$('#videoplayer')[0].currentTime = self.state.course.video_skip;\n                window.$('#videoplayer2')[0].currentTime = self.state.course.second_video_skip;\n                window.$('#videoplayer')[0].play()\n                window.$('#videoplayer2')[0].play()\n            };\n\n            this.video2.onplaying = function(event2) {\n                if (self.state.start === false || (self.state.start === true && self.state.isRest === true) )\n                    event2.target.pause();\n                let videoHeight2 = event2.target.videoHeight;\n                let videoWidth2 = event2.target.videoWidth;\n                event2.target.setAttribute(\"style\",'left:'+  (( 1080 - (1450*videoWidth2/videoHeight2) ) / 2) +'px; ')\n            };\n\n            this.video2.onended = function(event) {\n                window.$('#videoplayer')[0].currentTime = self.state.course.video_skip;\n                window.$('#videoplayer2')[0].currentTime = self.state.course.second_video_skip;\n                window.$('#videoplayer')[0].play()\n                window.$('#videoplayer2')[0].play()\n            };\n        }\n\n        var interval = window.setInterval(async()=>{\n            let canvaies = window.$.find('canvas');\n            if (canvaies.length>0){\n                canvaies.forEach(function(value){\n                    value.remove();\n                });\n            }\n\n            let responseBody = null\n            let responseState = false;\n\n            responseBody = this.state.responseBody\n            responseState = responseBody === null;\n\n\n            let nowTime = new Date().getTime()\n\n            if (responseState){\n\n                if ((nowTime - this.state.beforeStartTime) >= 30 * 1000) {\n                    if (this.props.parent.state.isDeveMode === false){\n                        this.gotoFirstPage('Page 3 no response');\n                    }\n                } else {\n                    this.setState({\"stopSecPreson\": (nowTime - this.state.beforeStartTime)/1000/30 })\n                    this.setState({\"stopSec\": Math.ceil( (nowTime - this.state.beforeStartTime)/ 1000) })\n                    if (this.props.parent.state.isDeveMode === true){\n\n                        if (Math.ceil( (nowTime - this.state.beforeStartTime)/ 1000) > 10 && this.video.paused){\n                            this.setState({start:true})\n\n                            if (this.video2 != null){\n                                window.$('#videoplayer')[0].currentTime = this.state.course.video_skip;\n                                window.$('#videoplayer2')[0].currentTime = this.state.course.second_video_skip;\n                                this.video.play();\n                                this.video2.play();\n\n                            } else {\n                                this.video.play();\n                            }\n                        }\n                    }\n                }\n\n                /*if ((nowTime - this.state.beforeStartTime) >= 10 * 1000) {\n                    this.gotoNextPage();\n                    this.beforeExistPage();\n                    window.$('.testAnimation').css('display','block');\n                    window.$('.testAnimation').addClass('testAnimation_animation')\n                    //animation: clipcircle 1s linear 0S infinite;\n                    setTimeout( ()=>{\n                        this.app.changePage( this.app.state.page+1 )\n                    },500)\n                }*/\n\n            } else {\n                let doHold = this.state.isHold;\n                let doNoticeHold = this.state.isShowNotice;\n\n                let startHoldTime = this.state.startHoldTime;\n                let noticeStartHoldTime = this.state.noticeStartHoldTime;\n                let currentHoldTime = new Date().getTime();\n\n                let doRest = this.state.isRest;\n\n                var value = responseBody\n\n                //console.log( \"quit\", value.action.quit );\n                if (value.action.quit){\n                    let lastTime = nowTime\n                    if (this.state.quit_time != null){\n                        lastTime = this.state.quit_time\n                    } else {\n                        this.setState({\"quit_time\" : nowTime})\n                    }\n\n                    doNoticeHold = true;\n                    let alertMessage = \"三秒後離開\"\n                    this.setState({\"isShowNotice\": true, \"notice\": alertMessage,\n                        \"noticeStartHoldTime\":nowTime,\"noticeCurrentHold\":2,\"noticeHoldSec\":2})\n\n                    if ((nowTime - lastTime) >= 3 * 1000) {\n\n                        this.app.setState({'courseQuit':true})\n\n                        this.gotoNextPage();\n                    }\n                } else {\n                    this.setState({\"quit_time\" : null})\n                    if (doNoticeHold){\n                        if (this.state.notice === \"三秒後離開\"){\n                            doNoticeHold = false;\n                            this.setState({\"isShowNotice\": false});\n                        }\n                    }\n                }\n\n                if ( !value.start ){ // 姿勢設定\n                    this.setState({\"isShowTip\": (value.tip.note.length > 0),\n                                \"tip\" : value.tip.note,\n                                \"holdSec\": value.tip.duration})\n\n                    let lastTime = (value.action.startPointLastTime !== \"\" )\n                        ? Date.parse(value.action.startPointLastTime)\n                        : this.state.beforeStartTime\n                    if ((nowTime - lastTime) >= 30 * 1000 && doRest===false) {\n                        console.log( \"response not ok.....30秒\")\n                        this.gotoFirstPage('Page 3 not Start ')\n\n                    } else {\n                        this.setState({\"stopSecPreson\": (nowTime - lastTime)/1000/30 })\n                        this.setState({\"stopSec\": Math.ceil( (nowTime - lastTime)/ 1000) })\n                    }\n\n                } else { //開始倒數\n                    this.setState({\"isShowTip\": false})\n                    if (this.state.startTime == null)\n                        this.setState({\"startTime\":nowTime})\n\n                    if (this.state.intervalCount % 10 === 0){\n                        if ( this.state != null && this.state.course != null ){\n                            var newCountDown = this.state.countDown\n\n                            if (this.state.start === false){\n                                newCountDown = newCountDown-1\n                                this.setState({\"stopSecPreson\":0, \"stopSec\": 0});\n\n                                if (newCountDown === 0){\n                                    this.setState({ \"start\":true})\n\n                                    let user = this.app.state.user;\n                                    user['start_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                                    this.app.setState({\"user\":user})\n                                    this.transition.setAttribute(\"style\",'display:block; ')\n                                    this.transitionImg.setAttribute(\"src\",'')\n                                    this.transitionImg.setAttribute(\"src\",\"./assets/start.gif\")\n                                    this.transitionImg.setAttribute(\"style\",'display:block; ')\n                                }\n                            }else{\n                                this.transition.setAttribute(\"style\",'display:none; ')\n                                this.transitionImg.setAttribute(\"src\",'')\n                                this.transitionImg.setAttribute(\"style\",'display:none; ')\n                                newCountDown = newCountDown+1\n                            }\n                            newCountDown = newCountDown < 0 ? 0  : newCountDown\n\n                            var h = parseInt( Math.abs(newCountDown) / 3600 )\n                            var m = parseInt( Math.abs(newCountDown) / 60 )\n                            var s = Math.abs(newCountDown) % 60\n                            var timer = (h > 0 ? (h<10 ? \"0\"+h : h )+\":\"  :'')+(m<10 ? \"0\"+m : m ) +\":\"+( s< 10 ?\"0\"+s : s)\n                            this.setState({ \"timer\": timer, \"countDown\": newCountDown, \"newtimer\":s})\n\n                        }\n                    }\n\n                    if (this.state.start){\n                        if (this.video.paused && self.state.isRest === false){\n                            if (this.video2 != null){\n                                window.$('#videoplayer')[0].currentTime = this.state.course.video_skip;\n                                window.$('#videoplayer2')[0].currentTime = this.state.course.second_video_skip;\n                                this.video.play();\n                                this.video2.play();\n                            } else {\n                                this.video.play();\n                            }\n                        }\n\n                        let user = this.app.state.user;\n                        let actionTimes = value.action.times - ( (this.state.actionSets-1) * this.state.defaultCountDown);\n\n                        this.setState({\"actionCountDown\" : this.state.defaultCountDown - (actionTimes < 0 ? 0: actionTimes)})\n\n                        if (value.action.times > user['count']){\n                            user['count'] = value.action.times;\n                            let beginTime = Date.parse(value.action.startPoint)\n                            let endTime = Date.parse(value.action.startPointLastTime)\n                            user['countTimes'].push(endTime - beginTime)\n                            user['score'] = value.action.score\n\n                            this.app.setState({\"user\":user})\n\n                            if ( this.state.defaultCountDown - actionTimes === 0){\n                                console.log(\"完成 \"+this.state.defaultCountDown+\" 次..., 第 \"+ this.state.actionSets+\"/\"+this.state.defaultSets+\" 組\")\n\n                                //console.log( this.app.state.haveCourseSet , this.app.state.courseSetLength, this.app.state.courseSetIndex )\n                                if (this.app.state.haveCourseSet === undefined){\n                                    this.gotoNextPage();\n                                } else {\n                                    if ( this.app.state.courseSetLength === this.app.state.courseSetIndex && this.state.actionSets === this.state.defaultSets ){\n                                        this.gotoNextPage();\n                                    } else {\n                                        let value2 = JSON.parse(JSON.stringify(value))\n                                        let restTime = Date.parse(value2.action.startPointLastTime);\n                                        restTime = restTime + this.state.defaultResetSec*1000\n\n                                        value2.action.startPointLastTime = tools.Util.DateTimeFormat( new Date(restTime),\"yyyy/MM/dd hh:mm:ss\")\n\n                                        this.setState({\"actionSets\": this.state.actionSets+1,\n                                                       \"isRest\": true, \"startResetTime\": currentHoldTime,\"responseBody\":value2,\n\n                                                       \"isShowNotice\": true, \"notice\": \"下一個動作：\" + (this.state.actionSets === this.state.defaultSets ? this.state.nextCourseTitle : this.state.course.title),\n                                                       \"noticeStartHoldTime\":nowTime,\"noticeHoldSec\":30//this.state.defaultResetSec\n                                                       //\"startHoldTime\":currentHoldTime,\"currentHold\":this.state.holdSec\n                                                    })\n                                        this.app.setState({\"actionSets\": this.app.state.actionSets+1})\n\n                                        doNoticeHold = true;\n                                        doRest = true;\n                                        if (this.video2 != null){\n                                            this.video.pause();\n                                            this.video2.pause();\n                                        } else {\n                                            this.video.pause();\n                                        }\n\n                                        if (this.props.parent.state.isDeveMode === false){\n                                            this.app.ws.send( JSON.stringify({\"take_a_break\":true} ))\n                                        }\n                                    }\n                                }\n                            }\n                        }\n\n                        if (value.action.stop === true){\n                            this.setState({\"isHold\":false})\n                            doHold = false;\n                        }\n\n                        if (value.action.startPoint !== \"\" && doRest === false){\n                            let lastTime = Date.parse(value.action.startPoint)\n                            if ((nowTime - lastTime) < 0.5 * 1000) {\n                                this.setState({\"stopSecPreson\":0, \"stopSec\": 0});\n\n                                doHold = true;\n                                doNoticeHold = false;\n                                this.setState({\"isShowNotice\": false,\n                                        \"isHold\":true,\n                                        \"startHoldTime\":nowTime,\"currentHold\":this.state.holdSec})\n                                currentHoldTime = nowTime;\n                            }\n                        }\n\n                        if (doRest === false){\n                            if (value.action.startPointLastTime !== \"\" ){\n                                let lastTime = Date.parse(value.action.startPointLastTime)\n\n                                if ((nowTime - lastTime) < 0.5 * 1000) {\n                                    let alertMessage = '';\n                                    value.action.alert.forEach(function(val){\n                                        alertMessage += ( alertMessage.length>0 ? '<br/>' : '') +val;\n                                    });\n\n                                    doNoticeHold = true;\n                                    this.setState({\"isShowNotice\": true, \"notice\": alertMessage,\n                                    \"noticeStartHoldTime\":nowTime,\"noticeCurrentHold\":2,noticeHoldSec:2})\n                                }\n\n                                if ((nowTime - lastTime) >= 30 * 1000  && doRest===false) {\n                                    console.log(\"超過 30秒...\")\n                                    this.gotoNextPage();\n                                } else {\n                                    this.setState({\"stopSecPreson\": (nowTime - lastTime)/1000/30 })\n                                    this.setState({\"stopSec\": Math.ceil( (nowTime - lastTime)/ 1000) })\n                                }\n                            } else {\n                                if ((nowTime - this.state.startTime) >= 30 * 1000  && doRest===false) {\n                                    console.log( \"No action any one .....30秒\")\n\n                                    this.gotoFirstPage('Page 3 no action any more ')\n                                } else {\n                                    this.setState({\"stopSecPreson\": (nowTime - this.state.startTime)/1000/30 })\n                                    this.setState({\"stopSec\": Math.ceil( (nowTime - this.state.startTime)/ 1000) })\n                                }\n                            }\n                        }\n                    }\n\n                    if (doRest){\n                        let _holdSec = this.state.defaultResetSec*1000\n                        let step1 = this.state.startResetTime + _holdSec;\n                        let step2 = step1 - currentHoldTime;\n                        let step3 = step2 / _holdSec\n                        this.setState({\"currentReset\" : Math.ceil( step2/ 1000),\n                                    \"ResetSecPreson\": step3,\"isRest\":step3 > 0})\n\n                        if ( (step3 > 0) === false){\n                            if (this.props.parent.state.isDeveMode === false){\n                                this.app.ws.send( JSON.stringify({\"take_a_break\":false} ))\n                            }\n                            //console.log( this.state.defaultSets, this.state.actionSets-1)\n                            if ( this.state.defaultSets === this.state.actionSets-1){\n                                this.gotoNextPage();\n                            } else {\n                                if (this.video2 != null){\n                                    window.$('#videoplayer')[0].currentTime = this.state.course.video_skip;\n                                    window.$('#videoplayer2')[0].currentTime = this.state.course.second_video_skip;\n                                    this.video.play();\n                                    this.video2.play();\n                                } else {\n                                    this.video.play();\n                                }\n                            }\n                        }\n                                    //\"isRest\": false, \"defaultResetSec\": 30,\"currentReset\":0, \"ResetSecPreson\":1,\n                    }\n\n\n                    if (doHold){\n                        let _holdSec = this.state.holdSec*1000\n                        let step1 = startHoldTime + _holdSec;\n                        let step2 = step1 - currentHoldTime;\n                        let step3 = step2 / _holdSec\n                        this.setState({\"currentHold\" : Math.ceil( step2/ 1000),\n                                    \"holdSecPreson\": step3,\"isHold\":step3 > 0})\n                    }\n\n                    //console.log(doNoticeHold, this.state.notice )\n                    if (doNoticeHold){\n\n                        let _holdSec = this.state.noticeHoldSec*1000\n                        let step1 = noticeStartHoldTime + _holdSec;\n                        let step2 = step1 - nowTime;\n                        let step3 = step2 / _holdSec\n                        this.setState({\"isShowNotice\":step3 > 0, \"isHold\":false})\n                    }\n\n                    this.setState({'intervalCount':this.state.intervalCount+1})\n                }\n            }\n            if (this.video2 != null ){\n                let sec =  Math.round( (nowTime - this.state.beforeStartTime)/ 1000) % 10;\n                if ( sec === 5 ){\n                    window.$('#videoplayer').hide()\n                    window.$('#videoplayer2').show()\n                } else if ( sec === 0){\n                    window.$('#videoplayer2').hide()\n                    window.$('#videoplayer').show()\n                }\n            }\n        }, 100)\n        this.setState({\"interval\":interval})\n\n        this.app.setState({\"doExercise\":true})\n    }\n\n    //async componentWillUnmount(){\n    async beforeExistPage(){\n        this.app.setState({\"doExercise\":false})\n\n        window.clearInterval( this.state.interval )\n        if (this.props.parent.state.isDeveMode === false){\n            this.app.ws.send( JSON.stringify({\"function\":\"endExercise\"} ))\n        }\n\n        window.$('.testAnimation').css('display','block');\n        window.$('.testAnimation').addClass('testAnimation_animation')\n    }\n\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n                    <div className=\"classBegin_backgroundImg\" ></div>\n\n                    <div className=\"chanetransition\"\n                        ref={(input) => { this.transition = input; }} ></div>\n                    <div className=\"classBegin_ClassName\" style={{color: this.state != null && this.state.course != null ? \"#d4d4d4\" : \"#74E0FC\"}}>\n                    { this.state != null && this.state.course != null ? this.state.course.title : null}\n                    </div>\n\n                    <div className=\"classBegin_ClassName\" style={{color: this.state != null && this.state.course != null ? \"#74E0FC\" : \"#74E0FC\", top:307, display: this.state.start ? 'none':'block'}}>\n                    { this.state != null && this.state.course != null ? \"<請就預備姿勢>\" : null}\n                    </div>\n\n                    <div className=\"classBegin_Timer\">\n                        { this.state != null && this.state.timer != null ? this.state.start ? this.state.timer : \"\" : null}\n                    </div>\n                    <div className=\"classBegin_newTimer\">{ this.state != null && this.state.newtimer != null ? !this.state.start ? this.state.newtimer : \"\" : null}</div>\n\n                    <div className=\"classBegin_circleProgress\"\n                        style={{display: this.state.isHold ? 'none'/*'block'*/ : 'none' }}\n                    ref={(input) => { this.circleprogress = input; }}\n                    >\n                        <CircularProgressbarWithChildren\n                            value={ parseInt(this.state.holdSecPreson * 100 )}\n                            background\n                            styles={buildStyles({\n                                strokeLinecap: \"butt\",\n                                pathColor: '#17FF21',\n                                trailColor: 'rgba(214, 214, 214, 0.6)',\n                                backgroundColor: 'rgba(0, 0, 0, 0.7)',\n                            })}\n                            strokeWidth={5}\n                            >\n                            <div className=\"classBegin_circleProgress_title\">動作</div>\n                            <div className=\"classBegin_circleProgress_value\">{this.state.currentHold}</div>\n                            <div className=\"classBegin_circleProgress_sec\">秒</div>\n                        </CircularProgressbarWithChildren>\n                    </div>\n\n                    <div className=\"classBegin_stopCircleProgress\" style={{display:'none'}}>\n                    <CircularProgressbarWithChildren\n                            value={ parseInt(this.state.stopSecPreson * 100 ) }\n\n                            styles={buildStyles({\n                                strokeLinecap: \"butt\",\n                                pathColor: '#17FF21',\n                                trailColor: 'rgba(214, 214, 214, 0.6)',\n                            })}\n                            strokeWidth={5}\n                            >\n\n                            <div className=\"classBegin_stopCircleProgress_value\">{this.state.stopSec}</div>\n\n                        </CircularProgressbarWithChildren>\n                    </div>\n\n                    <div className=\"classBegin_counter\" style={{display: this.state.start ? 'block' : 'none' }}></div>\n                    <div className=\"classBegin_SET_Title\" style={{display: this.state.start ? 'block' : 'none' }}>剩餘次數</div>\n                    <div className=\"classBegin_SET_Value\" style={{display: this.state.start ? 'block' : 'none' }}>{this.state.actionCountDown}</div>\n\n                    <img className=\"classBegin_StartImg\" src=\"\"\n                        style={{display:'none'}}\n                        ref={(input) => { this.transitionImg = input; }} alt=\"\"></img>\n\n\n                    { (this.state != null && this.state.course != null && this.state.course.second_video == null)\n                        ?\n                        <video id=\"videoplayer\" controls={false}  loop={true} autoPlay={true} className=\"classBegin_video\" muted=\"muted\" ref={(video) => { this.video = video; }}>\n                            <source src={this.state != null && this.state.course != null ? '/course'+this.state.course.video : null} />\n                        </video>\n                        :\n                        <video id=\"videoplayer\" controls={false} autoPlay={true} className=\"classBegin_video\" muted=\"muted\" ref={(video) => { this.video = video; }}>\n                            <source src={this.state != null && this.state.course != null ? '/course'+this.state.course.video : null} />\n                        </video>\n                    }\n\n                    {\n                        (this.state != null && this.state.course != null && this.state.course.second_video != null) ?\n                    <video id=\"videoplayer2\" controls={false} autoPlay={true} className=\"classBegin_video2\" muted=\"muted\" ref={(video2) => { this.video2 = video2; }}>\n                        <source src={this.state != null && this.state.course != null ? '/course'+this.state.course.second_video : null} />\n                    </video>\n                        :null\n                    }\n\n                    <div className=\"classBegin_HoldImg\" style={{display: this.state.isRest ? 'block' : 'none' }}>\n                        <div className=\"classBegin_HoldImg_Title\">休息時間</div>\n                        <div className=\"classBegin_HoldImg_value_area\" >\n                        <div className=\"classBegin_HoldImg_Value\">{this.state.currentReset}</div><div className=\"classBegin_HoldImg_Sec\">秒</div>\n                        </div>\n                        <div className=\"classBegin_HoldImg_progressBar_base\" >\n                            <div className=\"classBegin_HoldImg_progressBar_value\" style={{width: 597 * this.state.ResetSecPreson }}></div>\n                        </div>\n                    </div>\n\n                    <div className=\"classBegin_noticeboard\" style={{display: this.state.isShowNotice ? 'block' : 'none' }}>\n                        <div className=\"classBegin_noticeboard_title\">{this.state.notice}</div>\n                    </div>\n\n                    <div className=\"classBegin_actionTip\" style={{display: this.state.isShowTip ? 'block' : 'none' }}>\n                        <div className=\"classBegin_actionTip2\" >\n                            <div className=\"classBegin_actionTip_img\"></div>\n                            <div className=\"classBegin_actionTip_text\">\n                                <div>\n                                {\n                                (this.state.tip.length > 0)\n                                ?\n                                this.state.tip.map( (tip_value, index )=>{\n                                    return <span style={{display:'block',paddingLeft:75,color:( tip_value.check ? '#17FF21' : '#D4D4D4'),marginBottom: 16}} key={index}>\n                                            {(tip_value.check)\n                                            ? <i className=\"classBegin_checked\"/>\n                                            : <i className=\"classBegin_unchecked\"/>\n                                            }\n                                            {index+1}.{tip_value.name}</span>\n                                })\n                                : null\n                                }</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"classBegin_QuickImage\" style={{display: this.state.start ? 'block' : /*'none'*/'block' }}></div>\n                    <div className=\"classBegin_QuickTextArea\" style={{display: this.state.start ? 'block' : /*'none'*/'block' }}><div style={{color:\"#17FF21\"}}>離開</div>左手舉到胸前再往左平行揮</div>\n                </div>\n                <div className=\"testAnimation\"></div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default ClassBegin;\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport tools from './util';\n\nimport {DataService} from '../services/DataService';\n\nclass Catalog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.resetCounter = this.resetCounter.bind(this)\n\n        this.app = this.props.parent;\n        this.state = { \"countDown\": 30, handleKeys : [/*'up','down'*/'s','x','enter','z','c'/*'left','right'*/,'esc'], \"courseList\":[] }\n        this.buttons = {}\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\n            \"availableKeys\" : this.state.handleKeys,\n            \"log\":{\n                'start_time':tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\"),\n                'end_time':'',\n                'elapsed_time':'',\n                'course':'',\n                'page':'',\n                \"user_id\": this.app.state.user.userId,\n                \"age\": this.app.state.user.age,\n                \"gender\": this.app.state.user.gender,\n                \"height\": this.app.state.user.height,\n                \"weight\": this.app.state.user.weight,\n                \"accuniq\": this.app.state.user.accuniq,\n            }\n        })\n    }\n\n    resetCounter(){\n        this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        await DataService.loadJSON()\n\n        let courseList = await DataService.getCourseList2(this.props.parent.state.coachid);\n        this.setState({\"courseList\": courseList})\n\n        if (this.props.parent.state.isDeveMode === false){\n            var interval = window.setInterval(async ()=>{\n                if ( this.state != null ){\n                    var newCountDown = this.state.countDown -1\n                    this.setState({ \"countDown\": newCountDown})\n                    if ( newCountDown === 0){\n                        let log = this.props.parent.state.log;\n                        log['end_time'] = tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\")\n                        log['elapsed_time'] = ( Date.parse(log.end_time) - Date.parse(log.start_time) ) / 1000\n                        log['page'] = 'Page 2';\n                        this.app.changePage( this.app.state.pageIndex.Home )\n                        tools.Util.sendLogNoScore(log);\n                    }\n                }\n            }, 1000)\n\n            this.setState({\"interval\":interval})\n        }\n\n        setTimeout( ()=>{\n            window.setElementEventLintener(\"Class2\")\n\n            if (this.props.parent.state.cid && this.props.parent.state.ciid) {\n                tools.Util.Class2Focus(this.buttons[this.props.parent.state.cid+\"_\"+this.props.parent.state.ciid])\n            } else\n                this.buttons[Object.keys(this.buttons)[0]].focus();\n\n        }, 500)\n    }\n\n    componentWillUnmount(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n        }\n    }\n\n    async mycallback(title){\n        if (this.props.parent.state.isDeveMode === false){\n            this.app.ws.send( JSON.stringify({\"function\":\"uploadCourse\", \"name\":encodeURI(title)} ))\n        }\n    }\n\n    render(){\n        let courseSeqIndex = 0;\n        return <KeyboardEventHandler\n                    handleKeys={this.state.handleKeys}\n                    onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                    <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n\n                        <div className=\"class2_area\" >\n                        {\n                            this.state.courseList.map((item,index) => {\n                                var attr = '{\"cid\":\"'+item.id+'\"}'\n                                return <div className=\"class2_catalog_area\" attr={attr} key={item.id}>\n                                            <div className=\"class2_catalog\" row_index = {index} row_header=\"true\" >\n                                                <div className=\"class2_catalog_Name1\" >{item.en_name.substr(0,1).toUpperCase()}</div>\n                                                <div className=\"class2_catalog_Name2\">{item.en_name.toLowerCase()}</div>\n                                                <div className=\"class2_catalog_Name3\">{item.name}</div>\n                                            </div>\n                                            <div className=\"class2_course_area\">\n                                            {\n                                                item.courses.map((courseItem, courseIndex)=>{\n                                                    var attr = '{\"cid\":\"'+item.id+'\",\"ciid\":\"'+courseItem.id+'\"}'\n                                                    let gifSrc = \"\"\n                                                    for(let i=0;i<courseItem.coach_videos.length;i++){\n                                                        if ( courseItem.coach_videos[i].coach_id === this.props.parent.state.coachid){\n                                                            gifSrc = \"./course\"+courseItem.coach_videos[i].video_preview\n                                                            break;\n                                                        }\n                                                    }\n\n                                                    return <div className=\"class2_courseItem\"\n                                                            ref={(input) => { this.buttons[item.id+\"_\"+courseItem.id] = input }} href=\"#\"\n                                                            key={courseItem.id}\n                                                            tabIndex={courseSeqIndex++}\n                                                            row_index = {index}\n                                                            row_max = {this.state.courseList.length}\n                                                            col_index = {courseIndex}\n                                                            col_max = {item.courses.length}\n                                                            attr={attr}\n                                                            //selectcallback=\"mycallback\"\n                                                            //selectcallbackparam={courseItem.title}\n                                                        >\n                                                        <img className=\"class2_courseImage\" alt={courseItem.title} src={process.env.PUBLIC_URL + './course' + courseItem.image} ></img>\n\n                                                        <div className=\"class2_courseName_wrapper\" ></div>\n                                                        <div className=\"class2_courseName_title\" >{courseItem.title}</div>\n\n                                                        <div className=\"class2_courseWrappImage_area\">\n                                                            <div className=\"class2_courseWrappImage_border\" ></div>\n                                                            <img className=\"class2_courseWrapperImage\" src={gifSrc} alt={courseItem.title}/>\n                                                        </div>\n                                                    </div>\n                                                })\n                                            }\n                                            {\n                                                item.courses.length > 1 ?\n                                                <div style={{marginLeft:80}}>&amps;</div>\n                                                : null\n                                            }\n\n                                            </div>\n                                        </div>\n                            })\n                        }\n                        </div>\n\n                        <video className=\"class2_tour\" loop={true} controls={false} muted={true} autoPlay={true}>\n                            <source src=\"/assets/horizontal.mp4\"></source>\n                        </video>\n\n                    </div>\n                </KeyboardEventHandler>\n    }\n}\n\nexport default Catalog;\n","import React from 'react';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport tools from './util.js'\n\nclass ClassDone extends React.Component {\n    constructor(props) {\n        super(props);\n        this.app = this.props.parent;\n        if (this.props.parent.state.isDeveMode === true){\n            this.app.state['user'] ={\n                \"course\":{\"title\":\"ddddd\"} ,\n                //\"course\" : this.app.state.user.course,\n                \"timer\":\"01:00\",\n                \"count\":12,\n                \"countAvgScore\":99,\n                \"countTimes\":[5000,4000,2000],\n                \"score\":40.1,\n                \"elapsed_time\":30,\n                \"start_Time\":10,\n                \"end_time\":40\n            }\n        }\n\n        this.resetCounter = this.resetCounter.bind(this)\n\n        let times = this.app.state.user.timer.split(\":\")\n        //let avgtime = ( parseInt(times[0]) * 60 + parseInt(times[1]) ) / this.app.state.user.count\n        let actionCountTime = 0\n        //let actionScore = 0\n        for (var i=0;i<this.app.state.user.countTimes.length;i++)\n            actionCountTime += this.app.state.user.countTimes[i]\n        //for (var j=0;j<this.app.state.user.score.length;j++){\n        //    actionScore += this.app.state.user.score[j]\n        //    console.log( \"actionScore\",actionScore )\n        //}\n\n\n        let avgtime = actionCountTime / 1000 / this.app.state.user.count\n\n        let min = parseInt( avgtime / 60 )\n        let sec = Math.round( (avgtime % 60) * 10) / 10\n        this.state = { \"countDown\":30,\n                        \"handleKeys\" : ['s','x','enter'],\n                        \"totalTime\": times,\n                        \"avgTime\": [min > 9 ? min  : '0'+min, sec > 9 ? sec : '0'+sec],\n                        \"countAvgTime\": avgtime,\n                        \"countAvgScore\" : this.app.state.user.score,\n                        \"startNumber\" : this.app.state.user.score <=20 ? '★': this.app.state.user.score <=40 ? '★★' : this.app.state.user.score <=60 ? '★★★' : this.app.state.user.score <=80 ? '★★★★' : '★★★★★'\n                         }\n        this.button2 = null;\n        this.props.parent.currentPage = this;\n        this.props.parent.setState({\"availableKeys\" : this.state.handleKeys})\n    }\n\n    resetCounter(){\n        this.setState({\"countDown\":30})\n    }\n\n    async componentDidMount() {\n        if(this.button2)\n            this.button2.focus();\n        this.setState({ \"countDown\": 30})\n\n        if (this.props.parent.state.isDeveMode === false){\n            var interval = window.setInterval(()=>{\n                if ( this.state != null ){\n\n                    var newCountDown = this.state.countDown -1\n                    this.setState({ \"countDown\": newCountDown})\n                    if ( newCountDown === 0){\n                        this.app.changePage( this.app.state.pageIndex.Home )\n                    }\n                }\n            }, 1000)\n\n            this.setState({\"interval\":interval})\n\n            tools.Util.sendLogScore(\n            {\n                \"elapsed_time\": this.app.state.user.elapsed_time,\n                \"start_time\": this.app.state.user.start_time,\n                \"end_time\": this.app.state.user.end_time,\n                \"course\": this.app.state.user.course.title,\n                \"count\": this.app.state.user.count,\n                \"average_time\": this.state.countAvgTime,\n                \"correct_rate\": this.state.countAvgScore,\n                \"user_id\": this.app.state.user.userId,\n                \"age\": this.app.state.user.age,\n                \"gender\": this.app.state.user.gender,\n                \"height\": this.app.state.user.height,\n                \"weight\": this.app.state.user.weight,\n                \"accuniq\": this.app.state.user.accuniq,\n                \"coach\": this.app.state.user.coach,\n                \"course_category\": this.app.state.user.category,\n            })\n        }\n    }\n\n    componentWillUnmount(){\n        if (this.props.parent.state.isDeveMode === false){\n            if (this.state.interval)\n                window.clearInterval( this.state.interval )\n        }\n    }\n\n    async mycallback(title){\n        if (this.props.parent.state.isDeveMode === false){\n            this.app.ws.send( JSON.stringify({\"function\":\"uploadCourse\", \"name\":encodeURI(title)} ))\n        }\n    }\n\n    render(){\n        return (<KeyboardEventHandler\n                handleKeys={this.state.handleKeys}\n                onKeyEvent={(key, e, page) => this.props.util(key, e, this, page)} >\n                <div style={{backgroundImage:'url(./assets/v_bg.jpg)', width:1080, height:1920}}>\n\n                    <div className=\"classDone_Title\">\n                        您已完成{this.app.state.user.course.title}訓練\n                    </div>\n\n                    <div className=\"classDone_newCountArea\">\n                        <div className=\"classDone_Star\">{this.state.startNumber}</div>\n                        <div className=\"classDone_innerArea\">\n                            <div className=\"classDone_inner2Area\">\n                                <div className=\"classDone_newFons\"> 次數</div>\n                                <div className=\"classDone_newNumberFons\">{this.app.state.user.count}</div>\n                                <div className=\"classDone_newFons2\">/</div>\n                                <div className=\"classDone_newFons\">正確率</div>\n                                <div className=\"classDone_newNumberFons\">{this.state.countAvgScore}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"classDone_AvgTime_title\">\n                        每個動作平均時間\n                    </div>\n                    {\n                        parseInt(this.state.avgTime[0]) > 0\n                        ?\n                        (\n                            <div className=\"classDone_AvglTime_value\">\n                                {this.app.state.user.avgTime[0]}<div style={{fontSize:32,display:'inline'}}>mis</div>\n                                {this.app.state.user.avgTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                        :\n                        (\n                            <div className=\"classDone_AvglTime_value\">\n                                {this.state.avgTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                    }\n\n                    <div className=\"classDone_TotalTime_title\">\n                        總運動時間\n                    </div>\n\n                    {\n                        parseInt(this.state.totalTime[0]) > 0\n                        ?\n                        (\n                            <div className=\"classDone_TotalTime_value\">\n                                {this.state.totalTime[0]}<div style={{fontSize:32,display:'inline'}}>mis</div>\n                                {this.state.totalTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                        :\n                        (\n                            <div className=\"classDone_TotalTime_value\">\n                                {this.state.totalTime[1]}<div style={{fontSize:32,display:'inline'}}>sec</div>\n                            </div>\n                        )\n                    }\n\n                    <div className=\"classDone_qrcode_area\" ></div>\n                    <div className=\"classDone_qrcode_title\">MOVE健身鏡滿意度調查</div>\n                    <div className=\"classDone_qrcode_value\"></div>\n\n                    {\n                        (this.app.state.haveCourseSet === undefined)\n                        ?\n                        <button className=\"classDone_okButton\"\n                            tabIndex=\"2\"\n                            targetpage={ this.app.state.haveCourseSet === undefined ? this.app.state.pageIndex.ClassBegin : this.app.state.pageIndex.Home }\n                            selectcallback=\"mycallback\"\n                            selectcallbackparam={this.app.state.user.course.title}\n                            ref={(input) => { this.button1 = input; }}\n                        >再做一次</button>\n\n                        :null\n                    }\n\n\n                    <button className=\"classDone_endButton\"\n                        tabIndex=\"1\"\n                        targetpage={this.app.state.haveCourseSet === undefined ? this.app.state.pageIndex.Class2 : this.app.state.pageIndex.Home }\n                        ref={(input) => { this.button2 = input; }}\n                    >結束</button>\n\n                        <video className=\"class2_tour\" loop={true} controls={false} muted={true} autoPlay={true}>\n                            <source src=\"/assets/horizontal.mp4\"></source>\n                        </video>\n                </div>\n            </KeyboardEventHandler>)\n    }\n}\n\nexport default ClassDone;\n","import React from 'react';\nimport tools from './util';\nimport {DataService} from '../services/DataService';\n\nclass CourseSet extends React.Component {\n    constructor(props) {\n        super(props);\n        this.app = this.props.parent;\n    }\n\n    resetCounter(){\n    }\n\n    async componentDidMount() {\n        if (this.app.state.haveCourseSet !== undefined){\n            var courseSet = await DataService.getCourseSet(this.app.state.haveCourseSet[0].course_set_id)\n            this.app.setState({\"courseSetLength\":courseSet.courses.length})\n            if(this.app.state.log === undefined){\n                this.app.setState({\"log\":{\n                        'start_time':tools.Util.DateTimeFormat(new Date(),\"yyyy/MM/dd hh:mm:ss\"),\n                        'end_time':'',\n                        'elapsed_time':'',\n                        'course':courseSet.name,\n                        'page':'',\n                        \"user_id\": this.app.state.user.userId,\n                        \"age\": this.app.state.user.age,\n                        \"gender\": this.app.state.user.gender,\n                        \"height\": this.app.state.user.height,\n                        \"weight\": this.app.state.user.weight,\n                        \"accuniq\": this.app.state.user.accuniq,\n                    }\n                })\n            }\n\n            let index = this.app.state.courseSetIndex;\n            let user = this.app.state.user;\n            let userSet = this.app.state.userSet || [];\n            if ( index >= 1){\n                if (index === 1 && user.count === 0){\n                    let log = this.app.state.log\n                    log.course = courseSet.name\n                    tools.Util.sendLogNoScore(log);\n                    this.app.changePage( this.app.state.pageIndex.Home )\n                    return;\n                }\n\n                userSet.push( JSON.parse(JSON.stringify(user)) )\n                this.app.setState({userSet:userSet});\n            }\n\n            //console.log(\"userSet\",userSet)\n            //console.log( \"courseSetExist\", this.app.state.courseSetExist, courseSet.courses.length > index )\n            if (this.app.state.courseSetExist === false && courseSet.courses.length > index && this.app.state.courseQuit === false){\n                //console.log(\"doChangePage \")\n                this.app.setState({\"courseSetIndex\": index+1,\n                                    \"cid\": courseSet.courses[index].category_id,\n                                    \"ciid\": courseSet.courses[index].course_id,\n\n                                    \"next_cid\": courseSet.courses.length > index+1 ? courseSet.courses[index+1].category_id : null,\n                                    \"next_ciid\": courseSet.courses.length > index+1 ? courseSet.courses[index+1].course_id : null,\n\n                                    defaultSets: courseSet.courses[index].sets,\n\n                                    actionCountDown:courseSet.courses[index].reps ,\n                                    defaultCountDown:courseSet.courses[index].reps ,\n                            });\n                this.app.changePage( this.app.state.pageIndex.ClassBegin )\n            } else {\n                //console.log(\"do exist course \")\n                user[\"course\"] = {title:courseSet.name};\n                user['start_time'] = userSet[0]['start_time']\n                user['end_time'] = userSet[ userSet.length -1 ]['end_time']\n                user['elapsed_time'] = ( Date.parse(user.end_time) - Date.parse(user.start_time) ) / 1000\n                user['count'] = 0\n                user['countTimes'] = []\n                user['score'] = 0\n                let _time = [0,0]\n                //console.log( \"userSet\", JSON.stringify(userSet,null,4) )\n                for(let i=0;i<userSet.length;i++){\n                    user['count'] = user['count'] + userSet[i]['count'];\n                    user['score'] = user['score'] + userSet[i]['score'];\n                    user['countTimes'] = user['countTimes'].concat(userSet[i]['countTimes'])\n\n                    let _timeTemp = userSet[i]['timer'].split(\":\")\n                    _time[0] = _time[0]+parseInt(_timeTemp[0])\n                    _time[1] = _time[1]+parseInt(_timeTemp[1])\n                }\n\n                user['score'] = Math.round( user['score'] / userSet.length * 10 ) / 10\n\n                _time[0] = _time[0] + parseInt(_time[1] / 60)\n                _time[1] = Math.round( (_time[1] % 60) * 10) / 10\n\n                user['timer'] = _time[0]+\":\"+_time[1];\n\n                this.app.changePage( this.app.state.pageIndex.ClassDone )\n            }\n        } else {\n            this.app.changePage( this.app.state.pageIndex.Class2 )\n        }\n    }\n\n    componentWillUnmount(){\n\n    }\n\n    render(){\n        return (<div></div>)\n    }\n}\n\nexport default CourseSet;\n","import React from 'react';\nimport './App.css';\n\nimport tools from './pages/util.js'\n\nimport Home from './pages/Home.js'\nimport ClassBegin from './pages/ClassBegin';\nimport Class2 from './pages/Class2';\nimport ClassDone from './pages/ClassDone';\nimport CourseSet from './pages/CourseSet';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {page: 1,\n                  availableKeys:[],\"lastActionTime\":\"\",\n                  isDeveMode: process.env.NODE_ENV !== 'production',\n                  doExercise:false, websocketip:'127.0.0.1:5500',\n                  pageIndex:{\n                    \"Home\":1,\n                    \"Class2\":2,\n                    \"ClassBegin\":3,\n                    \"ClassDone\":4,\n                    \"CourseSet\":5,\n                  },\n                  user:{userId:null,age:null,gender:null,height:null,weight:null,accuniq:null}\n                } ;\n\n    this.useWebSocket = this.useWebSocket.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.currentPage = null;\n  }\n\n  componentDidMount() {\n    if ( this.state.isDeveMode === false){\n      this.useWebSocket(this)\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if ( this.state.isDeveMode === false){\n      this.useWebSocket(this)\n    }\n  }\n  componentWillUnmount() {\n\n  }\n\n  keyEvent = ((key, e, page) => tools.Util.KeyboardEventHandler_onKeyEvent(key, e,this,page))\n\n  useWebSocket(app){\n    let _app = this\n\n    if (this.ws == null){\n      this.ws = new WebSocket(\"ws://\"+_app.state.websocketip+\"/api\");\n\n      this.ws.onopen = function() {\n        console.log(\"onopen\")\n      };\n\n      this.ws.onmessage = function(e) {\n\n        let json = JSON.parse(e.data)\n        //console.log( e.data )\n        if (json['function'] === 'exercise_status' && app.state.doExercise === false) {\n          var key = json['最後動作']\n          var currentFoucs = window.$(':focus')[0]\n          //console.log( key, currentFoucs)\n          if (currentFoucs === null) {\n            return;\n          }\n\n          switch(key){\n\n            /*case \"左手彎舉\":\n              console.log('case 左手彎舉 and 向上選取')\n              if (_app.state.availableKeys.includes('s')){ //up\n                console.log('case 左手彎舉 in if')\n                _app.keyEvent('s', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;*/\n\n            case \"向上選取\":\n              console.log('case 向上選取')\n              if (_app.state.availableKeys.includes('s')){ //up\n                console.log('case 向上選取 in if')\n                _app.keyEvent('s', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            /*case \"右手彎舉\":\n              console.log('case 右手彎舉 and 向下選取')\n              if (_app.state.availableKeys.includes('x')){ //down\n                console.log('case 向下選取 in if')\n                _app.keyEvent('x', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;*/\n\n            case \"向下選取\":\n              console.log('case 向下選取')\n              if (_app.state.availableKeys.includes('x')){ //down\n                console.log('case 向下選取 in if')\n                _app.keyEvent('x', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            /*case \"雙手交叉\":\n              console.log('case 雙手交叉 and 取消')\n              if (_app.state.availableKeys.includes('esc')){\n                console.log('case 取消 in if')\n                _app.keyEvent('esc', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;*/\n\n            case \"取消\":\n              console.log('case 取消')\n              if (_app.state.availableKeys.includes('esc')){\n                console.log('case 取消 in if')\n                _app.keyEvent('esc', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            case \"向右選取\":\n              console.log('case 向右選取')\n              if (_app.state.availableKeys.includes('z')){ // 'left'\n                console.log('case 向右選取 in if')\n                _app.keyEvent('z', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n            case \"向左選取\":\n              console.log('case 向左選取')\n              if (_app.state.availableKeys.includes('c')){ // right\n                console.log('case 向左選取 in if')\n                _app.keyEvent('c', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n\n            case \"雙手彎舉\":\n              console.log('case 雙手彎舉 and 點選')\n              console.log('case 點選')\n              if (_app.state.availableKeys.includes('enter')){\n                console.log('case 點選 in if')\n                _app.keyEvent('enter', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            case \"點選\":\n              console.log('case 點選')\n              if (_app.state.availableKeys.includes('enter')){\n                console.log('case 點選 in if')\n                _app.keyEvent('enter', {\"target\":currentFoucs},_app.currentPage)\n              }\n              break;\n\n            default:\n              break;\n          }\n        } else if (json['function'] === 'getExercise') {\n          //console.log( 'function === getExercise', json['function'] === 'getExercise' )\n          if (typeof _app.currentPage.getExerciseWebSockit === \"function\" ){\n            _app.currentPage.getExerciseWebSockit(json)\n          }\n        } else if (json['function'] === 'qrcode') {\n          //console.log( 'function === qrcode', json['function'] === 'qrcode' )\n\n          if (typeof _app.currentPage.getGymPhysicalFitnessCenter === \"function\" ){\n            _app.currentPage.getGymPhysicalFitnessCenter(json['content'])\n          }\n\n        } else {\n          //console.log( 'function Error ' )\n        }\n      };\n\n      this.ws.onclose = function() {\n        _app.ws = null\n        _app.useWebSocket(_app)\n      };\n\n      this.ws.onerror = function(e) {\n        console.error(e)\n      };\n    }\n  }\n\n  changePage(page){\n    this.setState( {page: page})\n  }\n\n  render() {\n    const currentPageIndex = this.state.page;\n\n    return (\n      <div className=\"App\" style={{maxWidth:1080, maxHeight:1920, minHeight:1920,minWidth:1080}} >\n        { currentPageIndex === this.state.pageIndex.Home\n            ? <Home util={this.keyEvent} parent={this} ></Home>\n            : currentPageIndex === this.state.pageIndex.Class2\n            ? <Class2 util={this.keyEvent} parent={this} ></Class2>\n            : currentPageIndex === this.state.pageIndex.ClassBegin\n            ? <ClassBegin util={this.keyEvent} parent={this} ></ClassBegin>\n            : currentPageIndex === this.state.pageIndex.ClassDone\n            ? <ClassDone util={this.keyEvent} parent={this} ></ClassDone>\n            : <CourseSet util={this.keyEvent} parent={this} ></CourseSet>\n            }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}